{"DashboardDefinitionRoles":[{"AccessRoleId":"9c5d7946-64b4-4dae-bc89-60399d909037","DashboardDefinitionId":"e19bcc38-fd1a-4160-9606-7242e2a8b23b","AccessRoleName":"Perfil Leader Account"},{"AccessRoleId":"9c5d7946-64b4-4dae-bc89-60399d909037","DashboardDefinitionId":"e19bcc38-fd1a-4160-9606-7242e2a8b23b","AccessRoleName":"Perfil Leader Account"},{"AccessRoleId":"ce2dd148-6977-4514-8246-f0eee03913cf","DashboardDefinitionId":"e19bcc38-fd1a-4160-9606-7242e2a8b23b","AccessRoleName":"Perfil Leader Creative/Producer"},{"AccessRoleId":"ce2dd148-6977-4514-8246-f0eee03913cf","DashboardDefinitionId":"e19bcc38-fd1a-4160-9606-7242e2a8b23b","AccessRoleName":"Perfil Leader Creative/Producer"}],"Id":"e19bcc38-fd1a-4160-9606-7242e2a8b23b","Name":"Manager Activities","Active":true,"Location":0,"DocumentId":"00000000-0000-0000-0000-000000000000","DocumentName":"","DocumentsConfiguration":"{\"entity\":\"\",\"operations\":{\"read\":{\"endpoint\":\"\"},\"update\":{\"endpoint\":\"\",\"model\":{}},\"create\":{\"endpoint\":\"\",\"model\":{}},\"patch\":{\"endpoint\":\"\",\"model\":[{\"field\":\"\",\"caption\":\"\",\"type\":\"\"}]},\"remove\":{\"endpoint\":\"\"},\"lookup\":{\"endpoint\":\"\"},\"lookupById\":{\"endpoint\":\"\"}},\"layout\":{\"create\":{},\"read\":{},\"patch\":{}},\"customDocument\":{\"useCustomStyle\":false,\"mainColor\":\"\",\"secondaryColor\":\"\",\"imageClass\":\"\",\"namePlural\":\"\",\"name\":\"\",\"systemName\":\"\"},\"availableOptions\":{\"feed\":false,\"info\":true,\"files\":false,\"userfields\":false,\"dashboard\":false}}","Templates":[],"DashboardDefinitionComponents":[{"Id":"32d9486c-ec2b-4898-9a8b-05d3b1d7e9dd","Name":"User Fields","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":2,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetHeight\":\"\",\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"SELECT\\tjob.*, \\r\\n        duf.*, \\r\\n        ws.Name as StateName, \\r\\n        ws.Color as StateColor,\\r\\n        (select usr.Name from [User] usr, Deliverable del where del.Oid = job.Id and usr.Oid = del.CreatedBy) as CreatedByName,\\r\\n        (select string_agg(convert(nvarchar(50), ass.[User]), ',') from Assignment ass, AssignmentType ast where ass.DocumentOid = job.Oid and ast.Name = 'Ejecutor(es)' and ass.AssignmentType = ast.Oid) as ExecutorId,\\r\\n        (select string_agg(convert(nvarchar(50), usr2.Name), ',') from Assignment ass, AssignmentType ast, [User] usr2 where usr2.Oid = ass.[User] and ass.DocumentOid = job.Oid and ast.Name = 'Ejecutor(es)' and ass.AssignmentType = ast.Oid) as Executor,\\r\\n        (select STRING_AGG(convert(nvarchar(50), ass.[User]), ',') from Assignment ass, AssignmentType ast where ass.DocumentOid = job.Oid and ast.Name = 'L?der(es)' and ass.AssignmentType = ast.Oid) AS ResponsibleId,\\r\\n        (select string_agg(convert(nvarchar(50), usr3.Name), ',') from Assignment ass, AssignmentType ast, [User] usr3 where usr3.Oid = ass.[User] and ass.DocumentOid = job.Oid and ast.Name = 'L?der(es)' and ass.AssignmentType = ast.Oid) as Responsible\\r\\nFROM\\t[Analytics].[Job](@CurrentUserId) job LEFT OUTER JOIN Deliverable_userFields duf ON (job.Oid = duf.Oid) LEFT OUTER JOIN WorkflowState ws ON (job.StateId = ws.Oid) \\r\\nWHERE   job.[Date] BETWEEN @FromDate AND @ToDate  and\\r\\n        (job.[CompanyId]  = @Company or @Company = '00000000-0000-0000-0000-000000000000') and\\r\\n        (job.[DivisionId] = @Division or @Division = '00000000-0000-0000-0000-000000000000') and\\r\\n        (job.[DepartmentId] = @Department or @Department = '00000000-0000-0000-0000-000000000000') AND\\r\\n        ws.name in ('Rechazado', 'Estrategia / T2M En Curso', 'Desarollo Creativo en Curso','Por Aprobar Desarollo Creativo', 'Revisi?n Brief y Planeaci?n', 'Estrategia / T2M En Curso',\\r\\n'Por Aprobar Estrategia / T2M', 'En Proceso', 'Ppto por Aprobaci?n interna', 'Producci?n por Aprobar Lider', 'Ppto Aprobado',\\r\\n            'Listo para facturar')\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"startDate\",\"endDate\",\"Department\",\"Company\",\"Division\"]}}]","DashboardComponentType":{"Id":"87b5ea62-53a3-478d-84d7-989716aee552","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\n    \"selection\": {\n        \"mode\": \"none\"\n    },\n    \"loadPanel\": {\n        \"enabled\": false\n    },\n    \"allowFiltering\": true,\n    \"searchPanel\": {\n        \"visible\": true\n    },\n    \"editing\": {\n        \"mode\": \"cell\",\n        \"allowUpdating\": true\n    },\n    \"scrolling\": {\n        \"mode\": \"virtual\"\n    },\n    \"grouping\": {\n        \"autoExpandAll\": false\n    },\n    \"columns\": [\n        {\n            \"dataField\": \"StateName\",\n            \"caption\": \"Estado\",\n            \"name\": \"StateName\",\n            \"visibleIndex\": 2,\n            \"alignment\": \"left\",\n            \"width\": 80,\n            \"allowEditing\": false,\n            \"groupCellTemplate\": \"function(e, i) {                var color = i.component.option().dataSource.find(row => row.StateName == i.text).StateColor;                var h = document.createElement('span');                h.style.backgroundColor = color;                 h.classList.add('documentStageColor');                e.append(h);                h = document.createElement('span');                var ht = ' ' + i.text + ' (' + i.summaryItems[0].value + ')';                 h.innerHTML = ht;                e.append(h);            }\"\n        },\n        {\n            \"dataField\": \"Priority\",\n            \"name\": \"Priority\",\n            \"caption\": \"Prioridade\",\n            \"allowEditing\": false,\n            \"cellTemplate\": \"function(e, i) {        var h = document.createElement('DIV');         e.appendChild(h);        h.classList.add('fal');        if (i.value==2)         {          h.style['color'                ] = '#f7412d';          h.classList.add('fa-tachometer-fastest');            }        if (i.value==1)        {          h.style['color'                ] = '#3ba3f8';          h.classList.add('fa-tachometer-average');            }        if (i.value==0)        {          h.style['color'                ] = '#7ec880';          h.classList.add('fa-tachometer-slowest');            }        }\",\n            \"visibleIndex\": 6\n        },\n        {\n            \"name\": \"Tags\",\n            \"caption\": \"Tags\",\n            \"visibleIndex\": 5,\n            \"width\": 70,\n            \"allowEditing\": false,\n            \"cellTemplate\": \"function(e, i) {                    SW.executeAPI('GET','document/' + i.data.Id + '/tags', { documentId:i.data.Id,documentType:'deliverable' },null).then(x => {                        if (x != null && x.length > 0) {                        var p = document.createElement('DIV');                         e.appendChild(p);                        SW.setAttribute(p, null,'style',';display:flex;',false);                        var h = document.createElement('DIV');                         p.appendChild(h);                        SW.setAttribute(h, null,'class','module-tags-list-for-lists',false);                        h.dataset['id'] = i.data.Oid;                        var h0 = document.createElement('span');                         SW.setAttribute(h0, null,'class',' module-tags-dot',false);                        h.appendChild(h0);                        var h1 = document.createElement('span');                         h0.appendChild(h1);                        var h2 = document.createElement('span');                         SW.setAttribute(h2, null,'class',' module-tags-text',false);                        SW.setAttribute(h2, null,'style',';line-height: 16px;',false);                        h.appendChild(h2);                        h2.innerHTML = x[0].Label;                        SW.setAttribute(h, null,'style',';background-color:' + x[0].Color ,false);                    };                });            }\"\n        },\n        {\n            \"dataField\": \"Company\",\n            \"caption\": \"Compa?ia\",\n            \"allowEditing\": false,\n            \"visible\": false\n        },\n        {\n            \"dataField\": \"Client\",\n            \"caption\": \"Cliente\",\n            \"allowEditing\": false,\n            \"visibleIndex\": 100,\n            \"groupIndex\": 2\n        },\n        {\n            \"dataField\": \"Division\",\n            \"caption\": \"Divisi?n\",\n            \"allowEditing\": false,\n            \"visibleIndex\": 200,\n            \"groupIndex\": 0\n        },\n        {\n            \"dataField\": \"Department\",\n            \"caption\": \"Departamento\",\n            \"allowEditing\": false,\n            \"visibleIndex\": 300,\n            \"groupIndex\": 1\n        },\n        {\n            \"dataField\": \"Name\",\n            \"caption\": \"Actividad\",\n            \"allowEditing\": false,\n            \"visibleIndex\": 4\n        },\n        {\n            \"dataField\": \"Number\",\n            \"caption\": \"Numero\",\n            \"allowEditing\": false,\n            \"visible\": false\n        },\n        {\n            \"dataField\": \"Date\",\n            \"caption\": \"Fecha\",\n            \"allowEditing\": false,\n            \"dataType\": \"date\",\n            \"format\": \"shortDate\",\n            \"editorOptions\": {\n                \"type\": \"datetime\"\n            },\n            \"visibleIndex\": 7\n        },\n        {\n            \"dataField\": \"PO Number\",\n            \"dataType\": \"string\",\n            \"visible\": false\n        },\n        {\n            \"dataField\": \"Middle Delivery\",\n            \"dataType\": \"date\",\n            \"format\": \"shortDate\",\n            \"editorOptions\": {\n                \"type\": \"datetime\"\n            },\n            \"visible\": false\n        },\n        {\n            \"dataField\": \"Country\",\n            \"dataType\": \"string\",\n            \"visible\": false\n        },\n        {\n            \"dataField\": \"Desafio Semana\",\n            \"dataType\": \"string\",\n            \"visibleIndex\": 9\n        },\n        {\n            \"dataField\": \"Punto de atenci?n\",\n            \"dataType\": \"string\",\n            \"visibleIndex\": 10\n        },\n        {\n            \"dataField\": \"EndDateAndTime\",\n            \"caption\": \"Tiempo de finalizaci?n\",\n            \"alignment\": \"center\",\n            \"dataType\": \"date\",\n            \"format\": \"HH:mm\",\n            \"allowEditing\": false,\n            \"width\": 105,\n            \"visibleIndex\": 8\n        },\n        {\n            \"dataField\": \"Project\",\n            \"name\": \"Proyecto\",\n            \"caption\": \"Projeto\",\n            \"allowEditing\": false,\n            \"visibleIndex\": 3\n        },\n        {\n            \"dataField\": \"CreatedByName\",\n            \"caption\": \"Creado por\",\n            \"allowEditing\": false,\n            \"visibleIndex\": 12\n        },\n        {\n            \"dataField\": \"Executor\",\n            \"name\": \"Ejecutor\",\n            \"caption\": \"Executado por\",\n            \"allowEditing\": false,\n            \"visibleIndex\": 11\n        },\n        {\n            \"dataField\": \"Responsible\",\n            \"name\": \"L?der\",\n            \"caption\": \"Responsable por\",\n            \"allowEditing\": false,\n            \"visibleIndex\": 1\n        },\n        {\n            \"dataField\": \"ExecutorId\",\n            \"caption\": \"Ejecutor\",\n            \"alignment\": \"right\",\n            \"format\": \"#,##0\",\n            \"width\": 100,\n            \"allowEditing\": false,\n            \"visible\": false,\n            \"cellTemplate\": \"function(e, i) {                if (i.text == '') return;                 var executors = i.text.split(',');                var h = document.createElement('DIV');                e.appendChild(h);                h.style['text-align']= 'center';                 h.style['display'] = 'flex';                h.style['justify-content'] = 'flex-end';                function myFunction(item, index) {                    var img = document.createElement('img');                     h.appendChild(img);                    img.src = SkillsWorkflow.getUserImages([item]);                    img.style['border-radius'] = '40px';                     img.height='16';                    img.width='16';                }                executors.forEach( (item, index) => myFunction(item, index));            }\"\n        },\n        {\n            \"dataField\": \"ResponsibleId\",\n            \"caption\": \"Responsables\",\n            \"alignment\": \"right\",\n            \"format\": \"#,##0\",\n            \"width\": 100,\n            \"allowEditing\": false,\n            \"visible\": false,\n            \"cellTemplate\": \"function(e, i) {                if (i.text == '') return;                 var responsibles = i.text.split(',');                var h = document.createElement('DIV');                e.appendChild(h);                h.style['text-align']= 'center';                 h.style['display'] = 'flex';                h.style['justify-content'] = 'flex-end';                function myFunction(item, index) {                    var img = document.createElement('img');                     h.appendChild(img);                    img.src = SkillsWorkflow.getUserImages([item]);                    img.style['border-radius'] = '40px';                     img.height='16';                    img.width='16';                }                responsibles.forEach( (item, index) => myFunction(item, index));            }\"\n        }\n    ],\n    \"summary\": {\n        \"groupItems\": [\n            {\n                \"column\": \"Title\",\n                \"summaryType\": \"count\",\n                \"displayFormat\": \"{0}\",\n                \"alignment\": \"left\"\n            }\n        ]\n    },\n    \"onRowUpdating\": \"function(e){ SW.executeAPI('PUT', 'v3/documentUserFieldValues', null, { 'DocumentTypeName':'Deliverable', 'DocumentId':e.key.Id, 'DocumentUserFieldValues':Object.entries(e.newData).map(([k, v]) => ({'ColumnName':k, 'Value':v})) }); }\",\n    \"onRowClick\": \"function(e){if(e.rowType=='data') SkillsWorkflow.preview(e.key, 'job');}\"\n}","DashboardDefinitionId":"e19bcc38-fd1a-4160-9606-7242e2a8b23b"},{"Id":"dcf81e5c-4975-4b4c-97e4-6a777fadad5a","Name":"Manager Activities Dashboard","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":1,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"rangeselector\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#e0e0e0\",\"WidgetHeight\":30,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"SELECT  \\tDATEADD(dd, - (DATEPART(dw, job.[Date] - 2)), job.[Date]) AS WeekStart, \\r\\n\\t\\t\\t[Year], \\r\\n\\t\\t\\t[Month], \\r\\n\\t\\t\\tCONVERT(int, CONCAT(year(job.[Date]), DATEPART(wk, job.[Date]))) as [YearWeek], \\r\\n\\t\\t\\tSUM(CASE WHEN job.StateTypeCode IN (6) THEN 1 ELSE 0 END) as [Closed],\\r\\n\\t\\t\\tSUM(CASE WHEN job.StateTypeCode NOT IN (6) THEN -1 ELSE 0 END) as [Open]\\r\\nFROM    \\t[Analytics].[Job](@CurrentUserId) job\\r\\nWHERE   \\tYear(job.[Date]) = @year AND\\r\\n\\t\\t\\t(job.[CompanyId]  = @Company or @Company = '00000000-0000-0000-0000-000000000000') AND\\r\\n\\t\\t\\t(job.[DivisionId] = @Division or @Division = '00000000-0000-0000-0000-000000000000') AND\\r\\n\\t\\t\\t(job.[DepartmentId] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\nGROUP BY\\tDATEADD(dd, - (DATEPART(dw, job.[Date] - 2)), job.[Date]), [Year], [Month], CONVERT(int, CONCAT(year(job.[Date]), DATEPART(wk, job.[Date])))\\r\\nUNION ALL\\r\\nSELECT\\t\\tMIN(Day) as WeekStart,\\r\\n\\t\\t\\tYEAR(MIN(Day)) [Year],\\r\\n\\t\\t\\tMONTH(MIN(Day)) [Month],\\r\\n\\t\\t\\tConvert(int, CONCAT(year(MIN(Day)), DATEPART(wk, MIN(Day)))) as [YearWeek], \\r\\n        \\t0 as [Closed], \\r\\n        \\t0 as [Open]\\r\\nFROM \\t\\tYearDay WHERE Year(Day) = @year\\r\\nGROUP BY\\tDATEPART(yyyy, Day), DATEPART(ww, Day)\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Company\",\"Department\",\"Division\"]}}]","DashboardComponentType":{"Id":"87b5ea62-53a3-478d-84d7-989716aee552","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"onDrawn\": \"function(s) {\r\n      var sunday = new Date();\r\n      var lastDayOfWeek = 7 - sunday.getDay();\r\n      sunday.setDate(sunday.getDate() + lastDayOfWeek); \r\n      var monday = new Date(sunday);\r\n      monday.setDate(monday.getDate() - 6);\r\n      monday.setHours(0, 0, 0, 0);\r\n      sunday.setHours(23, 59, 59, 59);\r\n      s.component.option('value', [monday, sunday]);\r\n    }\",\r\n    \"size\": {\r\n        \"height\": 90\r\n    },\r\n    \"containerBackgroundColor\": \"#e0e0e0\",\r\n    \"selectedRangeColor\": \"#f5564a\",\r\n    \"chart\": {\r\n        \"commonSeriesSettings\": {\r\n            \"type\": \"steparea\",\r\n            \"argumentField\": \"WeekStart\"\r\n        },\r\n        \"series\": [\r\n            {\r\n                \"valueField\": \"Closed\"\r\n            },\r\n            {\r\n                \"valueField\": \"Open\"\r\n            }            \r\n        ]\r\n    },\r\n    \"scale\": {\r\n        \"minorTickInterval\": \"week\",\r\n        \"tickInterval\": \"week\",\r\n        \"valueType\": \"datetime\"\r\n    },\r\n    \"sliderMarker\": {\r\n        \"format\": \"monthAndDay\",\r\n        \"color\": \"#da5859\"\r\n    },\r\n    \"value\": [\r\n        \"2019/09/09\",\r\n        \"2019/09/15\"\r\n    ]\r\n}","DashboardDefinitionId":"e19bcc38-fd1a-4160-9606-7242e2a8b23b"},{"Id":"18a24bb4-d687-4d00-b9cb-c1dea03ca3b8","Name":"Manager Activities Dashboard","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#e0e0e0\",\"WidgetHeight\":10,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"87b5ea62-53a3-478d-84d7-989716aee552","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"colCount\": 4,\r\n    \"items\": [\r\n        {\r\n            \"name\": \"Year\",\r\n            \"dataField\": \"Year\",\r\n            \"editorType\": \"dxNumberBox\",\r\n            \"editorOptions\": {\r\n                \"showSpinButtons\": true,\r\n                \"value\": 2019,\r\n                \"width\": 65,\r\n                \"placeholder\": \"year\",\r\n                \"onContentReady\": \"function(e){ setTimeout(function() { SkillsWorkflow.setDashboardFilter('year', 2019); SkillsWorkflow.setDashboardFilter('Company', '00000000-0000-0000-0000-000000000000'); SkillsWorkflow.setDashboardFilter('Division', '00000000-0000-0000-0000-000000000000'); SkillsWorkflow.setDashboardFilter('Department', '00000000-0000-0000-0000-000000000000');}, 500) }\",\r\n                \"onValueChanged\": \"function(e){ if(e.value != null) { SkillsWorkflow.setDashboardFilter('year', e.value); } }\"\r\n            },\r\n            \"noDataText\": \"Please wait...\"\r\n        },\r\n        {\r\n            \"dataField\": \"CompanyId\",\r\n            \"label\": {\r\n                \"text\": \"Company\"\r\n            },\r\n            \"editorType\": \"dxSelectBox\",\r\n            \"editorOptions\": {\r\n                \"width\": 250,\r\n                \"searchEnabled\": true,\r\n                \"dataSource\": {\r\n                    \"load\": \"function(loadOptions){ \r\n                            var searchValue = (\r\n                            loadOptions.searchValue != null ? loadOptions.searchValue : ''); \r\n                            var searchTake = (loadOptions.searchValue != null && loadOptions.searchValue != '' ? 10 : 100); \r\n                            return SkillsWorkflow.executeAPI('GET', 'companies/lookup',\r\n                    null,\r\n                    {}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All companies'\r\n                        });return res;\r\n                    })\r\n                }\",\r\n                \"byKey\": \"function(key) { return SW.executeAPI('GET','companies/'+key+'/lookup',null,{}).then( result =>  { return Promise.resolve(result);}) }\"\r\n            },\r\n            \"placeholder\": \"All companies\",\r\n            \"displayExpr\": \"Name\",\r\n            \"valueExpr\": \"Id\",\r\n            \"onValueChanged\": \"function(e){ \r\n                if( e.value != null && e.value != '') {\r\n                    SkillsWorkflow.setDashboardFilter('Company', e.value);\r\n            } else {\r\n                    SkillsWorkflow.setDashboardFilter('Company', '00000000-0000-0000-0000-000000000000');\r\n            }\r\n                SW.setComponentByValue(e.previousValue, e.value, 'DivisionId');\r\n        }\",\r\n            \"onInitialized\": \"function(e){ SW.saveComponent(e.component,'CompanyId');}\"\r\n    }\r\n},\r\n{\r\n    \"dataField\": \"DivisionId\",\r\n    \"label\": {\r\n        \"text\": \"Division\"\r\n    },\r\n    \"editorType\": \"dxSelectBox\",\r\n    \"editorOptions\": {\r\n        \"width\": 250,\r\n        \"searchEnabled\": true,\r\n        \"dataSource\": {\r\n            \"load\": \"function(loadOptions){ \r\n                            let searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : ''); \r\n                            let skip = loadOptions.skip || 0; \r\n                            let take = loadOptions.take || 20; \r\n                            var param = { name:searchValue, skip: skip, take: take\r\n            }; \r\n                            var companyId = SW.getValueFromComponent('CompanyId'); \r\n                            if (companyId == '00000000-0000-0000-0000-000000000000') {\r\n                                return SkillsWorkflow.executeAPI('GET', 'divisions/lookup',\r\n                null,\r\n                {}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All divisions'\r\n                    });return res;\r\n                })\r\n            } else if (companyId != null) { \r\n                                param['companyId'\r\n                ] = companyId;\r\n                                return SkillsWorkflow.executeAPI('GET', 'divisions/lookup',param,\r\n                {}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All divisions'\r\n                    });return res;\r\n                })\r\n            }\r\n        }\",\r\n                \"byKey\": \"function(key) { return SW.executeAPI('GET','divisions/'+key+'/lookup',null,{}).then( result =>  { return Promise.resolve(result);})}\"\r\n    },\r\n    \"placeholder\": \"All divisions\",\r\n    \"onValueChanged\": \"function(e){ \r\n                if (e.value != null && e.value != '') {\r\n                    SkillsWorkflow.setDashboardFilter('Division', e.value);\r\n    } else {\r\n                    SkillsWorkflow.setDashboardFilter('Division', '00000000-0000-0000-0000-000000000000');\r\n    }\r\n                SW.setComponentByValue(e.previousValue, e.value, 'DepartmentId');\r\n}\",\r\n            \"onInitialized\": \"function(e){ SW.saveComponent(e.component, 'DivisionId'); }\",\r\n\"displayExpr\": \"Name\",\r\n\"valueExpr\": \"Id\",\r\n\"disabled\": true\r\n}\r\n},\r\n{\r\n\"dataField\": \"DepartmentId\",\r\n\"label\": {\r\n\"text\": \"Department\"\r\n},\r\n\"editorType\": \"dxSelectBox\",\r\n\"editorOptions\": {\r\n\"width\": 250,\r\n\"searchEnabled\": true,\r\n\"dataSource\": {\r\n    \"load\": \"function(loadOptions){ \r\n                    let searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : ''); \r\n                    let skip = loadOptions.skip || 0; \r\n                    let take = loadOptions.take || 20;\r\n                    var param = { name: searchValue, skip: skip, take: take\r\n    }; \r\n                    var divisionId = SW.getValueFromComponent('DivisionId'); \r\n                    var companyId = SW.getValueFromComponent('CompanyId'); \r\n                    if (divisionId != null && divisionId != '00000000-0000-0000-0000-000000000000' && companyId != null && companyId != '00000000-0000-0000-0000-000000000000') { \r\n                        param['divisionId'\r\n        ] = divisionId;\r\n                        param['companyId'\r\n        ] = companyId;\r\n    } \r\n                    return SkillsWorkflow.executeAPI('GET', 'departments',param,\r\n    {}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All departments'\r\n        });return res;\r\n    })\r\n}\",\r\n                \"byKey\": \"function(key) { return SW.executeAPI('GET', 'departments/' + key, null, {}).then( result =>  { return Promise.resolve(result); } ) }\"\r\n},\r\n\"placeholder\": \"All departments\",\r\n\"onValueChanged\": \"function(e){ \r\n                    if(e.value != null && e.value != '') {\r\n                        SkillsWorkflow.setDashboardFilter('Department', e.value);\r\n} else {\r\n                        SkillsWorkflow.setDashboardFilter('Department', '00000000-0000-0000-0000-000000000000');\r\n}\r\n}\",\r\n            \"onInitialized\": \"function(e){ SW.saveComponent(e.component, 'DepartmentId'); }\",\r\n\"displayExpr\": \"Name\",\r\n\"valueExpr\": \"Id\",\r\n\"disabled\": true\r\n}\r\n}\r\n]\r\n}","DashboardDefinitionId":"e19bcc38-fd1a-4160-9606-7242e2a8b23b"}]}
