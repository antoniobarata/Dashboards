{"DashboardDefinitionRoles":[],"Id":"87eb5ca2-45b1-4887-a7e8-a35bf538d6ba","Name":"Clients Dashboard","Active":true,"Location":0,"DocumentId":"00000000-0000-0000-0000-000000000000","DocumentName":"","DocumentsConfiguration":null,"Templates":[],"DashboardDefinitionComponents":[{"Id":"0b6919dc-e412-4866-9811-12c803e9ae8f","Name":"Typology Group Burn","Active":true,"UseQuery":false,"Query":null,"Size":4,"Order":3,"Parameters":"[\r\n    {\r\n        \"WidgetSubTitle\": \"Actual Time\",\r\n        \"WidgetType\": \"chart\",\r\n        \"WidgetFilterField\": \"\",\r\n        \"WidgetColor\": \"#efefef\",\r\n        \"WidgetHeight\": \"\",\r\n        \"WidgetHeader\": {\r\n            \"showContextInfo\": false,\r\n            \"WidgetPeriodChooser\": {\r\n                \"type\": \"year\",\r\n                \"visible\": false\r\n            },\r\n            \"WidgetMetrics\": {\r\n                \"visible\": true,\r\n                \"Metrics\": [\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"# Planned\",\r\n                        \"metricFieldValue\": \"PlannedTimeGrandTotal\"\r\n                    },\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"# Actual\",\r\n                        \"metricFieldValue\": \"ActualTimeGrandTotal\"\r\n                    }\r\n                ]\r\n            },\r\n            \"showSubTitle\": true,\r\n            \"showTitle\": true\r\n        },\r\n        \"WidgetDataSources\": {\r\n            \"main\": {\r\n                \"type\": \"queryText\",\r\n                \"value\": \" SELECT v.UserTypologyGroupId as TypologyGroupId, v.UserTypologyGroup as TypologyGroup, sum(v.ActualTime) as ActualTime, sum(v.PlannedTime) as PlannedTime, sum(v.ContractedTime) as PlannedTime, sum(sum(v.ActualTime)) over () as ActualTimeGrandTotal, sum(sum(v.PlannedTime)) over () as PlannedTimeGrandTotal, sum(sum(v.ContractedTime)) over () as ContractedTimeGrandTotal FROM ( SELECT t.UserTypologyGroupId, t.UserTypologyGroup, sum(t.ActualTime) as ActualTime, 0 as PlannedTime, 0 as ContractedTime FROM Analytics.Timesheet(@CurrentUserId) t WHERE 1 = 1 /*[DateFilter]*/ and (DATEFROMPARTS(t.[Year], t.[Month], 1) between @FromDate and @ToDate) /*[/DateFilter]*/ /*[ClientFilter]*/ and t.ClientId = @ClientId /*[/ClientFilter]*/ GROUP BY t.UserTypologyGroupId, t.UserTypologyGroup UNION SELECT pht.UserTypologyGroupId, pht.UserTypologyGroup, 0 as ActualTime, sum(pht.[Hours]) as PlannedTime, sum(pht.ContractedHours) as ContractedTime FROM Analytics.PlannedHoursTotal(@CurrentUserId) pht WHERE 1 = 1 /*[ClientFilter]*/ and pht.ClientId = @ClientId /*[/ClientFilter]*/ GROUP BY pht.UserTypologyGroupId, pht.UserTypologyGroup ) v GROUP BY v.UserTypologyGroupId, v.UserTypologyGroup\",\r\n                \"mapping\": \"\"\r\n            }\r\n        },\r\n        \"QueryConfiguration\": {\r\n            \"RequiredFilters\": [\r\n                \"clientId\",\r\n                \"startDate\",\r\n                \"endDate\"\r\n            ],\r\n            \"Sort\": {\r\n                \"FieldName\": \"ActualTime\",\r\n                \"Type\": 2\r\n            }\r\n        }\r\n    }\r\n]","DashboardComponentType":{"Id":"6f649e62-be82-4af7-8d64-06b32cf6c0ea","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_Burn_Rate_Per_TypologyGroup/execute","Configuration":"{\n\"palette\":\"material\",\n  \"commonSeriesSettings\": {\n    \"argumentField\": \"TypologyGroup\"\n  },\n  \"series\": [\n    {\n      \"type\": \"bar\",\n      \"valueField\": \"ActualTime\",\n      \"name\": \"Actual Time\"\n    },\n    {\n      \"type\": \"area\",\n      \"valueField\": \"PlannedTime\",\n      \"name\": \"Planned Time\"\n    },\n    {\n      \"type\": \"scatter\",\n      \"valueField\": \"ContractedTime\",\n      \"name\": \"Contracted Time\",\n      \"point\": {\n   \"symbol\": \"triangleDown\",\n        \"color\":\"#a5bdd7\"\n      }\n    }\n  ],\n  \"size\": {\n    \"height\": 250\n  },\n  \"legend\": {\n    \"visible\": true,\n    \"orientation\":\"horizontal\",\n    \"verticalAlignment\":\"bottom\",\n    \"horizontalAlignment\":\"center\"\n  },\n  \"argumentAxis\": {\n    \"label\": {\n      \"overlappingBehavior\":\"stagger\",\n      \"customizeText\":\"function(t){return t.valueText.split(' - ')[0].substring(0,10)}\",\n      \"font\": {\n        \"size\": 8\n      }\n    }\n  }\n}","DashboardDefinitionId":"87eb5ca2-45b1-4887-a7e8-a35bf538d6ba"},{"Id":"b5dfadad-5370-45ab-b232-18f62e959140","Name":"Period","Active":true,"UseQuery":false,"Query":null,"Size":12,"Order":4,"Parameters":"[\r\n    {\r\n        \"WidgetSubTitle\": \"Actual Time - Select Months\",\r\n        \"WidgetType\": \"rangeSelector\",\r\n        \"WidgetFilterField\": \"\",\r\n        \"WidgetColor\": \"#e0e0e0\",\r\n        \"WidgetHeight\": \"\",\r\n        \"WidgetHeader\": {\r\n            \"showContextInfo\": false,\r\n            \"WidgetPeriodChooser\": {\r\n                \"startDate\": \"2018-06-01\",\r\n                \"endDate\": \"2019-12-31\",\r\n                \"type\": \"year\",\r\n                \"visible\": false\r\n            },\r\n            \"showSubTitle\": true,\r\n            \"showTitle\": true\r\n        },\r\n        \"WidgetDataSources\": {\r\n            \"main\": {\r\n                \"type\": \"queryText\",\r\n                \"value\": \"SELECT DATEADD(dd, -(DATEPART(dw, t.[Date])-2), t.[Date]) as WeekStart, t.[Year], t.[Month], Convert(int, CONCAT(t.[Year], DatePart(wk, t.[Date]))) as YearWeek, sum(t.ActualTime) as [Hours] FROM Analytics.Timesheet(@CurrentUserId) t WHERE 1 = 1 /*[DateFilter]*/ and [Year] >= Year(@FromDate) /*[/DateFilter]*/ GROUP BY DATEADD(dd, -(DATEPART(dw, t.[Date])-2), t.[Date]), t.[Year], t.[Month], Convert(int, CONCAT(t.[Year], DatePart(wk, t.[Date])))\",\r\n                \"mapping\": \"\"\r\n            }\r\n        },\r\n        \"QueryConfiguration\": {\r\n            \"RequiredFilters\": []\r\n        }\r\n    }\r\n]","DashboardComponentType":{"Id":"6f649e62-be82-4af7-8d64-06b32cf6c0ea","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_Time_Utilization_Hours_Per_YearWeek/execute","Configuration":"{\n \"margin\": {\n    \"top\": 0\n  },\n  \"size\": {\n    \"height\": 150\n  },\n  \"containerBackgroundColor\":\"#e0e0e0\",\n  \"selectedRangeColor\": \"#f5564a\",\n  \"chart\": {\n    \"commonSeriesSettings\": {\n      \"type\": \"line\",\n      \"argumentField\": \"WeekStart\"\n    },\n    \"series\": [\n      {\n        \"valueField\": \"Hours\"\n      }\n    ]\n  },\n  \"scale\": {\n    \"minorTickInterval\": \"month\",\n    \"tickInterval\": \"month\",\n    \"valueType\": \"datetime\"\n  },\n  \"sliderMarker\": {\n    \"format\": \"month\",\n    \"color\": \"#da5859\"\n  },\n  \"value\": [\n    \"2018/06/01\",\n    \"2018/06/30\"\n  ]\n}","DashboardDefinitionId":"87eb5ca2-45b1-4887-a7e8-a35bf538d6ba"},{"Id":"43d43e0b-0e5f-431c-8eca-88a15518b19b","Name":"Time per Project","Active":true,"UseQuery":false,"Query":null,"Size":8,"Order":2,"Parameters":"[\r\n    {\r\n        \"WidgetSubTitle\": \"Planned x Actual\",\r\n        \"WidgetType\": \"chart\",\r\n        \"WidgetFilterField\": \"\",\r\n        \"WidgetColor\": \"#efefef\",\r\n        \"WidgetHeight\": \"\",\r\n        \"WidgetHeader\": {\r\n            \"showContextInfo\": false,\r\n            \"WidgetPeriodChooser\": {\r\n                \"type\": \"year\",\r\n                \"visible\": false\r\n            },\r\n            \"WidgetMetrics\": {\r\n                \"visible\": true,\r\n                \"Metrics\": [\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"# Planned\",\r\n                        \"metricFieldValue\": \"PlannedTimeGrandTotal\"\r\n                    },\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"# Actual\",\r\n                        \"metricFieldValue\": \"ActualTimeGrandTotal\"\r\n                    }\r\n                ]\r\n            },\r\n            \"showSubTitle\": true,\r\n            \"showTitle\": true\r\n        },\r\n        \"WidgetDataSources\": {\r\n            \"main\": {\r\n                \"type\": \"queryText\",\r\n                \"value\": \" SELECT v.ProjectId, v.Project, sum(v.ActualTime) as ActualTime, sum(v.PlannedTime) as PlannedTime, sum(sum(v.ActualTime)) over () as ActualTimeGrandTotal, sum(sum(v.PlannedTime)) over () as PlannedTimeGrandTotal FROM ( SELECT t.ProjectId, t.Project, sum(t.ActualTime) as ActualTime, 0 as PlannedTime FROM Analytics.Timesheet(@CurrentUserId) t WHERE 1 = 1 /*[DateFilter]*/ and (DATEFROMPARTS(t.[Year], t.[Month], 1) between @FromDate and @ToDate) /*[/DateFilter]*/ /*[ClientFilter]*/ and t.ClientId = @ClientId /*[/ClientFilter]*/ GROUP BY t.ProjectId, t.Project UNION SELECT pht.ProjectId, pht.Project, 0 as ActualTime, sum(pht.[Hours]) as PlannedTime FROM Analytics.PlannedHoursTotal(@CurrentUserId) pht WHERE 1 = 1 /*[ClientFilter]*/ and pht.ClientId = @ClientId /*[/ClientFilter]*/ GROUP BY pht.ProjectId, pht.Project ) v GROUP BY v.ProjectId, v.Project\",\r\n                \"mapping\": \"\"\r\n            }\r\n        },\r\n        \"QueryConfiguration\": {\r\n            \"RequiredFilters\": [\r\n                \"clientId\",\r\n                \"startDate\",\r\n                \"endDate\"\r\n            ],\r\n            \"Sort\": {\r\n                \"FieldName\": \"ActualTime\",\r\n                \"Type\": 2\r\n            }\r\n        }\r\n    }\r\n]","DashboardComponentType":{"Id":"6f649e62-be82-4af7-8d64-06b32cf6c0ea","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_Burn_Rate_Per_Project/execute","Configuration":"{\n \"size\": {\n    \"height\": 250\n  },\n  \"commonSeriesSettings\": {\n    \"argumentField\": \"Project\",\n    \"ignoreEmptyPoints\": false\n  },\n  \"series\": [\n    {\n      \"type\": \"bar\",\n      \"valueField\": \"PlannedTime\",\n      \"name\": \"Planned\"\n    },\n    {\n      \"type\": \"bar\",\n      \"valueField\": \"ActualTime\",\n      \"name\": \"Actual\"\n    }\n  ],\n  \"legend\": {\n    \"rowCount\": 1,\n    \"verticalAlignment\": \"bottom\",\n    \"horizontalAlignment\": \"center\"\n  },\n  \"argumentAxis\": {\n    \"label\": {\n      \"overlappingBehavior\":\"stagger\",\n      \"customizeText\":\"function(t){return t.valueText.split(' - ')[0].substring(0,10)}\",\n      \"font\": {\n        \"size\": 8\n      }\n    }\n  }\n}","DashboardDefinitionId":"87eb5ca2-45b1-4887-a7e8-a35bf538d6ba"},{"Id":"19be7d36-0579-477f-8128-d42a5646cc48","Name":"Clients","Active":true,"UseQuery":false,"Query":null,"Size":12,"Order":1,"Parameters":"[\r\n    {\r\n        \"WidgetSubTitle\": \"All Clients\",\r\n        \"WidgetType\": \"grid\",\r\n        \"WidgetFilterField\": \"ClientId\",\r\n        \"WidgetColor\": \"\",\r\n        \"WidgetHeight\": \"\",\r\n        \"WidgetHeader\": {\r\n            \"showContextInfo\": false,\r\n            \"showPeriodChooser\": false,\r\n            \"WidgetMetrics\": {\r\n                \"visible\": true,\r\n                \"Metrics\": [\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"# Planned\",\r\n                        \"metricFieldValue\": \"PlannedTimeGrandTotal\"\r\n                    },\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"# Actual\",\r\n                        \"metricFieldValue\": \"ActualTimeGrandTotal\"\r\n                    },\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"# Revenue\",\r\n                        \"metricFieldValue\": \"PlannedSellGrandTotal\"\r\n                    },\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"# Cost\",\r\n                        \"metricFieldValue\": \"ActualCostGrandTotal\"\r\n                    }\r\n                ]\r\n            },\r\n            \"showSubTitle\": true,\r\n            \"showTitle\": true\r\n        },\r\n        \"WidgetDataSources\": {\r\n            \"main\": {\r\n                \"type\": \"queryText\",\r\n                \"value\": \"SELECT v.*, iif((v.PlannedSellGrandTotal - v.ActualCostGrandTotal) > 0, ((v.PlannedSell - v.ActualCost) / (v.PlannedSellGrandTotal - v.ActualCostGrandTotal)), 0) * 100.0 as PlannedProfitPercentage FROM ( SELECT v.ClientId, v.Client, sum(v.ActualTime) as ActualTime, sum(v.PlannedTime) as PlannedTime, sum(v.ContractedTime) as ContractedTime, sum(v.ActualCost) as ActualCost, sum(v.PlannedSell) as PlannedSell, max(v.ContractedRate) as ContractedRate, sum(sum(v.ActualTime)) over () as ActualTimeGrandTotal, sum(sum(v.PlannedTime)) over () as PlannedTimeGrandTotal, sum(sum(v.ActualCost)) over () as ActualCostGrandTotal, sum(sum(v.PlannedSell)) over () as PlannedSellGrandTotal FROM ( SELECT t.ClientId, cc.[Name] as Client, t.ActualTime, 0 as PlannedTime, 0 as ContractedTime, t.ActualCost, 0 as PlannedSell, 0 as ContractedRate FROM ( SELECT t.ClientId, sum(t.ActualTime) as ActualTime, 0 as PlannedTime, 0 as ContractedTime, sum(t.HoursCost) as ActualCost FROM Analytics.Timesheet(@CurrentUserId) t WHERE t.ClientId is not null /*[DateFilter]*/ and (DATEFROMPARTS(t.[Year], t.[Month], 1) between @FromDate and @ToDate) /*[/DateFilter]*/ GROUP BY t.ClientId ) t, CommercialClient cc WHERE cc.Oid = t.ClientId UNION SELECT pht.ClientId, pht.Client, 0 as ActualTime, sum(pht.[Hours]) as PlannedTime, sum(isnull(pht.ContractedHours, 0.0)) as ContractedTime, 0 as ActualCost, sum((pht.[Hours] * isnull(pht.[Rate], 0))) as PlannedSell, max(pht.Rate) as ContractedRate FROM Analytics.PlannedHoursTotal(@CurrentUserId) pht GROUP BY pht.ClientId, pht.Client ) v GROUP BY v.ClientId, v.Client ) v\",\r\n                \"mapping\": \"\"\r\n            }\r\n        },\r\n        \"QueryConfiguration\": {\r\n            \"RequiredFilters\": [\r\n                \"startDate\",\r\n                \"endDate\"\r\n            ],\r\n            \"Sort\": {\r\n                \"Type\": 1,\r\n                \"FieldName\": \"MonthYearNumber\"\r\n            }\r\n        }\r\n    }\r\n]","DashboardComponentType":{"Id":"6f649e62-be82-4af7-8d64-06b32cf6c0ea","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_Burn_Rate_Per_Client/execute","Configuration":"{\n\"palette\":\"material\",\n  \"selection\": {\n    \"mode\": \"single\"\n  },\n  \"filterRow\": {\n    \"visible\": true\n  },\n  \"height\": 250,\n  \"columnsAutoWidth\": true,\n  \"allowColumnResizing\": true,\n  \"columnResizingMode\": \"nextColumn\",\n  \"columnMinWidth\": 50,\n  \"filterPanel\": {\n    \"visible\": false\n  },\n  \"scrolling\": {\n    \"mode\": \"virtual\"\n  },\n  \"columns\": [\n    \"Client\",\n    {\n      \"dataField\": \"ActualTime\",\n      \"caption\": \"Actual\",\n      \"format\": \"#,##0.00\"\n    },\n    {\n      \"dataField\": \"ActualCost\",\n      \"caption\": \"Cost\",\n      \"format\": {\n        \"type\": \"currency\",\n        \"precision\": 2\n      }\n    },\n    {\n      \"dataField\": \"PlannedTime\",\n      \"caption\": \"Planned\",\n      \"format\": \"#,##0.00\"\n    },\n    {\n      \"dataField\": \"PlannedSell\",\n      \"caption\": \"Planned Revenue\",\n      \"format\": {\n        \"type\": \"currency\",\n        \"precision\": 2\n      }\n    },\n    {\n      \"dataField\": \"PlannedProfitPercentage\",\n      \"caption\": \"Profit %\",\n      \"dataType\":\"number\",\n\"format\":\"percent\"\n    },\n    {\n      \"dataField\": \"ContractedTime\",\n      \"caption\": \"Contracted\",\n      \"format\": \"#,##0.00\"\n    },\n    {\n      \"dataField\": \"ContractedRate\",\n      \"caption\": \"Rate\",\n      \"format\": {\n        \"type\": \"currency\",\n        \"precision\": 2\n      }\n    }\n  ],\n  \"summary\": {\n    \"totalItems\": [\n      {\n        \"column\": \"Project\",\n        \"summaryType\": \"count\"\n      },\n      {\n        \"column\": \"ActualTime\",\n        \"summaryType\": \"sum\",\n        \"valueFormat\": \"#,##0.00\",\n        \"displayFormat\": \"{0}\"\n      },\n  \r\n    {\n        \"column\": \"ActualCost\",\n        \"summaryType\": \"sum\",\n        \"valueFormat\": {\n          \"type\": \"currency\",\n          \"precision\": 2\n        },\n        \"displayFormat\": \"{0}\"\n      },\n      {\n        \"column\": \"PlannedTime\",\n        \"summaryType\": \"sum\",\n        \"valueFormat\": \"#,##0.00\",\n        \"displayFormat\": \"{0}\"\n      },\n      {\n        \"column\": \"PlannedSell\",\n        \"summaryType\": \"sum\",\n        \"valueFormat\": {\n          \"type\": \"currency\",\n          \"precision\": 2\n        },\n        \"displayFormat\": \"{0}\"\n      },\n      {\n        \"column\": \"ContractedTime\",\n        \"summaryType\": \"sum\",\n        \"valueFormat\": \"#,##0.00\",\n        \"displayFormat\": \"{0}\"\n      },\n      {\n        \"column\": \"ContractedRate\",\n        \"summaryType\": \"sum\",\n        \"valueFormat\": {\n          \"type\": \"currency\",\n          \"precision\": 2\n        },\n        \"displayFormat\": \"{0}\"\n      }\n    ]\n  }\n}","DashboardDefinitionId":"87eb5ca2-45b1-4887-a7e8-a35bf538d6ba"}]}