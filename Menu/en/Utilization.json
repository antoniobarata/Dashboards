{
  "DashboardDefinitionRoles": [],
  "Id": "e020a268-31ed-4247-ad86-ce7e1bf33351",
  "Name": "Utilization",
  "Active": true,
  "Location": 0,
  "DocumentId": "00000000-0000-0000-0000-000000000000",
  "DocumentName": "",
  "DocumentsConfiguration": "{\"type\":\"\",\"operations\":{\"read\":{\"endpoint\":\"\"},\"update\":{\"endpoint\":\"\",\"model\":{}},\"create\":{\"endpoint\":\"\",\"model\":{}},\"remove\":{\"endpoint\":\"\"}},\"layout\":{\"create\":{},\"read\":{}},\"customDocument\":{\"mainColor\":\"\",\"secondaryColor\":\"\",\"imageClass\":\"\",\"namePlural\":\"\",\"name\":\"\",\"systemNames\":\"\"},\"availableOptions\":{\"feed\":false,\"info\":true,\"files\":false,\"userfields\":false,\"dashboard\":false}}",
  "Templates": [],
  "DashboardDefinitionComponents": [
    {
      "Id": "fd1a0f6a-1385-4308-afca-4e2e0d39eb4c",
      "Name": "Utilization per User",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 6,
      "Order": 5,
      "Parameters": "[\r\n    {\r\n        \"WidgetSubTitle\": \"Client, Admin and Internal Time spent per User\",\r\n        \"WidgetType\": \"grid\",\r\n        \"WidgetFilterField\": \"\",\r\n        \"WidgetColor\": \"\",\r\n        \"WidgetHeight\": 0,\r\n        \"WidgetHeader\": {\r\n            \"showContextInfo\": false,\r\n            \"WidgetPeriodChooser\": {\r\n                \"type\": \"year\",\r\n                \"visible\": false\r\n            },\r\n            \"WidgetMetrics\": {\r\n                \"visible\": false,\r\n                \"Metrics\": [\r\n                    {\r\n                        \"visible\": false,\r\n                        \"metricName\": \"# Forecast\",\r\n                        \"metricFieldValue\": \"TimeGrandTotal\"\r\n                    },\r\n                    {\r\n                        \"visible\": false,\r\n                        \"metricName\": \"# Actual\",\r\n                        \"metricFieldValue\": \"UtilizationPercentGrandTotal\"\r\n                    }\r\n                ]\r\n            },\r\n            \"showSubTitle\": true,\r\n            \"showTitle\": true\r\n        },\r\n        \"WidgetDataSources\": {\r\n            \"main\": {\r\n                \"type\": \"querytext\",\r\n                \"value\": \"WITH UsersCapacity AS\\n(\\n\\tSELECT \\n\\t\\tu.Oid AS UserId,\\n\\t\\t(\\n\\t\\t\\t(\\n\\t\\t\\t\\t(\\n\\t\\t\\t\\t\\t(DATEDIFF(dd, @FromDate, @ToDate) + 1)\\n\\t\\t\\t\\t\\t-(DATEDIFF(wk, @FromDate, @ToDate) * 2)\\n\\t\\t\\t\\t\\t-(CASE WHEN DATENAME(dw, @FromDate) = 'Sunday' THEN 1 ELSE 0 END)\\n\\t\\t\\t\\t\\t-(CASE WHEN DATENAME(dw, @ToDate) = 'Saturday' THEN 1 ELSE 0 END)\\n\\t\\t\\t\\t) + 1 \\n\\t\\t\\t)\\n\\t\\t\\t-\\n\\t\\t\\t(\\n\\t\\t\\t\\t(SELECT COUNT(*) FROM Analytics.DatamartLeave dl WHERE dl.UserId = u.Oid AND dl.[Date] BETWEEN @FromDate AND @ToDate)\\n\\t\\t\\t\\t+\\n\\t\\t\\t\\t(SELECT COUNT(*) FROM Analytics.DatamartHoliday dh WHERE dh.UserId = u.Oid AND dh.[Date] BETWEEN @FromDate AND @ToDate)\\n\\t\\t\\t)\\n\\t\\t) * u.RequiredHours AS WorkingHours,\\n\\t\\t(SELECT ISNULL(SUM(dl.[Hours]), 0.0) FROM Analytics.DatamartLeave dl WHERE dl.UserId = u.Oid AND dl.[Date] BETWEEN @FromDate AND @ToDate) AS Leaves,\\n\\t\\t(SELECT ISNULL(SUM(dh.[Hours]), 0.0) FROM Analytics.DatamartHoliday dh WHERE dh.UserId = u.Oid AND dh.[Date] BETWEEN @FromDate AND @ToDate) as Holidays\\n\\tFROM\\n\\t\\t[User] u\\n\\tWHERE\\n\\t\\tu.Company = @CompanyId\\n),\\nUsersHours AS\\n(\\n\\tSELECT\\n\\t\\tdt.Department,\\n\\t\\tdt.UserTypologyGroup,\\t\\n\\t\\tdt.[UserId],\\n\\t\\tdt.[User],\\n\\t\\tSUM(dt.ActualTime) AS [Hours],\\n\\t\\tSUM(dt.AdministrativeTime) AS [AdministrativeHours],\\n\\t\\tSUM(ISNULL(dt.InternalWorkTime, 0.0)) AS [InternalWorkHours],\\n\\t\\tSUM(dt.NewBusinessTime) AS [NewBusinessHours],\\n\\t\\tSUM(dt.BillableTime) AS [BillableHours],\\n\\t\\tSUM(ISNULL(dt.BillableTime, 0.0) - ISNULL(dt.[InternalWorkTime], 0.0)) as [ClientHours],\\n\\t\\tSUM(ISNULL(dt.[ActualTime] - (dt.[AdministrativeTime] + dt.[NewBusinessTime] + dt.[BillableTime]), 0.0)) as [NonWorkedHours]\\n\\tFROM \\n\\t\\tAnalytics.Timesheet(@CurrentUserId) dt\\n\\tWHERE\\n\\t\\tdt.[Date] BETWEEN @FromDate AND @ToDate\\n\\t\\tAND dt.CompanyId = @CompanyId\\n\\tGROUP BY\\n\\t\\tdt.Department,\\n\\t\\tdt.UserTypologyGroup,\\t\\n\\t\\tdt.[UserId],\\n\\t\\tdt.[User]\\n)\\nSELECT \\n\\tuh.Department,\\n\\tuh.UserTypologyGroup,\\n\\tuh.[User],\\n\\tuh.UserId,\\n\\tuh.[Hours],\\n\\tuh.AdministrativeHours,\\n\\tuh.InternalWorkHours,\\n\\tuh.NewBusinessHours,\\n\\tuh.BillableHours,\\n\\tuh.ClientHours,\\n\\tuh.NonWorkedHours,\\n\\tuc.WorkingHours AS Capacity,\\n\\tuc.Leaves AS Leaves,\\n\\tIIF(uc.WorkingHours > 0, ISNULL(uh.[BillableHours], 0.0) / uc.WorkingHours, 1.0) as UtilizationPercentage,\\n\\tIIF(uc.WorkingHours > 0, ISNULL(uh.[NewBusinessHours], 0.0) / uc.WorkingHours, 1.0) as UtilizationNonBillablePercentage\\nFROM \\n\\tUsersHours uh,\\n\\tUsersCapacity uc\\nWHERE\\n\\tuh.UserId = uc.UserId\\n\"\r\n            }\r\n        },\r\n        \"Filters\": {},\r\n        \"QueryConfiguration\": {\r\n            \"RequiredFilters\": [\r\n                \"startDate\",\r\n                \"endDate\",\r\n                \"companyId\"\r\n            ]\r\n        }\r\n    }\r\n]",
      "DashboardComponentType": {
        "Id": "319d5cdf-9bca-4fec-b03f-d18df1d207ba",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/Analytics_Utilization_Per_Company_Department_User/execute",
      "Configuration": "{\n  \"headerFilter\": {\n    \"visible\": true\n  },\n  \"grouping\" : {\n    \"autoExpandAll\" : true\n  },\n  \"columnResizingMode\": \"widget\",\n  \"allowColumnResizing\": true,\n  \"allowFiltering\": true,\n  \"columnAutoWidth\": true,\n  \"searchPanel\": {\n    \"visible\": true\n  },\n  \"selection\": {\n    \"mode\": \"single\"\n  },\n\"onSelectionChanged\": \"function (selectedItems) {\n            var data = selectedItems.selectedRowsData[0];\n            if(data) {\n                SkillsWorkflow.setDashboardFilter('userId', data.UserId);\n          }\n  }\",\n  \"height\": 300,\n  \"scrolling\": {\n    \"mode\": \"virtual\"\n  },\n  \"columnMinWidth\": 80,\n  \"columns\": [\n    {\n      \"dataField\": \"Department\",\n      \"caption\": \"Department\",\n      \"width\": 120,\n      \"groupIndex\": 0\n    },\n    {\n      \"dataField\": \"UserTypologyGroup\",\n      \"name\": \"Typology Group\",\n      \"caption\": \"Typology\",\n      \"width\": 120\n    },\n    {\n      \"dataField\": \"User\",\n      \"name\": \"User\",\n      \"caption\": \"User\",\n      \"width\": 120\n    },\n    {\n      \"dataField\": \"UserId\",\n      \"name\": \"Picture\",\n      \"caption\": \"Picture\",\n      \"width\": 30,\n      \"alignment\": \"left\",\n      \"cellTemplate\": \"function(e, i) {\n        console.log(i.text);\n        console.log(i.data.User);\n        SK.showImage(e, 'user', 'small', i.text, i.data.User); }\"\n    },\n    {\n      \"dataField\": \"Capacity\",\n      \"caption\": \"Capacity\",\n      \"alignment\": \"right\",\n      \"format\": \"#,##0\"\n    },\n    {\n      \"dataField\": \"Leaves\",\n      \"caption\": \"Leaves\",\n      \"alignment\": \"right\",\n      \"format\": \"#,##0\"\n    },\n    {\n      \"dataField\": \"NewBusinessHours\",\n      \"caption\": \"Non-Billable\",\n      \"name\": \"NonBillable\",\n      \"alignment\": \"right\",\n      \"format\": \"#,##0\"\n    },\n    {\n      \"dataField\": \"AdministrativeHours\",\n      \"caption\": \"Admin\",\n      \"name\": \"Admin\",\n      \"alignment\": \"right\",\n      \"format\": \"#,##0\"\n    },\n    {\n      \"dataField\": \"BillableHours\",\n      \"caption\": \"Billable\",\n      \"alignment\": \"right\",\n      \"format\": \"#,##0\"\n    },\n    {\n      \"caption\": \"Utilization\",\n              \"alignment\": \"center\",\n              \"columns\": [\n            {\n              \"dataField\": \"UtilizationNonBillablePercentage\",\n              \"caption\": \"Non Billable %\",\n              \"name\": \"UtilizationNonBillable\",\n              \"alignment\": \"right\",\n              \"format\": \"#,##0\",\n              \"cellTemplate\": \"function(e, i) {\n                  SkillsWorkflow.setRAG(e, (i.value * 100.0).toFixed(1) + '%', i.value >= 1.2, i.value < 0.8, (i.value >= 0.8 && i.value < 1.2), true);\n            }\n              \"\n          },\n          {\n            \"dataField\": \"UtilizationPercentage\",\n            \"caption\": \"Billable %\",\n            \"name\": \"Utilization\",\n            \"alignment\": \"right\",\n            \"format\": \"#,##0\",\n            \"cellTemplate\": \"function(e, i) {\n                  SkillsWorkflow.setRAG(e, (i.value * 100.0).toFixed(1) + '%', i.value >= 1.2, i.value < 0.8, (i.value >= 0.8 && i.value < 1.2), true);\n          }\n              \"\n        }\n      ]\n    }\n  ],\n  \"sortByGroupSummaryInfo\": [\n    {\n      \"summaryItem\": \"count\"\n    }\n  ],\n  \"summary\": {\n    \"totalItems\": [\n      {\n        \"column\": \"Capacity\",\n        \"summaryType\": \"sum\",\n        \"valueFormat\": \"#,##0\",\n        \"displayFormat\": \"{0}\",\n        \"alignment\": \"right\"\n      },\n      {\n        \"column\": \"Leaves\",\n        \"summaryType\": \"sum\",\n        \"valueFormat\": \"#,##0\",\n        \"displayFormat\": \"{0}\",\n        \"alignment\": \"right\"\n      }\n    ]\n  }\n}",
      "DashboardDefinitionId": "e020a268-31ed-4247-ad86-ce7e1bf33351"
    },
    {
      "Id": "1127f26e-b09c-4f84-993d-4efce6fd7d92",
      "Name": "User Projects",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 6,
      "Order": 6,
      "Parameters": "[{\"WidgetSubTitle\":\"Different Projects the User was or is involved in\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetHeight\":0,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[{\"visible\":false,\"metricName\":\"# Forecast\",\"metricFieldValue\":\"TimeGrandTotal\"},{\"visible\":false,\"metricName\":\"# Actual\",\"metricFieldValue\":\"UtilizationPercentGrandTotal\"}]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"WITH UsersCapacity AS\\n(\\n\\tSELECT \\n\\t\\tu.Oid AS UserId,\\n\\t\\t(\\n\\t\\t\\t(\\n\\t\\t\\t\\t(\\n\\t\\t\\t\\t\\t(DATEDIFF(dd, @FromDate, @ToDate) + 1)\\n\\t\\t\\t\\t\\t-(DATEDIFF(wk, @FromDate, @ToDate) * 2)\\n\\t\\t\\t\\t\\t-(CASE WHEN DATENAME(dw, @FromDate) = 'Sunday' THEN 1 ELSE 0 END)\\n\\t\\t\\t\\t\\t-(CASE WHEN DATENAME(dw, @ToDate) = 'Saturday' THEN 1 ELSE 0 END)\\n\\t\\t\\t\\t) + 1 \\n\\t\\t\\t)\\n\\t\\t\\t-\\n\\t\\t\\t(\\n\\t\\t\\t\\t(SELECT COUNT(*) FROM Analytics.DatamartLeave dl WHERE dl.UserId = u.Oid AND dl.[Date] BETWEEN @FromDate AND @ToDate)\\n\\t\\t\\t\\t+\\n\\t\\t\\t\\t(SELECT COUNT(*) FROM Analytics.DatamartHoliday dh WHERE dh.UserId = u.Oid AND dh.[Date] BETWEEN @FromDate AND @ToDate)\\n\\t\\t\\t)\\n\\t\\t) * u.RequiredHours AS WorkingHours,\\n\\t\\t(SELECT ISNULL(SUM(dl.[Hours]), 0.0) FROM Analytics.DatamartLeave dl WHERE dl.UserId = u.Oid AND dl.[Date] BETWEEN @FromDate AND @ToDate) AS Leaves,\\n\\t\\t(SELECT ISNULL(SUM(dh.[Hours]), 0.0) FROM Analytics.DatamartHoliday dh WHERE dh.UserId = u.Oid AND dh.[Date] BETWEEN @FromDate AND @ToDate) as Holidays\\n\\tFROM\\n\\t\\t[User] u\\n\\tWHERE\\n\\t\\tu.Oid = @UserId\\n),\\nUsersHours AS\\n(\\n\\tSELECT\\n\\t\\tdt.ClientGroup,\\n\\t\\tdt.Client,\\n\\t\\tdt.[UserId],\\n\\t\\tdt.[User],\\n\\t\\tdt.ProjectClassificationName,\\n\\t\\tdt.ProjectTypeName,\\n\\t\\tSUM(dt.ActualTime) AS [Hours],\\n\\t\\tSUM(dt.AdministrativeTime) AS [AdministrativeHours],\\n\\t\\tSUM(ISNULL(dt.InternalWorkTime, 0.0)) AS [InternalWorkHours],\\n\\t\\tSUM(dt.NewBusinessTime) AS [NewBusinessHours],\\n\\t\\tSUM(dt.BillableTime) AS [BillableHours],\\n\\t\\tSUM(ISNULL(dt.BillableTime, 0.0) - ISNULL(dt.[InternalWorkTime], 0.0)) as [ClientHours],\\n\\t\\tSUM(ISNULL(dt.[ActualTime] - (dt.[AdministrativeTime] + dt.[NewBusinessTime] + dt.[BillableTime]), 0.0)) as [NonWorkedHours]\\n\\tFROM \\n\\t\\tAnalytics.Timesheet(@CurrentUserId) dt\\n\\tWHERE\\n\\t\\tdt.[Date] BETWEEN @FromDate AND @ToDate\\n\\t\\tAND dt.UserId = @UserId\\n\\tGROUP BY\\n\\t\\tdt.ClientGroup,\\n\\t\\tdt.Client,\\n\\t\\tdt.[UserId],\\n\\t\\tdt.[User],\\n\\t\\tdt.ProjectClassificationName,\\n\\t\\tdt.ProjectTypeName\\n)\\nSELECT \\n\\tuh.ClientGroup,\\n\\tuh.Client,\\n\\tuh.[User],\\n\\tuh.ProjectClassificationName,\\n\\tuh.ProjectTypeName,\\n\\tuh.[Hours],\\n\\tuh.AdministrativeHours,\\n\\tuh.InternalWorkHours,\\n\\tuh.NewBusinessHours,\\n\\tuh.BillableHours,\\n\\tuh.ClientHours,\\n\\tuh.NonWorkedHours,\\n\\tuc.WorkingHours AS Capacity,\\n\\tuc.Leaves AS Leaves,\\n\\tIIF(uc.WorkingHours > 0, ISNULL(uh.[BillableHours], 0.0) / uc.WorkingHours, 1.0) as UtilizationPercentage,\\n\\tIIF(uc.WorkingHours > 0, ISNULL(uh.[NewBusinessHours], 0.0) / uc.WorkingHours, 1.0) as UtilizationNonBillablePercentage\\nFROM \\n\\tUsersHours uh,\\n\\tUsersCapacity uc\\nWHERE\\n\\tuh.UserId = uc.UserId\\n\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[\"startDate\",\"endDate\",\"userId\"]}}]",
      "DashboardComponentType": {
        "Id": "319d5cdf-9bca-4fec-b03f-d18df1d207ba",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/Analytics_Utilization_Per_Company_Department_User/execute",
      "Configuration": "{\n  \"headerFilter\": {\n    \"visible\": true\n  },\n  \"columnResizingMode\": \"widget\",\n  \"allowColumnResizing\": true,\n  \"allowFiltering\": true,\n  \"columnAutoWidth\": true,\n  \"grouping\": {\n    \"autoExpandAll\": true\n  },\n  \"searchPanel\": {\n    \"visible\": true\n  },\n  \"height\": 300,\n  \"scrolling\": {\n    \"mode\": \"virtual\"\n  },\n  \"selection\": {\n    \"mode\": \"none\"\n  },\n  \"columnMinWidth\": 80,\n  \"columns\": [\n    {\n      \"dataField\": \"Client\",\n      \"caption\": \"Client\",\n      \"width\": 120\n    },\n    {\n      \"dataField\": \"ProjectClassificationName\",\n      \"name\": \"ProjectClassificationName\",\n      \"caption\": \"Classification\",\n      \"width\": 120\n    },\n    {\n      \"dataField\": \"ProjectTypeName\",\n      \"name\": \"ProjectTypeName\",\n      \"caption\": \"Type\",\n      \"width\": 120,\n      \"groupIndex\": 0\n    },\n    {\n      \"dataField\": \"ClientHours\",\n      \"caption\": \"Client \",\n      \"name\": \"ClientHours\",\n      \"alignment\": \"right\",\n      \"format\": \"#,##0\"\n    },\n    {\n      \"dataField\": \"NewBusinessHours\",\n      \"caption\": \"Non-Billable\",\n      \"name\": \"NonBillable\",\n      \"alignment\": \"right\",\n      \"format\": \"#,##0\"\n    },\n    {\n      \"dataField\": \"BillableHours\",\n      \"caption\": \"Billable\",\n      \"alignment\": \"right\",\n      \"format\": \"#,##0\"\n    },\n    {\n      \"caption\": \"Utilization\",\n      \"alignment\": \"center\",\n      \"columns\": [\n        {\n          \"dataField\": \"UtilizationPercentage\",\n          \"caption\": \"Billable %\",\n          \"name\": \"Utilization\",\n          \"alignment\": \"right\",\n          \"format\": \"#,##0\",\n          \"cellTemplate\": \"function(e, i) {\n          SK.setRAG(e, (i.value * 100.0).toFixed(1), i.value >= 1.2, i.value < 0.8, (i.value >= 0.8 && i.value < 1.2), true);\n        }\n      \"\n      },\n      {\n        \"dataField\": \"UtilizationNonBillablePercentage\",\n        \"caption\": \"Non Billable %\",\n        \"name\": \"UtilizationNonBillable\",\n        \"alignment\": \"right\",\n        \"format\": \"#,##0\",\n        \"cellTemplate\": \"function(e, i) {\n          SK.setRAG(e, (i.value * 100.0).toFixed(1), i.value >= 1.2, i.value < 0.8, (i.value >= 0.8 && i.value < 1.2), true);\n      }\n      \"\n    }\n  ]\n}\n],\n\"sortByGroupSummaryInfo\": [\n{\n  \"summaryItem\": \"count\"\n}\n],\n\"summary\": {\n\"totalItems\": [\n  {\n    \"column\": \"Capacity\",\n    \"summaryType\": \"sum\",\n    \"valueFormat\": \"#,##0\",\n    \"displayFormat\": \"{0}\",\n    \"alignment\": \"right\"\n  },\n  {\n    \"column\": \"Leaves\",\n    \"summaryType\": \"sum\",\n    \"valueFormat\": \"#,##0\",\n    \"displayFormat\": \"{0}\",\n    \"alignment\": \"right\"\n  }\n]\n}\n}",
      "DashboardDefinitionId": "e020a268-31ed-4247-ad86-ce7e1bf33351"
    },
    {
      "Id": "9840f462-598a-4c1c-99e5-93beae43ddb8",
      "Name": "Utilization per Project Type ",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 6,
      "Order": 4,
      "Parameters": "[{\"WidgetSubTitle\":\"Time spent on the different Project Types\",\"WidgetType\":\"chart\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#dddddd\",\"WidgetHeight\":0,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[{\"visible\":true,\"metricName\":\"# Planned\",\"metricFieldValue\":\"PlannedTimeGrandTotal\"}]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"\\t\\tSELECT\\t\\r\\n\\t\\t\\tv.ProjectTypeName,\\r\\n\\t\\t\\t(v.[Hours] / IIF(v.[TotalHours] > 0, v.[TotalHours], 1.0)) as UtilizationPercentage\\r\\n\\t\\tFROM\\t\\r\\n\\t\\t(\\r\\n\\t\\t\\tSELECT\\r\\n\\t\\t\\t\\tv.ProjectTypeName,\\t\\r\\n\\t\\t\\t\\tSUM(v.ActualTime) as [Hours],\\r\\n\\t\\t\\t\\tSUM(SUM(v.ActualTime)) OVER () as [TotalHours]\\r\\n\\t\\t\\tFROM\\r\\n\\t\\t\\t\\tAnalytics.Timesheet(@CurrentUserId) v\\r\\n\\t\\t\\tWHERE\\t\\r\\n\\t\\t\\t\\t(1 = 1)\\r\\n\\t\\t\\t\\t/*[DateFilter]*/ AND v.[Date] between @FromDate and @ToDate  /*[/DateFilter]*/\\r\\n\\t\\t\\t\\tAND v.CompanyId = @CompanyId\\r\\n\\t\\t\\tGROUP BY\\r\\n\\t\\t\\t\\tv.ProjectTypeName\\r\\n\\t\\t) v\\r\\n\",\"mapping\":\"\"}},\"QueryConfiguration\":{\"RequiredFilters\":[\"startDate\",\"endDate\",\"companyId\"]}}]",
      "DashboardComponentType": {
        "Id": "319d5cdf-9bca-4fec-b03f-d18df1d207ba",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/Analytics_Utilization_Totals/execute",
      "Configuration": "{\n  \"commonSeriesSettings\": {\n    \"type\": \"bar\",\n    \"ignoreEmptyPoints\": true,\n    \"cornerRadius\": \"2px\",\n    \"label\": {\n      \"visible\": true,\n      \"showForZeroValues\": false,\n      \"format\": \"percent\"\n    },\n    \"argumentField\": \"ProjectTypeName\",\n    \"valueField\": \"UtilizationPercentage\"\n  },\n  \"size\": {\n    \"height\": 150\n  },\n  \"tooltip\": {\n    \"format\": \"percent\"\n  },\n  \"argumentAxis\": {\n    \"label\": {\n      \"font\": {\n        \"size\": 8\n      }\n    }\n  },\n  \"valueAxis\": {\n    \"label\": {\n      \"format\": \"percent\"\n    }\n  },\n  \"series\": [\n    {\n      \"label\": {\n        \"visible\": false,\n        \"format\": \"percent\"\n      }\n    }\n  ],\n  \"seriesTemplate\": {\n    \"nameField\": \"ProjectTypeName\"\n  },\n  \"legend\": {\n    \"visible\": false,\n    \"horizontalAlignment\": \"left\",\n    \"verticalAlignment\": \"middle\",\n    \"itemTextPosition\": \"right\",\n    \"paddingLeftRight\": 0,\n    \"font\": {\n      \"size\": 8\n    }\n  },\n  \"resolveLabelOverlapping\": \"shift\"\n}",
      "DashboardDefinitionId": "e020a268-31ed-4247-ad86-ce7e1bf33351"
    },
    {
      "Id": "73112481-dab7-4854-ba9f-b3640469062c",
      "Name": "Company and Client Group",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 4,
      "Order": 0,
      "Parameters": "[{\"WidgetSubTitle\":\"Choose a Company or Client Group\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":0,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[{\"visible\":false,\"metricName\":\"# Forecast\",\"metricFieldValue\":\"TimeGrandTotal\"},{\"visible\":false,\"metricName\":\"# Actual\",\"metricFieldValue\":\"UtilizationPercentGrandTotal\"}]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"SELECT 1;\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[\"startDate\",\"endDate\"]}}]",
      "DashboardComponentType": {
        "Id": "319d5cdf-9bca-4fec-b03f-d18df1d207ba",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/Analytics_Utilization_Per_Company_Department_User/execute",
      "Configuration": "{\n  \"colCount\": 1,\n  \"formData\": {\n    \"company\": \"Company\",\n    \"clientGroup\": \"Client Group\"\n  },\n  \"dataSource\": {\n    \"company\": \"Company\",\n    \"clientGroup\": \"Client Group\"\n  },\n  \"items\": [\n    {\n      \"name\": \"Company\",\n      \"dataField\": \"company\",\n      \"editorType\": \"dxSelectBox\",\n      \"editorOptions\": {\n        \"searchEnabled\": true,\n        \"dataSource\": {\n                    \"load\": \"function(loadOptions){ var query = 'SELECT c.Oid as Id, c.[Name] FROM Company c ORDER BY c.[Name]'; return SK.executeAPI('POST', 'analytics/query/execute', null, {'query': query, 'parameters': {}}).then(function(res){ return res.Data; }); }\",\n                              \"byKey\": \"function(key) { console.log('byKey'); }\"\n        },\n        \"value\": \"\",\n        \"onValueChanged\": \"function(e){ console.log('Value:' + e.value); if(e.value != null) { SK.setDashboardFilter('companyId', e.value); } }\",\n        \"valueExpr\": \"Id\",\n        \"displayExpr\": \"Name\"\n      },\n      \"noDataText\": \"Please wait...\"\n    },\n    {\n      \"name\": \"Client Group\",\n      \"dataField\": \"clientGroup\",\n      \"editorType\": \"dxSelectBox\",\n      \"editorOptions\": {\n        \"searchEnabled\": true,\n        \"minSearchLength\": 0,\n        \"dataSource\": {\n          \"load\": \"function(loadOptions){ var query = 'SELECT cg.Oid as Id, cg.[Name] FROM CLientGroup cg ORDER BY cg.[Name]'; return SK.executeAPI('POST', 'analytics/query/execute', null, {'query': query, 'parameters': {}}).then(function(res){ return res.Data; }); }\",\n          \"byKey\": \"function(key) { console.log('byKey'); }\"\n        },\n        \"value\": \"\",\n        \"onValueChanged\": \"function(e){ console.log('Value:' + e.value); if(e.value != null) { SK.setDashboardFilter('clientGroupId', e.value); } }\",\n        \"valueExpr\": \"Id\",\n        \"displayExpr\": \"Name\"\n      },\n      \"noDataText\": \"Please wait...\"\n    }\n  ],\n  \"height\": 72\n}",
      "DashboardDefinitionId": "e020a268-31ed-4247-ad86-ce7e1bf33351"
    },
    {
      "Id": "e8a76b0d-9200-440a-95df-bad4ff4e7a06",
      "Name": "Period Selector",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 8,
      "Order": 2,
      "Parameters": "[{\"WidgetSubTitle\":\"Closed and In Progress Tickets\",\"WidgetType\":\"rangeselector\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":\"\",\"WidgetHeader\":{\"WidgetPeriodChooser\":{\"startDate\":\"2019-01-01\",\"endDate\":\"2019-12-31\",\"type\":\"year\",\"visible\":false},\"showSubTitle\":false,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"queryText\",\"value\":\"SELECT\\r\\n\\tSUM(v.[Hours]) as [Hours],\\r\\n\\tv.[Month]\\r\\nFROM\\r\\n(\\r\\n\\tSELECT \\r\\n\\t\\tSUM(v.ActualTime) as [Hours],\\r\\n\\t\\tDATEFROMPARTS(v.[Year], v.[Month], 1) as [Month]\\r\\n\\tFROM\\r\\n\\t\\tAnalytics.Timesheet(@CurrentUserId) v\\r\\n\\tWHERE\\t\\r\\n\\t\\tv.[Date] between DateAdd(mm, -12, getdate()) and getdate()\\r\\n\\tGROUP BY\\r\\n\\t\\tDATEFROMPARTS(v.[Year], v.[Month], 1)\\r\\n\\tUNION ALL\\r\\n\\tSELECT \\r\\n\\t\\tSUM(v.[Hours]) as [Hours],\\r\\n\\t\\tDATEFROMPARTS(v.[Year], v.[Month], 1) as [Month]\\r\\n\\tFROM\\r\\n\\t\\tAnalytics.Leave(@CurrentUserId) v\\r\\n\\tWHERE\\t\\r\\n\\t\\tv.[Date] between DateAdd(mm, -12, getdate()) and getdate()\\r\\n\\tGROUP BY\\r\\n\\t\\tDATEFROMPARTS(v.[Year], v.[Month], 1)\\r\\n\\tUNION ALL\\r\\n\\tSELECT \\r\\n\\t\\tSUM(v.[Hours]) as [Hours],\\r\\n\\t\\tDATEFROMPARTS(v.[Year], v.[Month], 1) as [Month]\\r\\n\\tFROM\\r\\n\\t\\tAnalytics.Holiday(@CurrentUserId) v\\r\\n\\tWHERE\\t\\r\\n\\t\\tv.[Date] between DateAdd(mm, -12, getdate()) and getdate()\\r\\n\\tGROUP BY\\r\\n\\t\\tDATEFROMPARTS(v.[Year], v.[Month], 1)\\r\\n) v\\r\\nGROUP BY\\r\\n\\tv.[Month]\\r\\n\",\"mapping\":\"\"}},\"QueryConfiguration\":{}}]",
      "DashboardComponentType": {
        "Id": "319d5cdf-9bca-4fec-b03f-d18df1d207ba",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/Analytics_Utilization_Range_Selector/execute",
      "Configuration": "{\n  \n \"size\": {\n  \"height\": 100\n},\n  \"containerBackgroundColor\":\"#e0e0e0\",\n  \"selectedRangeColor\": \"#f5564a\",\n  \"chart\": {\n    \"commonSeriesSettings\": {\n      \"type\": \"steparea\",\n      \"argumentField\": \"Month\"\n    },\n    \"series\": [\n      {\n        \"valueField\": \"Hours\"\n      }\n    ]\n  },\n  \"scale\": {\n    \"minorTickInterval\": \"month\",\n    \"tickInterval\": \"month\",\n    \"valueType\": \"datetime\"\n  },\n  \"sliderMarker\": {\n    \"format\": \"monthAndDay\",\n    \"color\": \"#da5859\"\n  },\n  \"value\": {\n    \"startValue\": \"2019-01-01\",\n    \"endValue\": \"2019-02-01\",\n    \"length\": {\n      \"months\": 1\n    }\n  }\n}",
      "DashboardDefinitionId": "e020a268-31ed-4247-ad86-ce7e1bf33351"
    },
    {
      "Id": "739090d2-3d2b-43fd-97ce-ff9f289e941f",
      "Name": "Utilization per Client  ",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 6,
      "Order": 3,
      "Parameters": "[{\"WidgetSubTitle\":\"Time spent on Clients per Company\",\"WidgetType\":\"chart\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#dddddd\",\"WidgetHeight\":0,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[{\"visible\":true,\"metricName\":\"# Planned\",\"metricFieldValue\":\"PlannedTimeGrandTotal\"}]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"\\t\\tSELECT\\t\\r\\n\\t\\t\\tv.Client,\\r\\n\\t\\t\\t(v.[Hours] / IIF(v.[TotalHours] > 0, v.[TotalHours], 1.0)) as UtilizationPercentage\\r\\n\\t\\tFROM\\t\\r\\n\\t\\t(\\r\\n\\t\\t\\tSELECT\\r\\n\\t\\t\\t\\tv.Client,\\t\\r\\n\\t\\t\\t\\tSUM(v.ActualTime) as [Hours],\\r\\n\\t\\t\\t\\tSUM(SUM(v.ActualTime)) OVER () as [TotalHours]\\r\\n\\t\\t\\tFROM\\r\\n\\t\\t\\t\\tAnalytics.Timesheet(@CurrentUserId) v\\r\\n\\t\\t\\tWHERE\\t\\r\\n\\t\\t\\t\\tv.CompanyId = @CompanyId\\r\\n\\t\\t\\t\\t/*[DateFilter]*/ AND v.[Date] between @FromDate and @ToDate  /*[/DateFilter]*/\\r\\n\\t\\t\\tGROUP BY\\r\\n\\t\\t\\t\\tv.Client\\r\\n\\t\\t) v\\r\\n\\t\\torder by (v.[Hours] / IIF(v.[TotalHours] > 0, v.[TotalHours], 1.0)) desc\\r\\n\",\"mapping\":\"\"}},\"QueryConfiguration\":{\"RequiredFilters\":[\"startDate\",\"endDate\",\"companyId\"]}}]",
      "DashboardComponentType": {
        "Id": "319d5cdf-9bca-4fec-b03f-d18df1d207ba",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/Analytics_Utilization_Totals/execute",
      "Configuration": "{\n  \"commonSeriesSettings\": {\n    \"type\": \"bar\",\n    \"ignoreEmptyPoints\": true,\n    \"cornerRadius\": \"2px\",\n    \"label\": {\n      \"visible\": true,\n      \"showForZeroValues\": false,\n      \"format\": \"percent\"\n    }\n  },\n  \"size\": {\n    \"height\": 150\n  },\n  \"tooltip\": {\n    \"format\": \"percent\"\n  },\n  \"argumentAxis\": {\n    \"label\": {\n      \"font\": {\n        \"size\": 8\n      }\n    }\n  },\n  \"valueAxis\": {\n    \"label\": {\n      \"format\": \"percent\"\n    }\n  },\n  \"series\": [\n    {\n      \"name\":\"Client\",\n      \"argumentField\": \"Client\",\n      \"valueField\": \"UtilizationPercentage\",\n      \"label\": {\n        \"visible\": false,\n        \"format\": \"percent\"\n      }\n    }\n  ],\n  \"legend\": {\n    \"visible\": false,\n    \"horizontalAlignment\": \"left\",\n    \"verticalAlignment\": \"middle\",\n    \"itemTextPosition\": \"right\",\n    \"paddingLeftRight\": 0,\n    \"font\": {\n      \"size\": 8\n    }\n  },\n  \"resolveLabelOverlapping\": \"shift\",\n  \"dataPrepareSettings\": {\n    \"sortingMethod\": false\n  }\n}",
      "DashboardDefinitionId": "e020a268-31ed-4247-ad86-ce7e1bf33351"
    }
  ]
}