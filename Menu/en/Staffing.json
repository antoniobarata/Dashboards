{"DashboardDefinitionRoles":[],"Id":"0cfed20e-524f-4bb9-b2d5-7eb4b76199a9","Name":"Staffing Dashboard","Active":true,"Location":0,"DocumentId":"00000000-0000-0000-0000-000000000000","DocumentName":"","DocumentsConfiguration":"{\"type\":\"\",\"operations\":{\"read\":{\"endpoint\":\"\"},\"update\":{\"endpoint\":\"\",\"model\":{}},\"create\":{\"endpoint\":\"\",\"model\":{}},\"patch\":{\"endpoint\":\"\",\"patchModel\":[{\"model\":\"\",\"translation\":\"\",\"type\":\"\"}]},\"remove\":{\"endpoint\":\"\"},\"lookup\":{\"endpoint\":\"\"}},\"layout\":{\"create\":{},\"read\":{}},\"customDocument\":{\"useCustomStyle\":false,\"mainColor\":\"\",\"secondaryColor\":\"\",\"imageClass\":\"\",\"namePlural\":\"\",\"name\":\"\",\"systemName\":\"\"},\"availableOptions\":{\"feed\":false,\"info\":true,\"files\":false,\"userfields\":false,\"dashboard\":false}}","Templates":[],"DashboardDefinitionComponents":[{"Id":"bba0d13b-cc02-4b6d-ba21-234316e1429e","Name":"Company and Client Group","Active":true,"UseQuery":false,"Query":null,"Size":4,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"Choose a Company or Client Group\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":20,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"SELECT 1;\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_Utilization_Per_Company_Department_User/execute","Configuration":"{\n  \"colCount\": 1,\n  \"items\": [\n    {\n      \"dataField\": \"CompanyId\",\n      \"label\": {\n        \"text\": \"Company\"\n      },\n      \"validationRules\": [\n        {\n          \"type\": \"required\"\n        }\n      ],\n      \"editorType\": \"dxSelectBox\",\n      \"editorOptions\": {\n        \"width\": 250,\n        \"searchEnabled\": true,\n        \"dataSource\": {\n          \"load\": \"function(loadOptions){ \n                            var searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : ''); \n                            var searchTake = (loadOptions.searchValue != null && loadOptions.searchValue != '' ? 10 : 100); \n                            return SkillsWorkflow.executeAPI('GET', 'companies/lookup', null, {})\n          }\",\n          \"byKey\": \"function(key) { return SW.executeAPI('GET','companies/'+key+'/lookup',null,{}).then( result =>  { return Promise.resolve(result);}) }\"\n      },\n      \"displayExpr\": \"Name\",\n      \"valueExpr\": \"Id\",\n      \"onValueChanged\": \"function(e){ SkillsWorkflow.setDashboardFilter('CompanyOid', e.value);}\"\n    }\n  },\n  {\n    \"name\": \"Client Group\",\n    \"label\": {\n      \"text\": \"Client Group\"\n    },\n    \"editorType\": \"dxSelectBox\",\n    \"editorOptions\": {\n      \"width\": 250,\n      \"searchEnabled\": true,\n      \"minSearchLength\": 0,\n      \"dataSource\": {\n          \"load\": \"function(loadOptions){ \n                            var searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : ''); \n                            var searchTake = (loadOptions.searchValue != null && loadOptions.searchValue != '' ? 10 : 100); \n                            return SkillsWorkflow.executeAPI('GET', 'clientgroups/lookup', null, {})\n          }\",\n          \"byKey\": \"function(key) { return SW.executeAPI('GET','clientgroups/'+key+'/lookup',null,{}).then( result =>  { return Promise.resolve(result);}) }\"\n      },\n      \"onInitialized\": \"function(e) { SkillsWorkflow.setDashboardFilter('ClientGroupOid', '00000000-0000-0000-0000-000000000000'); }\",\n      \"value\": \"\",\n      \"onValueChanged\": \"function(e){ if(e.value != null) { SW.setDashboardFilter('ClientGroupOid', e.value); } }\",\n      \"valueExpr\": \"Id\",\n      \"displayExpr\": \"Name\"\n    },\n    \"noDataText\": \"Please wait...\"\n  }\n],\n\"height\": 72\n}","DashboardDefinitionId":"0cfed20e-524f-4bb9-b2d5-7eb4b76199a9"},{"Id":"21262ee0-0590-4097-b97c-530926e577bc","Name":"Deliverables Staffing","Active":true,"UseQuery":false,"Query":null,"Size":12,"Order":4,"Parameters":"[{\"WidgetSubTitle\":\"Hours and Fee per Typology Group\",\"WidgetType\":\"pivotgrid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":500,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"WITH Roles AS\\n(\\n\\tSELECT\\n\\t\\t\\tdistinct u.Users as UserId, cast(r.Oid as uniqueidentifier) RoleParentId,\\n\\t\\t\\tr.Oid RoleId, r.name as RoleName\\n    FROM\\n            SecuritySystemRole r\\n            join SecuritySystemRoleParentRoles_SecuritySystemRoleChildRoles n on (n.ParentRoles = r.Oid)\\n            join SecuritySystemUserUsers_SecuritySystemRoleRoles u on (n.ParentRoles = u.Roles)\\n    WHERE\\n            r.GCRecord is null\\n            and r.Oid not in (select childRoles from SecuritySystemRoleParentRoles_SecuritySystemRoleChildRoles)\\n            and r.Name <> 'Base' and r.Name <> 'MaintenanceBase'\\n    UNION all\\n    SELECT\\n            n.UserId,\\n            r.RoleParentId,\\n            r.RoleId, r.RoleName\\n    FROM (\\n\\t\\tSELECT\\n\\t\\t\\t\\tl.parentRoles RoleParentId, r.oid RoleId, r.name RoleName\\n        FROM\\n                SecuritySystemRole r join SecuritySystemRoleParentRoles_SecuritySystemRoleChildRoles l on (l.ChildRoles = r.oid)\\n        WHERE\\n                r.GCRecord is null and r.Name <> 'Base' and r.Name <> 'MaintenanceBase'\\n    ) r, Roles n\\n    WHERE\\n\\t\\t\\tn.RoleId = r.RoleParentId\\n),\\nGridData as (\\nselect  concat(eit.[Order], '. ', eit.[Description]) as Deliverable,\\n        art.[Name] as [Service],\\n        utg.[Name] as TypologyGroup,\\n        usr.[Name] as [User],\\n        dep.[Name] as Department,\\n        edt.[Hours] as ContractedTime,\\n\\t\\tcc.[ClientGroup] as ClientGroup,\\n\\t\\tcc.[Name] as ClientName,\\n\\t\\tc.[Name] as FeeProposal,\\n\\t\\test.[Name] as EstimateName,\\n        edt.UnitPriceCost as Rate,\\n\\t\\tedt.[Rate] as TableRate,\\n        edt.ValueWithoutVatIncome as TotalDeliverable\\nfrom    Estimate est\\tleft outer join CommercialClient cc on cc.Oid = est.Client\\n\\t\\t\\t\\t\\t\\tleft outer join [Contract] c on c.Oid = est.[Contract], \\n\\t\\tEstimateItem eit, \\n\\t\\tArticle art,\\n        EstimateItemDetail edt \\n        left outer join [User] usr on usr.Oid = edt.[User]\\n        left outer join Department dep on dep.Oid = usr.Department\\n        left outer join UserTypologyGroup utg on utg.Oid = edt.UserTypologyGroup\\nwhere   eit.Estimate = est.Oid and\\n        edt.EstimateItem = eit.Oid and\\n        edt.[Type] = 2 and\\n        art.Oid = eit.Article and \\n        est.[Date] between @FromDate and @ToDate\\n)\\nSELECT gd.*\\nFROM Roles n, GridData gd\\nwhere n.UserId = @CurrentUserId and n.RoleName = 'RateCardRead' \",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[\"CompanyOid\",\"startDate\",\"endDate\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Resources - Staffing/execute","Configuration":"{\n    \"allowSortingBySummary\": true,\n    \"allowSorting\": true,\n    \"allowFiltering\": true,\n    \"allowExpandAll\": true,\n    \"height\": \"500\",\n    \"showBorders\": true,\n    \"export\": {\n        \"enabled\": true,\n        \"fileName\": \"Deliverables Staffing\"\n    },\n    \"showRowGrandTotals\": true,\n    \"fieldPanel\": {\n        \"showColumnFields\": true,\n        \"showDataFields\": true,\n        \"showFilterFields\": true,\n        \"showRowFields\": true,\n        \"allowFieldDragging\": true,\n        \"visible\": true\n    },\n    \"wordWrapEnabled\": false,\n    \"dataSource\": {\n        \"fields\": [\n            {\n                \"caption\": \"Division\",\n                \"dataField\": \"Division\",\n                \"area\": \"row\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Department\",\n                \"dataField\": \"Department\",\n                \"area\": \"row\",\n                \"expanded\": true\n            },\n            {\n                \"dataField\": \"User\",\n                \"dataType\": \"string\",\n                \"area\": \"row\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Typology Group\",\n                \"width\": 120,\n                \"dataField\": \"TypologyGroup\",\n                \"area\": \"row\",\n                \"expanded\": true\n            },\n            {\n                \"dataField\": \"Deliverable\",\n                \"dataType\": \"string\",\n                \"area\": \"column\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Hours\",\n                \"dataField\": \"ContractedTime\",\n                \"dataType\": \"number\",\n                \"summaryType\": \"sum\",\n                \"area\": \"data\",\n                \"format\": \"#.##\"\n            },\n            {\n                \"caption\": \"Rate\",\n                \"dataField\": \"Rate\",\n                \"dataType\": \"number\",\n                \"summaryType\": \"sum\",\n                \"area\": \"data\",\n                \"format\": \"#.##\"\n            },\n            {\n                \"caption\": \"Table Rate\",\n                \"dataField\": \"TableRate\",\n                \"dataType\": \"number\",\n                \"summaryType\": \"sum\",\n                \"area\": \"data\",\n                \"format\": \"#.##\"\n            },\n            {\n                \"dataField\": \"Service\",\n                \"dataType\": \"string\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Division\",\n                \"dataField\": \"Division\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Department\",\n                \"dataField\": \"Department\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Client Group\",\n                \"dataField\": \"ClientGroup\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Client\",\n                \"dataField\": \"ClientName\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Fee\",\n                \"dataField\": \"FeeProposal\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Estimate\",\n                \"dataField\": \"EstimateName\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            }\n        ],\n        \"store\": null\n    },\n    \"onCellPrepared\": \"function(e) {\n      if (e.area == 'column' && e.rowIndex == 0 && e.cell.type == 'D' && e.columnIndex % 2 == 0) \n        e.cellElement.setAttribute('background-color', '#e4e4e4');\n}\"\n}","DashboardDefinitionId":"0cfed20e-524f-4bb9-b2d5-7eb4b76199a9"},{"Id":"5036b999-d23b-4dfb-893a-9d46486f80ba","Name":"Period Selector","Active":true,"UseQuery":false,"Query":null,"Size":8,"Order":2,"Parameters":"[{\"WidgetSubTitle\":\"Closed and In Progress Tickets\",\"WidgetType\":\"rangeselector\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":20,\"WidgetHeader\":{\"WidgetPeriodChooser\":{\"startDate\":\"2019-01-01\",\"endDate\":\"2019-12-31\",\"type\":\"year\",\"visible\":false},\"showSubTitle\":false,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"queryText\",\"value\":\"SELECT\\tSUM(v.[Hours]) as [Hours],\\r\\n\\t\\tv.[Month]\\r\\nFROM\\t(\\r\\n\\t\\tSELECT \\tSUM(v.ActualTime) as [Hours],\\r\\n\\t\\t\\t\\tDATEFROMPARTS(v.[Year], v.[Month], 1) as [Month]\\r\\n\\t\\tFROM\\tAnalytics.Timesheet(@CurrentUserId) v\\r\\n\\t\\tWHERE\\tv.[Date] between DateAdd(mm, -12, getdate()) and getdate() and\\r\\n                v.CompanyId = @CompanyOid and\\r\\n                (@ClientGroupOid = '00000000-0000-0000-0000-000000000000' or v.ClientGroupId = @ClientGroupOid)\\r\\n\\t\\tGROUP BY DATEFROMPARTS(v.[Year], v.[Month], 1)\\r\\n\\t\\tUNION ALL\\r\\n\\t\\tSELECT \\tSUM(v.[Hours]) as [Hours],\\r\\n\\t\\t\\t\\tDATEFROMPARTS(v.[Year], v.[Month], 1) as [Month]\\r\\n\\t\\tFROM\\tAnalytics.Leave(@CurrentUserId) v\\r\\n\\t\\tWHERE\\tv.[Date] between DateAdd(mm, -12, getdate()) and getdate() and\\r\\n                v.CompanyId = @CompanyOid\\r\\n\\t\\tGROUP BY DATEFROMPARTS(v.[Year], v.[Month], 1)\\r\\n\\t\\tUNION ALL\\r\\n\\t\\tSELECT \\tSUM(v.[Hours]) as [Hours],\\r\\n\\t\\t\\t\\tDATEFROMPARTS(v.[Year], v.[Month], 1) as [Month]\\r\\n\\t\\tFROM\\tAnalytics.Holiday(@CurrentUserId) v\\r\\n\\t\\tWHERE\\tv.[Date] between DateAdd(mm, -12, getdate()) and getdate() and\\r\\n                v.CompanyId = @CompanyOid\\r\\n\\t\\tGROUP BY DATEFROMPARTS(v.[Year], v.[Month], 1)\\r\\n) v\\r\\nGROUP BY v.[Month]\",\"mapping\":\"\"}},\"Filters\":{\"startDate\":\"startDate\",\"endDate\":\"endDate\"},\"QueryConfiguration\":{\"RequiredFilters\":[\"CompanyOid\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_Utilization_Range_Selector/execute","Configuration":"{\n \"size\": {\n  \"height\": 100\n},\n  \"containerBackgroundColor\":\"#e0e0e0\",\n  \"selectedRangeColor\": \"#f5564a\",\n  \"chart\": {\n    \"commonSeriesSettings\": {\n      \"type\": \"steparea\",\n      \"argumentField\": \"Month\"\n    },\n    \"series\": [\n      {\n        \"valueField\": \"Hours\"\n      }\n    ]\n  },\n  \"scale\": {\n    \"minorTickInterval\": \"month\",\n    \"tickInterval\": \"month\",\n    \"valueType\": \"datetime\"\n  },\n  \"sliderMarker\": {\n    \"format\": \"monthAndDay\",\n    \"color\": \"#da5859\"\n  },\n  \"value\": {\n    \"length\": {\n      \"years\": 1\n    }\n  }\n}","DashboardDefinitionId":"0cfed20e-524f-4bb9-b2d5-7eb4b76199a9"}]}
