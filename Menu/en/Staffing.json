{"DashboardDefinitionRoles":[{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"4a6dc5d0-7bc1-4501-9cf3-e49288a8e5f1","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Finance Confidential Profile"},{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"adebf70c-0dab-41d1-8ee8-e78bcc9b09f7","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Account Profile"},{"AccessRoleId":"adebf70c-0dab-41d1-8ee8-e78bcc9b09f7","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Account Profile"},{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"4a6dc5d0-7bc1-4501-9cf3-e49288a8e5f1","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Finance Confidential Profile"},{"AccessRoleId":"4a6dc5d0-7bc1-4501-9cf3-e49288a8e5f1","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Finance Confidential Profile"},{"AccessRoleId":"4a6dc5d0-7bc1-4501-9cf3-e49288a8e5f1","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Finance Confidential Profile"},{"AccessRoleId":"adebf70c-0dab-41d1-8ee8-e78bcc9b09f7","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Account Profile"},{"AccessRoleId":"adebf70c-0dab-41d1-8ee8-e78bcc9b09f7","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Account Profile"},{"AccessRoleId":"d3e36f3b-993f-4b56-8664-bc616956b733","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Maintenance Profile"},{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"d3e36f3b-993f-4b56-8664-bc616956b733","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Maintenance Profile"},{"AccessRoleId":"4a6dc5d0-7bc1-4501-9cf3-e49288a8e5f1","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Finance Confidential Profile"},{"AccessRoleId":"4a6dc5d0-7bc1-4501-9cf3-e49288a8e5f1","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Finance Confidential Profile"},{"AccessRoleId":"d3e36f3b-993f-4b56-8664-bc616956b733","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Maintenance Profile"},{"AccessRoleId":"4a6dc5d0-7bc1-4501-9cf3-e49288a8e5f1","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Finance Confidential Profile"},{"AccessRoleId":"d3e36f3b-993f-4b56-8664-bc616956b733","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Maintenance Profile"},{"AccessRoleId":"d3e36f3b-993f-4b56-8664-bc616956b733","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Maintenance Profile"},{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"adebf70c-0dab-41d1-8ee8-e78bcc9b09f7","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Account Profile"},{"AccessRoleId":"d3e36f3b-993f-4b56-8664-bc616956b733","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Maintenance Profile"},{"AccessRoleId":"adebf70c-0dab-41d1-8ee8-e78bcc9b09f7","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Account Profile"},{"AccessRoleId":"4a6dc5d0-7bc1-4501-9cf3-e49288a8e5f1","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Finance Confidential Profile"},{"AccessRoleId":"adebf70c-0dab-41d1-8ee8-e78bcc9b09f7","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Account Profile"},{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"adebf70c-0dab-41d1-8ee8-e78bcc9b09f7","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Account Profile"},{"AccessRoleId":"d3e36f3b-993f-4b56-8664-bc616956b733","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Maintenance Profile"},{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"d3e36f3b-993f-4b56-8664-bc616956b733","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Maintenance Profile"},{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"d3e36f3b-993f-4b56-8664-bc616956b733","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Maintenance Profile"},{"AccessRoleId":"4a6dc5d0-7bc1-4501-9cf3-e49288a8e5f1","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Finance Confidential Profile"},{"AccessRoleId":"adebf70c-0dab-41d1-8ee8-e78bcc9b09f7","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Account Profile"},{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"adebf70c-0dab-41d1-8ee8-e78bcc9b09f7","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Account Profile"},{"AccessRoleId":"d3e36f3b-993f-4b56-8664-bc616956b733","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Maintenance Profile"},{"AccessRoleId":"4a6dc5d0-7bc1-4501-9cf3-e49288a8e5f1","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Finance Confidential Profile"},{"AccessRoleId":"adebf70c-0dab-41d1-8ee8-e78bcc9b09f7","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Account Profile"},{"AccessRoleId":"adebf70c-0dab-41d1-8ee8-e78bcc9b09f7","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Account Profile"},{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"d3e36f3b-993f-4b56-8664-bc616956b733","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Maintenance Profile"},{"AccessRoleId":"4a6dc5d0-7bc1-4501-9cf3-e49288a8e5f1","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Finance Confidential Profile"},{"AccessRoleId":"d3e36f3b-993f-4b56-8664-bc616956b733","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Maintenance Profile"},{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"9192b3d9-3b6b-469a-bcf4-01accd8ec5b4","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Administrator"},{"AccessRoleId":"4a6dc5d0-7bc1-4501-9cf3-e49288a8e5f1","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3","AccessRoleName":"Finance Confidential Profile"}],"Id":"0676dd73-9528-4d9e-aafd-163e4d848ac3","Name":"Staffing","Active":true,"Location":0,"DocumentId":"00000000-0000-0000-0000-000000000000","DocumentName":"","DocumentsConfiguration":"{\"type\":\"\",\"operations\":{\"read\":{\"endpoint\":\"\"},\"update\":{\"endpoint\":\"\",\"model\":{}},\"create\":{\"endpoint\":\"\",\"model\":{}},\"patch\":{\"endpoint\":\"\",\"patchModel\":[{\"model\":\"\",\"translation\":\"\",\"type\":\"\"}]},\"remove\":{\"endpoint\":\"\"},\"lookup\":{\"endpoint\":\"\"}},\"layout\":{\"create\":{},\"read\":{}},\"customDocument\":{\"useCustomStyle\":false,\"mainColor\":\"\",\"secondaryColor\":\"\",\"imageClass\":\"\",\"namePlural\":\"\",\"name\":\"\",\"systemName\":\"\"},\"availableOptions\":{\"feed\":false,\"info\":true,\"files\":false,\"userfields\":false,\"dashboard\":false}}","Templates":[],"DashboardDefinitionComponents":[{"Id":"dce876aa-b500-46a4-9c7c-6872a072d8e4","Name":"Deliverables Staffing","Active":true,"UseQuery":false,"Query":null,"Size":12,"Order":4,"Parameters":"[{\"WidgetSubTitle\":\"Hours and Fee per Typology Group\",\"WidgetType\":\"pivotgrid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":\"\",\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"WITH Roles AS\\n(\\n\\tSELECT\\n\\t\\t\\tdistinct u.Users as UserId, cast(r.Oid as uniqueidentifier) RoleParentId,\\n\\t\\t\\tr.Oid RoleId, r.name as RoleName, 1 RoleLevel\\n    FROM\\n            SecuritySystemRole r\\n            join SecuritySystemRoleParentRoles_SecuritySystemRoleChildRoles n on (n.ParentRoles = r.Oid)\\n            join SecuritySystemUserUsers_SecuritySystemRoleRoles u on (n.ParentRoles = u.Roles)\\n    WHERE\\n            r.GCRecord is null\\n            and r.Oid not in (select childRoles from SecuritySystemRoleParentRoles_SecuritySystemRoleChildRoles)\\n            and r.Name <> 'Base' and r.Name <> 'MaintenanceBase'\\n\\t\\t\\tand u.Users = @CurrentUserId\\n    UNION all\\n    SELECT\\n            n.UserId,\\n            r.RoleParentId,\\n            r.RoleId, r.RoleName, RoleLevel + 1 RoleLevel\\n    FROM (\\n\\t\\tSELECT\\n\\t\\t\\t\\tl.parentRoles RoleParentId, r.oid RoleId, r.name RoleName\\n        FROM\\n                SecuritySystemRole r join SecuritySystemRoleParentRoles_SecuritySystemRoleChildRoles l on (l.ChildRoles = r.oid)\\n        WHERE\\n                r.GCRecord is null and r.Name <> 'Base' and r.Name <> 'MaintenanceBase'\\n    ) r, Roles n\\n    WHERE\\n\\t\\t\\tn.RoleId = r.RoleParentId and RoleLevel <= 10\\n)\\nselect  IIF(eit.[Order] < 10, concat('0', eit.[Order], '. ', eit.[Description]), concat(eit.[Order], '. ', eit.[Description])) as Deliverable,\\n        art.[Name] as [Service],\\n        utg.[Name] as TypologyGroup,\\n        usr.[Name] as [User],\\n\\t\\tdiv.[Name] as Division,\\n        dep.[Name] as Department,\\n        edt.[Hours] as ContractedTime,\\n\\t\\tcg.[Name] as ClientGroup,\\n\\t\\tcc.[Name] as ClientName,\\n\\t\\tc.[Name] as FeeProposal,\\n\\t\\test.[Name] as EstimateName,\\n\\t\\tIIF(n.UserId is not null, edt.UnitPriceCost, null) as Rate,\\n\\t\\tIIF(n.UserId is not null, edt.[Rate], null) as TableRate,\\n        edt.ValueWithoutVatIncome as TotalDeliverable,\\n\\t\\tIIF(n.UserId is not null, edt.UnitPriceCost * edt.[Hours], null) as Total\\nfrom    Estimate est\\tleft outer join CommercialClient cc on cc.Oid = est.Client\\n\\t\\t\\t\\t\\t\\tleft outer join [Contract] c on c.Oid = est.[Contract]\\n\\t\\t\\t\\t\\t\\tleft outer join ClientGroup cg on cg.Oid = cc.ClientGroup,\\n\\t\\t\\t\\t\\t\\t\\n\\t\\tEstimateItem eit, \\n\\t\\tArticle art,\\n        EstimateItemDetail edt\\tleft outer join Department dep on dep.Oid = edt.Department\\n\\t\\t\\t\\t\\t\\t\\t\\tleft outer join Division div on div.Oid = dep.Division\\n\\t\\t\\t\\t\\t\\t\\t\\tleft outer join [User] usr on usr.Oid = edt.[User]\\n\\t\\t\\t\\t\\t\\t\\t\\tleft outer join UserTypologyGroup utg on utg.Oid = edt.UserTypologyGroup\\n\\t\\t\\t\\t\\t\\t\\t\\tleft outer join Roles n on (n.UserId = @CurrentUserId and n.RoleName = 'RateCardRead')\\nwhere   eit.Estimate = est.Oid and\\n        edt.EstimateItem = eit.Oid and\\n        edt.[Type] = 2 and\\n        art.Oid = eit.Article and \\n        est.[Date] between @FromDate and @ToDate and\\n\\t\\t(cg.Oid = @ClientGroupOid or @ClientGroupOid = '00000000-0000-0000-0000-000000000000') and\\n\\t\\t(utg.Company = @CompanyOid or @CompanyOid = '00000000-0000-0000-0000-000000000000')\\norder by eit.[Order]\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[\"CompanyOid\",\"ClientGroupOid\",\"startDate\",\"endDate\"]}}]","DashboardComponentType":{"Id":"c666ba5e-8578-4132-86a5-0f96c665000d","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Resources - Staffing/execute","Configuration":"{\n    \"allowSortingBySummary\": true,\n    \"allowSorting\": true,\n    \"allowFiltering\": true,\n    \"allowExpandAll\": true,\n    \"headerFilter\": {\n        \"allowSearch\": true,\n        \"showRelevantValues\": true\n    },\n    \"height\": \"500\",\n    \"showBorders\": true,\n    \"export\": {\n        \"enabled\": true,\n        \"fileName\": \"Deliverables Staffing\"\n    },\n    \"showRowGrandTotals\": true,\n    \"fieldPanel\": {\n        \"showColumnFields\": true,\n        \"showDataFields\": true,\n        \"showFilterFields\": true,\n        \"showRowFields\": true,\n        \"allowFieldDragging\": true,\n        \"visible\": true\n    },\n    \"wordWrapEnabled\": false,\n    \"dataSource\": {\n        \"fields\": [\n            {\n                \"caption\": \"Division\",\n                \"dataField\": \"Division\",\n                \"area\": \"row\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Department\",\n                \"dataField\": \"Department\",\n                \"area\": \"row\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Typology Group\",\n                \"width\": 120,\n                \"dataField\": \"TypologyGroup\",\n                \"area\": \"row\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Name\",\n                \"dataField\": \"User\",\n                \"dataType\": \"string\",\n                \"area\": \"row\",\n                \"expanded\": true\n            },\n            {\n                \"dataField\": \"Deliverable\",\n                \"dataType\": \"string\",\n                \"area\": \"column\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Hours\",\n                \"dataField\": \"ContractedTime\",\n                \"dataType\": \"number\",\n                \"summaryType\": \"sum\",\n                \"area\": \"data\",\n                \"format\": \"###,###,###\"\n            },\n            {\n                \"caption\": \"Rate\",\n                \"dataField\": \"Rate\",\n                \"dataType\": \"number\",\n                \"summaryType\": \"sum\",\n                \"area\": \"data\",\n                \"format\": \"###,###,###\"\n            },\n            {\n                \"caption\": \"Table Rate\",\n                \"dataField\": \"TableRate\",\n                \"dataType\": \"number\",\n                \"summaryType\": \"sum\",\n                \"area\": \"data\",\n                \"format\": \"###,###,###\"\n            },\n            {\n                \"caption\": \"Total\",\n                \"dataField\": \"Total\",\n                \"dataType\": \"number\",\n                \"summaryType\": \"sum\",\n                \"area\": \"data\",\n                \"format\": \"###,###,###\"\n            },\n            {\n                \"dataField\": \"Service\",\n                \"dataType\": \"string\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Division\",\n                \"dataField\": \"Division\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Department\",\n                \"dataField\": \"Department\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Client Group\",\n                \"dataField\": \"ClientGroup\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Client\",\n                \"dataField\": \"ClientName\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Fee\",\n                \"dataField\": \"FeeProposal\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Estimate\",\n                \"dataField\": \"EstimateName\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            }\n        ],\n        \"store\": null\n    },\n    \"onCellPrepared\": \"function(e) {\n      if (e.area == 'column' && e.rowIndex == 0 && e.cell.type == 'D' && e.columnIndex % 2 == 0) \n        e.cellElement.setAttribute('background-color', '#e4e4e4');\n}\"\n}","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3"},{"Id":"da07e742-61bc-42d2-8354-ecebd50df732","Name":"Period Selector","Active":true,"UseQuery":false,"Query":null,"Size":8,"Order":2,"Parameters":"[{\"WidgetSubTitle\":\"Choose a date range based on your Estimate Start Date. The data will include the totals for the Staff Plan Estimates.\",\"WidgetType\":\"rangeselector\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":50,\"WidgetHeader\":{\"WidgetPeriodChooser\":{\"startDate\":\"2019-01-01\",\"endDate\":\"2019-12-31\",\"type\":\"year\",\"visible\":false},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"SELECT\\tSUM(v.[Hours]) as [Hours],\\r\\n\\t\\tv.[Month]\\r\\nFROM\\t(\\r\\n\\t\\tSELECT \\tSUM(v.ActualTime) as [Hours],\\r\\n\\t\\t\\t\\tDATEFROMPARTS(v.[Year], v.[Month], 1) as [Month]\\r\\n\\t\\tFROM\\tAnalytics.Timesheet(@CurrentUserId) v\\r\\n\\t\\tWHERE\\tv.[Date] between DateAdd(mm, -12, getdate()) and getdate() and\\r\\n                v.CompanyId = @CompanyOid and\\r\\n                (@ClientGroupOid = '00000000-0000-0000-0000-000000000000' or v.ClientGroupId = @ClientGroupOid)\\r\\n\\t\\tGROUP BY DATEFROMPARTS(v.[Year], v.[Month], 1)\\r\\n\\t\\tUNION ALL\\r\\n\\t\\tSELECT \\tSUM(v.[Hours]) as [Hours],\\r\\n\\t\\t\\t\\tDATEFROMPARTS(v.[Year], v.[Month], 1) as [Month]\\r\\n\\t\\tFROM\\tAnalytics.Leave(@CurrentUserId) v\\r\\n\\t\\tWHERE\\tv.[Date] between DateAdd(mm, -12, getdate()) and getdate() and\\r\\n                v.CompanyId = @CompanyOid\\r\\n\\t\\tGROUP BY DATEFROMPARTS(v.[Year], v.[Month], 1)\\r\\n\\t\\tUNION ALL\\r\\n\\t\\tSELECT \\tSUM(v.[Hours]) as [Hours],\\r\\n\\t\\t\\t\\tDATEFROMPARTS(v.[Year], v.[Month], 1) as [Month]\\r\\n\\t\\tFROM\\tAnalytics.Holiday(@CurrentUserId) v\\r\\n\\t\\tWHERE\\tv.[Date] between DateAdd(mm, -12, getdate()) and getdate() and\\r\\n                v.CompanyId = @CompanyOid\\r\\n\\t\\tGROUP BY DATEFROMPARTS(v.[Year], v.[Month], 1)\\r\\n) v\\r\\nGROUP BY v.[Month]\",\"mapping\":\"\"}},\"Filters\":{\"startDate\":\"startDate\",\"endDate\":\"endDate\"},\"QueryConfiguration\":{\"RequiredFilters\":[\"CompanyOid\"]}}]","DashboardComponentType":{"Id":"c666ba5e-8578-4132-86a5-0f96c665000d","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_Utilization_Range_Selector/execute","Configuration":"{\"size\":{\"height\":100},\"containerBackgroundColor\":\"#e0e0e0\",\"selectedRangeColor\":\"#f5564a\",\"chart\":{\"commonSeriesSettings\":{\"type\":\"steparea\",\"argumentField\":\"Month\"},\"series\":[{\"valueField\":\"Hours\"}]},\"scale\":{\"minorTickInterval\":\"month\",\"tickInterval\":\"month\",\"valueType\":\"datetime\"},\"sliderMarker\":{\"format\":\"monthAndDay\",\"color\":\"#da5859\"},\"value\":{\"length\":{\"years\":1}}}","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3"},{"Id":"8be5860e-1fc7-4145-ab68-f3de96b05011","Name":"Company and Client Group","Active":true,"UseQuery":false,"Query":null,"Size":4,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"Choose a Company or Client Group\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":50,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"SELECT 1;\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"c666ba5e-8578-4132-86a5-0f96c665000d","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_Utilization_Per_Company_Department_User/execute","Configuration":"{\n    \"colCount\": 1,\n    \"items\": [\n        {\n            \"dataField\": \"CompanyId\",\n            \"label\": {\n                \"text\": \"Company\"\n            },\n            \"validationRules\": [\n                {\n                    \"type\": \"required\"\n                }\n            ],\n            \"editorType\": \"dxSelectBox\",\n            \"editorOptions\": {\n                \"width\": 250,\n                \"searchEnabled\": true,\n                \"dataSource\": {\n                    \"load\": \"function(loadOptions){ \n                            var searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : ''); \n                            var searchTake = (loadOptions.searchValue != null && loadOptions.searchValue != '' ? 10 : 100); \n                            return SkillsWorkflow.executeAPI('GET', 'companies/lookup',\n                    null,\n                    {})\n                }\",\n          \"byKey\": \"function(key) { return SW.executeAPI('GET','companies/'+key+'/lookup',null,{}).then( result =>  { return Promise.resolve(result);}) }\"\n            },\n            \"displayExpr\": \"Name\",\n            \"valueExpr\": \"Id\",\n            \"onValueChanged\": \"function(e){ \n                if( e.value != null && e.value != '') {\n                    SkillsWorkflow.setDashboardFilter('CompanyOid', e.value);\n            } else {\n                    SkillsWorkflow.setDashboardFilter('CompanyOid', '00000000-0000-0000-0000-000000000000');\n            }\n        }\"\n    }\n},\n{\n    \"name\": \"Client Group\",\n    \"label\": {\n        \"text\": \"Client Group\"\n    },\n    \"editorType\": \"dxSelectBox\",\n    \"editorOptions\": {\n        \"width\": 250,\n        \"searchEnabled\": true,\n        \"minSearchLength\": 0,\n        \"dataSource\": {\n            \"load\": \"function(loadOptions){ \n                            var searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : ''); \n                            var searchTake = (loadOptions.searchValue != null && loadOptions.searchValue != '' ? 10 : 100); \n                            return SkillsWorkflow.executeAPI('GET', 'clientgroups/lookup',\n            null,\n            {})\n        }\",\n          \"byKey\": \"function(key) { return SW.executeAPI('GET','clientgroups/'+key+'/lookup',null,{}).then( result =>  { return Promise.resolve(result);}) }\"\n    },\n    \"onInitialized\": \"function(e) { SkillsWorkflow.setDashboardFilter('ClientGroupOid', '00000000-0000-0000-0000-000000000000'); }\",\n    \"value\": \"\",\n    \"onValueChanged\": \"function(e){ if(e.value != null) { SW.setDashboardFilter('ClientGroupOid', e.value); } }\",\n    \"valueExpr\": \"Id\",\n    \"displayExpr\": \"Name\"\n},\n\"noDataText\": \"Please wait...\"\n}\n],\n\"height\": 72\n}","DashboardDefinitionId":"0676dd73-9528-4d9e-aafd-163e4d848ac3"}]}
