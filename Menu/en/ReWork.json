{"DashboardDefinitionRoles":[{"AccessRoleId":"1a0a6ac7-3609-4ef0-a919-7797f6f4cb3e","DashboardDefinitionId":"33905834-a231-4f9c-b4c5-7f1635aebd31","AccessRoleName":"Administrator"},{"AccessRoleId":"1a0a6ac7-3609-4ef0-a919-7797f6f4cb3e","DashboardDefinitionId":"33905834-a231-4f9c-b4c5-7f1635aebd31","AccessRoleName":"Administrator"}],"Id":"33905834-a231-4f9c-b4c5-7f1635aebd31","Name":"Re-Work","Active":true,"Location":0,"DocumentId":"00000000-0000-0000-0000-000000000000","DocumentName":"","DocumentTypeName":null,"DocumentsConfiguration":null,"Templates":[],"DashboardDefinitionComponents":[{"Id":"b896da82-b4dd-406f-bae7-15dafa6f3c8b","Name":"","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#e0e0e0\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":0,\"WidgetRows\":2,\"WidgetColumns\":48,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"84ee5399-f21a-42eb-9c52-810ca7ac1e22","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"colCount\": 4,\r\n    \"items\": [\r\n        {\r\n            \"name\": \"Year\",\r\n            \"dataField\": \"Year\",\r\n            \"editorType\": \"dxNumberBox\",\r\n            \"editorOptions\": {\r\n                \"showSpinButtons\": true,\r\n                \"value\": 2019,\r\n                \"width\": 65,\r\n                \"placeholder\": \"year\",\r\n                \"onContentReady\": \"function(e){ setTimeout(function() { SkillsWorkflow.setDashboardFilter('year', 2019); SkillsWorkflow.setDashboardFilter('Company', '00000000-0000-0000-0000-000000000000'); SkillsWorkflow.setDashboardFilter('Division', '00000000-0000-0000-0000-000000000000'); SkillsWorkflow.setDashboardFilter('Department', '00000000-0000-0000-0000-000000000000');}, 2000) }\",\r\n                \"onValueChanged\": \"function(e){ if(e.value != null) { SkillsWorkflow.setDashboardFilter('year', e.value); } }\"\r\n            },\r\n            \"noDataText\": \"Please wait...\"\r\n        },\r\n        {\r\n            \"dataField\": \"CompanyId\",\r\n            \"label\": {\r\n                \"text\": \"Company\"\r\n            },\r\n            \"editorType\": \"dxSelectBox\",\r\n            \"editorOptions\": {\r\n                \"width\": 250,\r\n                \"searchEnabled\": true,\r\n                \"dataSource\": {\r\n                    \"load\": \"function(loadOptions){ \r\n                            var searchValue = (\r\n                            loadOptions.searchValue != null ? loadOptions.searchValue : ''); \r\n                            var searchTake = (loadOptions.searchValue != null && loadOptions.searchValue != '' ? 10 : 100); \r\n                            return SkillsWorkflow.getMyCompanies('',\r\n                    0,\r\n                    0).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All companies'\r\n                        });return res;\r\n                    });\r\n                }\",\r\n                \"byKey\": \"function(key) { return SW.executeAPI('GET','companies/'+key+'/lookup',null,{}).then( result =>  { return Promise.resolve(result);}) }\"\r\n            },\r\n            \"placeholder\": \"All companies\",\r\n            \"displayExpr\": \"Name\",\r\n            \"valueExpr\": \"Id\",\r\n            \"onValueChanged\": \"function(e){ \r\n                if( e.value != null && e.value != '' ) {\r\n                    SkillsWorkflow.setDashboardFilter('Company', e.value);\r\n            } else {\r\n                    SkillsWorkflow.setDashboardFilter('Company', '00000000-0000-0000-0000-000000000000');\r\n            }\r\n                SW.setComponentByValue(e.previousValue, e.value, 'DivisionId');\r\n        }\",\r\n            \"onInitialized\": \"function(e){ SW.saveComponent(e.component,'CompanyId');}\"\r\n    }\r\n},\r\n{\r\n    \"dataField\": \"DivisionId\",\r\n    \"label\": {\r\n        \"text\": \"Division\"\r\n    },\r\n    \"editorType\": \"dxSelectBox\",\r\n    \"editorOptions\": {\r\n        \"width\": 250,\r\n        \"searchEnabled\": true,\r\n        \"dataSource\": {\r\n            \"load\": \"function(loadOptions){ \r\n                            let searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : ''); \r\n                            let skip = loadOptions.skip || 0; \r\n                            let take = loadOptions.take || 20; \r\n                            var param = { name:searchValue, skip: skip, take: take\r\n            }; \r\n                            var companyId = SW.getValueFromComponent('CompanyId'); \r\n                            if (companyId == '00000000-0000-0000-0000-000000000000') {\r\n                                return SkillsWorkflow.executeAPI('GET', 'divisions/lookup',\r\n                null,\r\n                {}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All divisions', CompanyName:''\r\n                    });return res;\r\n                });\r\n            } else if (companyId != null) { \r\n                                param['companyId'\r\n                ] = companyId;\r\n                                return SkillsWorkflow.executeAPI('GET', 'divisions/lookup',param,\r\n                {}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All divisions', CompanyName:''\r\n                    });return res;\r\n                })\r\n            }\r\n        }\",\r\n            \"byKey\": \"function(key) { return SW.executeAPI('GET','divisions/'+key+'/lookup',null,{}).then( result =>  { return Promise.resolve(result);})}\"\r\n    },\r\n    \"placeholder\": \"All divisions\",\r\n    \"onValueChanged\": \"function(e){ \r\n                if (e.value != null && e.value != '') {\r\n                    SkillsWorkflow.setDashboardFilter('Division', e.value);\r\n    } else {\r\n                    SkillsWorkflow.setDashboardFilter('Division', '00000000-0000-0000-0000-000000000000');\r\n    }\r\n                SW.setComponentByValue(e.previousValue, e.value, 'DepartmentId');\r\n}\",\r\n            \"onInitialized\": \"function(e){ SW.saveComponent(e.component, 'DivisionId'); }\",\r\n\"itemTemplate\": \"function (data, index, e) {\r\n            SW.setAttribute(e, '', 'class', 'ellipsis');\r\n            SW.setAttribute(e, data.Name, 'style', 'font-weight: bold');\r\n\r\n            SW.setAttribute(e, '', 'class', 'ellipsis');\r\n            SW.setAttribute(e, data.CompanyName, 'style', 'max-width: 47%; float: left');\r\n}\",\r\n\"displayExpr\": \"function (data) {  \r\n    if(!data) return 'All divisions'; \r\n    if( data.CompanyName && data.CompanyName != '' ) {\r\n        return data.CompanyName + ' - ' + data.Name;\r\n}\r\n    return data.Name;\r\n}\",\r\n\"valueExpr\": \"Id\",\r\n\"disabled\": true\r\n}\r\n},\r\n{\r\n\"dataField\": \"DepartmentId\",\r\n\"label\": {\r\n\"text\": \"Department\"\r\n},\r\n\"editorType\": \"dxSelectBox\",\r\n\"editorOptions\": {\r\n\"width\": 250,\r\n\"searchEnabled\": true,\r\n\"dataSource\": {\r\n\"load\": \"function(loadOptions){ \r\n                    let searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : ''); \r\n                    let skip = loadOptions.skip || 0; \r\n                    let take = loadOptions.take || 20;\r\n                    var param = { name: searchValue, skip: skip, take: take\r\n}; \r\n                    var divisionId = SW.getValueFromComponent('DivisionId'); \r\n                    var companyId = SW.getValueFromComponent('CompanyId'); \r\n                    if (divisionId != null && divisionId != '00000000-0000-0000-0000-000000000000' && companyId != null && companyId != '00000000-0000-0000-0000-000000000000') { \r\n                        param['divisionId'\r\n] = divisionId;\r\n                        param['companyId'\r\n] = companyId;\r\n} else if (divisionId != null && divisionId != '00000000-0000-0000-0000-000000000000' && (companyId == null || companyId == '00000000-0000-0000-0000-000000000000')) {\r\n                        param['divisionId'\r\n] = divisionId;\r\n}\r\n                    return SkillsWorkflow.executeAPI('GET', 'departments',param,\r\n{}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All departments', CompanyName: '', DivisionName: ''\r\n});return res;\r\n})\r\n}\",\r\n    \"byKey\": \"function(key) { return SW.executeAPI('GET', 'departments/' + key, null, {}).then( result =>  { return Promise.resolve(result); } ) }\"\r\n},\r\n\"placeholder\": \"All departments\",\r\n\"onValueChanged\": \"function(e){ \r\n                    if(e.value != null && e.value != '') {\r\n                        SkillsWorkflow.setDashboardFilter('Department', e.value);\r\n} else {\r\n                        SkillsWorkflow.setDashboardFilter('Department', '00000000-0000-0000-0000-000000000000');\r\n}\r\n}\",\r\n\"onInitialized\": \"function(e){ SW.saveComponent(e.component, 'DepartmentId'); }\",\r\n\"onOpened\": \"function (e) {  e.component._popup.option('width', 350); }\",\r\n\"itemTemplate\": \"function (data, index, e) {\r\n            debugger;\r\n            \r\n            SW.setAttribute(e, '', 'class', 'ellipsis');\r\n            SW.setAttribute(e, data.Name, 'style', 'font-weight: bold');\r\n\r\n            SW.setAttribute(e, '', 'class', 'ellipsis');\r\n            SW.setAttribute(e, data.CompanyName, 'style', 'max-width: 47%; float: left');\r\n\r\n            SW.setAttribute(e, '-', 'style', 'margin: 0px 3px; float: left');\r\n\r\n            SW.setAttribute(e, '', 'class', 'ellipsis');\r\n            SW.setAttribute(e, data.DivisionName, 'style', 'max-width: 47%; float: left');\r\n}\",\r\n\"displayExpr\": \"function (data) {\r\n    if(!data) return 'All departments';  \r\n    if( data.CompanyName != '' && data.DivisionName != '' )\r\n        return data.CompanyName + ' - ' + data.DivisionName + ' - ' + data.Name;\r\n    else if( data.CompanyName != '' )\r\n        return data.CompanyName + ' - - ' + data.Name;\r\n    else if( data.DivisionName != '' )\r\n        return data.DivisionName + ' - ' + data.Name;\r\n    return data.Name;\r\n}\",\r\n\"valueExpr\": \"Id\",\r\n\"disabled\": true\r\n}\r\n}\r\n]\r\n}","DashboardDefinitionId":"33905834-a231-4f9c-b4c5-7f1635aebd31"},{"Id":"4f7de0cd-c091-44ab-8854-271369323e1f","Name":"Reasons","Active":true,"UseQuery":false,"Query":null,"Size":4,"Order":3,"Parameters":"[{\"WidgetSubTitle\":\"ReWork per Reason\",\"WidgetType\":\"pie\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":32,\"WidgetYPosition\":2,\"WidgetRows\":13.714285714285714,\"WidgetColumns\":16,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":true,\"Metrics\":[{\"visible\":true,\"metricName\":\"? Jobs\",\"metricFieldValue\":\"JobsGrandTotal\"}]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select \\r\\n\\tv.Motive,\\r\\n\\tv.Jobs,\\r\\n\\t(sum(v.Jobs) over()) as JobsGrandTotal\\r\\nfrom (\\r\\n\\tselect \\r\\n\\t\\th.Motive,\\r\\n\\t\\tsum(1) as Jobs\\r\\n\\tfrom \\r\\n\\t\\tAnalytics.Job(@CurrentUserId) dj\\r\\n\\t\\tjoin History h on h.DocumentOid = dj.Oid\\r\\n\\t\\tjoin WorkflowState ws on ws.Oid = h.WorkflowState\\r\\n\\t\\tjoin WorkflowStateType wst on wst.Oid = ws.WorkflowStateType\\r\\n\\twhere \\r\\n\\t\\th.Motive is not null and\\r\\n\\t\\twst.[Status] in (13,18) and\\r\\n\\t\\tYear(h.StartDate) = @year and\\r\\n\\t\\t(dj.CompanyId = @Company or @Company = '00000000-0000-0000-0000-000000000000') and\\r\\n\\t\\t(dj.DivisionId = @Division or @Division = '00000000-0000-0000-0000-000000000000') and\\r\\n\\t\\t(dj.DepartmentId = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by\\r\\n\\t\\th.Motive\\r\\n) v\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Division\",\"Company\"]}}]","DashboardComponentType":{"Id":"84ee5399-f21a-42eb-9c52-810ca7ac1e22","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_ReWork_Per_Motive/execute","Configuration":"{\n    \"type\": \"doughnut\",\n    \"series\": [\n        {\n            \"argumentField\": \"Motive\",\n            \"valueField\": \"Jobs\",\n            \"name\": \"Jobs\",\n            \"label\": false\n        }\n    ],\n    \"commonSeriesSettings\": {\n        \"label\": {\n            \"visible\": false,\n            \"format\": \"fixedPoint\",\n            \"connector\": {\n                \"visible\": true,\n                \"width\": 1\n            }\n        },\n        \"smallValuesGrouping\": {\n            \"mode\": \"topN\",\n            \"topCount\": 10\n        }\n    },\n    \"size\": {\n        \"height\": 200\n    },\n    \"tooltip\": {\n        \"enabled\": true,\n        \"format\": \"#,###.#\",\n        \"customizeTooltip\": \"function(e) { return { text: this.argumentText + '<br>' + this.seriesName + ': ' + this.valueText };}\"\n    },\n    \"legend\": {\n        \"visible\": true,\n        \"horizontalAlignment\": \"left\",\n        \"verticalAlignment\": \"middle\",\n        \"itemTextPosition\": \"right\",\n        \"paddingLeftRight\": 0,\n        \"font\": {\n            \"size\": 8\n        }\n    }\n}","DashboardDefinitionId":"33905834-a231-4f9c-b4c5-7f1635aebd31"},{"Id":"591cf678-7593-4fff-8a86-6dc25a60017e","Name":"Re-Work Analysis","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":5,"Parameters":"[{\"WidgetSubTitle\":\"Re-Work per Department, Client & Project\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":16,\"WidgetRows\":24,\"WidgetColumns\":48,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":true,\"WidgetMetrics\":{\"visible\":true,\"Metrics\":[{\"visible\":true,\"metricName\":\"? Jobs\",\"metricFieldValue\":\"JobsGrandTotal\"}]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select \\r\\n\\tv.Client,\\r\\n\\tv.ClientId,\\r\\n\\tv.HasImage,\\r\\n\\tv.Department,\\r\\n\\tv.Project,\\r\\n\\tv.Jobs,\\r\\n\\t(sum(v.Jobs) over (Partition by Department)) JobsPerDepartment,\\r\\n\\t(sum(v.Jobs) over (Partition by Client)) JobsPerClient,\\r\\n\\t(sum(v.Jobs) over()) as JobsGrandTotal\\r\\nfrom (\\r\\n\\tselect \\r\\n\\t\\tdj.Client,\\r\\n\\t\\tdj.ClientId,\\r\\n\\t\\tcc.HasImage,\\r\\n\\t\\tdj.Department,\\r\\n\\t\\tdj.ProjectNameAndExternalId as Project,\\r\\n\\t\\tsum(1) as Jobs\\r\\n\\tfrom \\r\\n\\t\\tAnalytics.Job(@CurrentUserId) dj\\r\\n\\t\\tjoin History h on h.DocumentOid = dj.Oid\\r\\n\\t\\tjoin WorkflowState ws on ws.Oid = h.WorkflowState\\r\\n\\t\\tjoin WorkflowStateType wst on wst.Oid = ws.WorkflowStateType\\r\\n\\t\\tjoin CommercialClient cc on cc.Oid = dj.ClientId\\r\\n\\twhere\\r\\n\\t\\twst.[Status] in (13,18) and\\r\\n\\t\\tYear(h.StartDate) = @year and\\r\\n\\t\\t(dj.CompanyId = @Company or @Company = '00000000-0000-0000-0000-000000000000') and\\r\\n\\t\\t(dj.DivisionId = @Division or @Division = '00000000-0000-0000-0000-000000000000') and\\r\\n\\t\\t(dj.DepartmentId = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by\\r\\n\\t\\tdj.Client,\\r\\n\\t\\tdj.ClientId,\\r\\n\\t\\tcc.HasImage,\\r\\n\\t\\tdj.Department,\\r\\n\\t\\tdj.ProjectNameAndExternalId\\r\\n) v\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Division\",\"Company\"]}}]","DashboardComponentType":{"Id":"84ee5399-f21a-42eb-9c52-810ca7ac1e22","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"stateStoring\": {\r\n        \"enabled\": false\r\n    },\r\n    \"height\": 400,\r\n    \"searchPanel\": {\r\n        \"visible\": true\r\n    },\r\n    \"columnChooser\": {\r\n        \"enabled\": false\r\n    },\r\n    \"export\": {\r\n        \"enabled\": true,\r\n        \"fileName\": \"Re-Work Analysis\"\r\n    },\r\n    \"groupPanel\": {\r\n        \"visible\": true\r\n    },\r\n    \"grouping\": {\r\n        \"autoExpandAll\": true\r\n    },\r\n    \"selection\": {\r\n        \"mode\": \"single\"\r\n    },\r\n    \"scrolling\": {\r\n        \"mode\": \"virtual\",\r\n        \"rowRenderingMode\": \"virtual\"\r\n    },\r\n    \"allowColumnReordering\": true,\r\n    \"rowAlternationEnabled\": true,\r\n    \"showBorders\": true,\r\n    \"columns\": [\r\n        {\r\n            \"dataField\": \"Department\",\r\n            \"groupIndex\": 0\r\n        },\r\n        {\r\n            \"dataField\": \"ClientId\",\r\n            \"caption\": \"\",\r\n            \"format\": \"#,##0\",\r\n            \"cellTemplate\": \"function(e, i) {SK.showImage(e, 'client', 'small',i.data['HasImage'], i.data['Client'], i.data['ClientId'])}\",\r\n            \"width\": 30\r\n        },\r\n        {\r\n            \"dataField\": \"Client\",\r\n            \"caption\": \"Client\"\r\n        },\r\n        {\r\n            \"dataField\": \"Project\",\r\n            \"caption\": \"Project\",\r\n            \"width\": 250\r\n        },\r\n        {\r\n            \"dataField\": \"Jobs\",\r\n            \"caption\": \"Jobs\",\r\n            \"alignment\": \"center\"\r\n        },\r\n        {\r\n            \"caption\": \"Department Re-Work %\",\r\n            \"format\": \"#,##0\",\r\n            \"alignment\": \"center\",\r\n            \"cellTemplate\": \"function(e, i) { \r\n                var percentage = i.data.Jobs / i.data.JobsPerDepartment;\r\n                SW.setRAG(e, (percentage * 100.0).toFixed(1) + '%', percentage >= 0.75, (percentage > 0.25 && percentage < 0.75), percentage <= 0.25, true);\r\n        }\"\r\n    },\r\n    {\r\n        \"dataField\": \"JobsPerDepartment\",\r\n        \"caption\": \"Per Department\",\r\n        \"alignment\": \"center\"\r\n    },\r\n    {\r\n        \"caption\": \"Client Re-Work %\",\r\n        \"format\": \"#,##0\",\r\n        \"alignment\": \"center\",\r\n        \"cellTemplate\": \"function(e, i) { \r\n                var percentage = i.data.Jobs / i.data.JobsPerClient;\r\n                SW.setRAG(e, (percentage * 100.0).toFixed(1) + '%', percentage >= 0.75, (percentage > 0.25 && percentage < 0.75), percentage <= 0.25, true);\r\n    }\"\r\n},\r\n{\r\n    \"dataField\": \"JobsPerClient\",\r\n    \"caption\": \"Per Client\",\r\n    \"alignment\": \"center\"\r\n}\r\n],\r\n\"summary\": {\r\n\"calculateCustomSummary\": \"function (options) { \r\n                if (options.name === 'JobsReworkVsDepartmentRework') { \r\n                    switch(options.summaryProcess) {\r\n                        case 'start':\r\n                            options.totalValue = [\r\n            0,\r\n            0\r\n        ];\r\n                            break;\r\n                        case 'calculate':\r\n                            options.totalValue[\r\n            0\r\n        ] = options.totalValue[\r\n            0\r\n        ] + options.value.Jobs;\r\n                            options.totalValue[\r\n            1\r\n        ] = options.value.JobsGrandTotal;\r\n                            break;\r\n                        case 'finalize':\r\n                            if(Number(options.totalValue[\r\n            1\r\n        ]) > 0)\r\n                                options.totalValue = (options.totalValue[\r\n            0\r\n        ] / options.totalValue[\r\n            1\r\n        ]) * 100;\r\n                            else\r\n                                options.totalValue = 0;\r\n                                break;\r\n    }\r\n}\r\n                if (options.name === 'JobsReworkVsClientRework') { \r\n                    switch(options.summaryProcess) {\r\n                        case 'start':\r\n                            options.totalValue = [\r\n            0,\r\n            0\r\n        ];\r\n                            break;\r\n                        case 'calculate':\r\n                            options.totalValue[\r\n            0\r\n        ] = options.totalValue[\r\n            0\r\n        ] + options.value.Jobs;\r\n                            options.totalValue[\r\n            1\r\n        ] = options.value.JobsGrandTotal;\r\n                            break;\r\n                        case 'finalize':\r\n                            if(Number(options.totalValue[\r\n            1\r\n        ]) > 0) \r\n                                options.totalValue = (options.totalValue[\r\n            0\r\n        ] / options.totalValue[\r\n            1\r\n        ]) * 100;\r\n                            else \r\n                                options.totalValue = 0;\r\n                                break;\r\n    }\r\n}\r\n}\",            \r\n    \"totalItems\": [\r\n{\r\n    \"name\": \"JobsReworkVsDepartmentRework\",\r\n    \"showInColumn\": \"Department Re-Work %\",\r\n    \"displayFormat\": \"{0}\",\r\n    \"valueFormat\": \"#,##0\",\r\n    \"summaryType\": \"custom\",\r\n    \"alignment\": \"center\"\r\n},\r\n{\r\n    \"name\": \"JobsReworkVsClientRework\",\r\n    \"showInColumn\": \"Client Re-Work %\",\r\n    \"displayFormat\": \"{0}\",\r\n    \"valueFormat\": \"#,##0\",\r\n    \"summaryType\": \"custom\",\r\n    \"alignment\": \"center\"\r\n}\r\n]\r\n}\r\n}","DashboardDefinitionId":"33905834-a231-4f9c-b4c5-7f1635aebd31"},{"Id":"e802877a-2279-4c75-b744-8271994e99af","Name":"Top 10 Projects","Active":true,"UseQuery":false,"Query":null,"Size":4,"Order":1,"Parameters":"[{\"WidgetSubTitle\":\"Re-Work per Project\",\"WidgetType\":\"pie\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":2,\"WidgetRows\":13.714285714285714,\"WidgetColumns\":16,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":true,\"Metrics\":[{\"visible\":true,\"metricName\":\"? Jobs\",\"metricFieldValue\":\"JobsGrandTotal\"}]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select \\r\\n\\tv.Project,\\r\\n    v.Jobs,\\r\\n\\t(sum(v.Jobs) over()) as JobsGrandTotal\\r\\nfrom (\\r\\n\\tselect \\r\\n\\t\\tdj.ProjectNameAndExternalId as Project,\\r\\n\\t\\tsum(1) as Jobs\\r\\n\\tfrom \\r\\n\\t\\tAnalytics.Job(@CurrentUserId) dj\\r\\n\\t\\tjoin History h on h.DocumentOid = dj.Oid\\r\\n\\t\\tjoin WorkflowState ws on ws.Oid = h.WorkflowState\\r\\n\\t\\tjoin WorkflowStateType wst on wst.Oid = ws.WorkflowStateType\\r\\n\\twhere \\r\\n\\t\\tYear(h.StartDate) = @year and\\r\\n\\t\\twst.[Status] in (13,18) and\\r\\n\\t\\t(dj.CompanyId = @Company or @Company = '00000000-0000-0000-0000-000000000000') and\\r\\n\\t\\t(dj.DivisionId = @Division or @Division = '00000000-0000-0000-0000-000000000000') and\\r\\n\\t\\t(dj.DepartmentId = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by\\r\\n\\t\\tdj.ProjectNameAndExternalId\\r\\n) v\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Division\",\"Company\"]}}]","DashboardComponentType":{"Id":"84ee5399-f21a-42eb-9c52-810ca7ac1e22","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_ReWork_Per_Project/execute","Configuration":"{\n    \"palette\": \"Material\",\n    \"type\": \"doughnut\",\n    \"series\": [\n        {\n            \"argumentField\": \"Project\",\n            \"valueField\": \"Jobs\",\n            \"name\": \"Jobs\",\n            \"label\": false\n        }\n    ],\n    \"commonSeriesSettings\": {\n        \"label\": {\n            \"visible\": false,\n            \"format\": \"fixedPoint\",\n            \"connector\": {\n                \"visible\": true,\n                \"width\": 1\n            }\n        },\n        \"smallValuesGrouping\": {\n            \"mode\": \"topN\",\n            \"topCount\": 10,\n            \"groupName\": \"Others\"\n        }\n    },\n    \"size\": {\n        \"height\": 200\n    },\n    \"tooltip\": {\n        \"enabled\": true,\n        \"format\": \"#,###.#\",\n        \"customizeTooltip\": \"function(e) { return { text: this.argumentText + '<br>' + this.seriesName + ': ' + this.valueText };}\"\n    },\n    \"legend\": {\n        \"visible\": true,\n        \"horizontalAlignment\": \"left\",\n        \"verticalAlignment\": \"middle\",\n        \"itemTextPosition\": \"right\",\n        \"paddingLeftRight\": 0,\n        \"font\": {\n            \"size\": 8\n        }\n    }\n}","DashboardDefinitionId":"33905834-a231-4f9c-b4c5-7f1635aebd31"},{"Id":"0d530d40-ac2c-4e12-9ee2-f716979dcf7c","Name":"Top 10 Executors","Active":true,"UseQuery":false,"Query":null,"Size":4,"Order":2,"Parameters":"[{\"WidgetSubTitle\":\"Re-Work per Executors\",\"WidgetType\":\"pie\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":16,\"WidgetYPosition\":2,\"WidgetRows\":13.714285714285714,\"WidgetColumns\":16,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":true,\"Metrics\":[{\"visible\":true,\"metricName\":\"? Projects\",\"metricFieldValue\":\"JobsGrandTotal\"}]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with ReWork as (\\r\\n\\tselect \\r\\n\\t\\tdj.Oid\\r\\n\\tfrom \\r\\n\\t\\tAnalytics.Job(@CurrentUserId) dj\\r\\n\\t\\tjoin History h on h.DocumentOid = dj.Oid\\r\\n\\t\\tjoin WorkflowState ws on ws.Oid = h.WorkflowState\\r\\n\\t\\tjoin WorkflowStateType wst on wst.Oid = ws.WorkflowStateType\\r\\n\\twhere \\r\\n\\t\\twst.[Status] in (13,18) and\\r\\n\\t\\tYear(h.StartDate) = @year and\\r\\n\\t\\t(dj.CompanyId = @Company or @Company = '00000000-0000-0000-0000-000000000000') and\\r\\n\\t\\t(dj.DivisionId = @Division or @Division = '00000000-0000-0000-0000-000000000000') and\\r\\n\\t\\t(dj.DepartmentId = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by\\r\\n\\t\\tdj.Oid\\r\\n),\\r\\nExecutors as (\\r\\n\\tselect\\r\\n\\t\\tv.DocumentOid,\\r\\n\\t\\tSTRING_AGG(v.[Name], ', ') as Executors\\r\\n\\tfrom (\\r\\n\\t\\tselect \\r\\n\\t\\t\\th.DocumentOid, \\r\\n\\t\\t\\tu.[Name]\\r\\n\\t\\tfrom \\r\\n\\t\\t\\tAnalytics.Job(@CurrentUserId) dj\\r\\n\\t\\t\\tjoin History h on h.DocumentOid = dj.Oid\\r\\n\\t\\t\\tjoin WorkflowState ws on ws.Oid = h.WorkflowState\\r\\n\\t\\t\\tjoin WorkflowStateType wst on wst.Oid = ws.WorkflowStateType\\r\\n\\t\\t\\tjoin [User] u on u.Oid = h.[User]\\r\\n\\t\\twhere\\r\\n\\t\\t\\twst.[Status] = 5 and \\r\\n\\t\\t\\tYear(h.StartDate) = @year and\\r\\n\\t\\t\\t(dj.CompanyId = @Company or @Company = '00000000-0000-0000-0000-000000000000') and\\r\\n\\t\\t\\t(dj.DivisionId = @Division or @Division = '00000000-0000-0000-0000-000000000000') and\\r\\n\\t\\t\\t(dj.DepartmentId = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\tgroup by\\r\\n\\t\\t\\th.DocumentOid, \\r\\n\\t\\t\\tu.[Name]\\r\\n\\t) v\\r\\n\\tgroup by v.DocumentOid\\r\\n),\\r\\nExecutorsFromReWork as (\\r\\n\\tselect \\r\\n\\t\\tex.Executors\\r\\n\\tfrom \\r\\n\\t\\tReWork rw\\r\\n\\t\\tleft outer join Executors ex on ex.DocumentOid = rw.Oid\\r\\n)\\r\\nselect \\r\\n\\tv.Executors,\\r\\n\\tv.Jobs,\\r\\n\\t(sum(v.Jobs) over ()) as JobsGrandTotal\\r\\nfrom (\\r\\n\\tselect \\r\\n\\t\\terw.Executors,\\r\\n\\t\\tsum(1) as Jobs\\r\\n\\tfrom \\r\\n\\t\\tExecutorsFromReWork erw\\r\\n\\twhere \\r\\n\\t\\terw.Executors is not null\\r\\n\\tgroup by \\r\\n\\t\\terw.Executors\\r\\n) v\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Division\",\"Company\"]}}]","DashboardComponentType":{"Id":"84ee5399-f21a-42eb-9c52-810ca7ac1e22","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_ReWork_Per_Executor/execute","Configuration":"{\n    \"type\": \"doughnut\",\n    \"series\": [\n        {\n            \"argumentField\": \"Executors\",\n            \"valueField\": \"Jobs\",\n            \"name\": \"Jobs\",\n            \"label\": false\n        }\n    ],\n    \"commonSeriesSettings\": {\n        \"label\": {\n            \"visible\": false,\n            \"format\": \"fixedPoint\",\n            \"connector\": {\n                \"visible\": true,\n                \"width\": 1\n            }\n        },\n        \"smallValuesGrouping\": {\n            \"mode\": \"topN\",\n            \"topCount\": 10,\n            \"groupName\": \"Others\"\n        }\n    },\n    \"size\": {\n        \"height\": 200\n    },\n    \"tooltip\": {\n        \"enabled\": true,\n        \"format\": \"#,###.#\",\n        \"customizeTooltip\": \"function(e) { return { text: this.argumentText + '<br>' + this.seriesName + ': ' + this.valueText };}\"\n    },\n    \"legend\": {\n        \"visible\": true,\n        \"horizontalAlignment\": \"left\",\n        \"verticalAlignment\": \"middle\",\n        \"itemTextPosition\": \"right\",\n        \"paddingLeftRight\": 0,\n        \"font\": {\n            \"size\": 8\n        }\n    }\n}","DashboardDefinitionId":"33905834-a231-4f9c-b4c5-7f1635aebd31"}],"QueryText":null,"UseStore":false,"StoreEntity":null}