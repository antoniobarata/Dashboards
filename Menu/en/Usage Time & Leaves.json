{"DashboardDefinitionRoles":[],"Id":"699b9142-0d2f-4538-8b53-ec714e9bab7f","Name":"Usage Time & Leaves","Active":true,"Location":0,"DocumentId":"00000000-0000-0000-0000-000000000000","DocumentName":"","DocumentsConfiguration":"{\"type\":\"\",\"operations\":{\"read\":{\"endpoint\":\"\"},\"update\":{\"endpoint\":\"\",\"model\":{}},\"create\":{\"endpoint\":\"\",\"model\":{}},\"patch\":{\"endpoint\":\"\",\"patchModel\":[{\"model\":\"\",\"translation\":\"\",\"type\":\"\"}]},\"remove\":{\"endpoint\":\"\"},\"lookup\":{\"endpoint\":\"\"}},\"layout\":{\"create\":{},\"read\":{}},\"customDocument\":{\"useCustomStyle\":false,\"mainColor\":\"\",\"secondaryColor\":\"\",\"imageClass\":\"\",\"namePlural\":\"\",\"name\":\"\",\"systemName\":\"\"},\"availableOptions\":{\"feed\":false,\"info\":true,\"files\":false,\"userfields\":false,\"dashboard\":false}}","Templates":[],"DashboardDefinitionComponents":[{"Id":"ede6c27b-5435-4352-b0e0-0159f58ac8ef","Name":"Top 10 (leaves)","Active":true,"UseQuery":false,"Query":null,"Size":4,"Order":8,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"pie\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":200,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"showSubTitle\":false,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select top 10 u.[Name] as userName, count(u.[Name]) as count, u.[Oid] as userId\\r\\nfrom [User] u, [Analytics].[DatamartLeave] ad\\r\\nwhere ad.[UserId] = u.[Oid] and Year(ad.[Date]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n                                                                and (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n                                                                and (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\ngroup by u.[Name], u.[Oid]\\r\\norder by count(u.[Name]) desc\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Division\",\"Company\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_ExecutionStatus_Per_Client/execute","Configuration":"{\n  \"palette\": \"Material\",\n  \"type\": \"doughnut\",\n  \"series\": [\n    {\n      \"argumentField\": \"userName\",\n      \"valueField\": \"count\",\n      \"label\": {\n        \"position\": \"columns\",\n        \"visible\": true,\n        \"font\": {\n          \"family\": \"Varela Round\",\n          \"weight\": 800\n        },\n        \"customizeText\": \"function(arg) { return arg.percentText; }\"\n      }\n    }\n  ],\n  \"commonSeriesSettings\": {\n    \"label\": {\n      \"visible\": true,\n      \"format\": \"fixedPoint\",\n      \"connector\": {\n        \"position\": \"columns\",\n        \"visible\": true,\n        \"width\": 1\n      }\n    },\n    \"smallValuesGrouping\": {\n      \"mode\": \"topN\",\n      \"topCount\": 10,\n      \"groupName\": \"Others\"\n    }\n  },\n  \"size\": {\n    \"height\": 250\n  },\n  \"tooltip\": {\n    \"enabled\": true,\n    \"customizeText\": \"function (e) {return e.argumentText;}\"\n  },\n  \"legend\": {\n    \"visible\": true,\n    \"horizontalAlignment\": \"left\",\n    \"verticalAlignment\": \"middle\",\n    \"itemTextPosition\": \"right\",\n    \"paddingLeftRight\": 0,\n    \"font\": {\n      \"size\": 10,\n      \"family\": \"Varela Round\",\n      \"weight\": 800\n    }\n  },\n  \"resolveLabelOverlapping\": \"shift\"\n}","DashboardDefinitionId":"699b9142-0d2f-4538-8b53-ec714e9bab7f"},{"Id":"cfaff826-e808-4dce-b04f-26a2c8077fd3","Name":"Absences booked per type","Active":true,"UseQuery":false,"Query":"","Size":4,"Order":3,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"pie\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":150,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select ad.[LeaveType], count(ad.[LeaveType]) as count\\r\\nfrom  [User] u, [Analytics].[DatamartLeave] ad\\r\\nwhere u.[Oid] = ad.[UserId] and Year(ad.[Date]) = @year \\r\\n                            and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\tand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\tand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\ngroup by ad.[LeaveType]\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Division\",\"Company\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"palette\": \"Material\",\r\n    \"type\": \"doughnut\",\r\n    \"series\": [\r\n        {\r\n            \"argumentField\": \"LeaveType\",\r\n            \"valueField\": \"count\",\r\n            \"label\": {\r\n                \"visible\": true,\r\n                \"format\": \"fixedPoint\",\r\n                \"position\": \"inside\",\r\n                \"font\": {\r\n                    \"family\": \"Varela Round\",\r\n                    \"weight\": 800\r\n                },\r\n                \"customizeText\": \"function(arg) { return arg.percentText; }\"\r\n            }\r\n        }\r\n    ],\r\n    \"commonSeriesSettings\": {\r\n        \"smallValuesGrouping\": {\r\n            \"mode\": \"topN\",\r\n            \"topCount\": 5,\r\n            \"groupName\": \"Others\"\r\n        }\r\n    },\r\n    \"size\": {\r\n        \"height\": 240\r\n    },\r\n    \"legend\": {\r\n        \"visible\": true,\r\n        \"rowCount\": 2,\r\n        \"horizontalAlignment\": \"center\",\r\n        \"verticalAlignment\": \"top\",\r\n        \"itemTextPosition\": \"right\",\r\n        \"paddingLeftRight\": 0,\r\n        \"font\": {\r\n            \"size\": 10,\r\n            \"family\": \"Varela Round\",\r\n            \"weight\": 800\r\n        }\r\n    },\r\n    \"resolveLabelOverlapping\": \"shift\"\r\n}","DashboardDefinitionId":"699b9142-0d2f-4538-8b53-ec714e9bab7f"},{"Id":"f774d3ed-df00-470c-b3b0-338b1e8b235e","Name":"Activity over the Year","Active":true,"UseQuery":false,"Query":"","Size":4,"Order":1,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"chart\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":150,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with logins as \\r\\n(\\r\\n\\tselect\\tConvert(Date, ul.Day) as date,\\r\\n\\t\\t\\tcount(1) as countLog\\r\\n\\tfrom\\tUserLogon ul\\r\\n\\tinner join [User] u\\r\\n\\ton ul.[User] = u.[Oid]\\r\\n\\twhere Year(day) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by Convert(Date, ul.[Day])\\r\\n),\\r\\nblocks as\\r\\n(\\r\\n\\tselect\\tConvert(Date, al.UtcLogTime) as date,\\r\\n\\t\\t\\tcount(1) as countBlocked\\r\\n\\tfrom\\tAssistantLog al\\r\\n\\tinner join [User] u\\r\\n\\ton al.[User] = u.[Oid]\\r\\n\\twhere Year(al.UtcLogTime) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by Convert(Date, al.[UtcLogTime])\\r\\n),\\r\\ngetDat as \\r\\n(\\r\\n\\tselect l.date\\r\\n\\tfrom logins l\\r\\n\\tunion\\r\\n\\tselect b.date\\r\\n\\tfrom blocks b\\r\\n),\\r\\nmaintable as\\r\\n(\\r\\n\\tselect gd.[date] as date,\\r\\n\\t\\tIsNull(l.countLog, 0) as countLog,\\r\\n\\t\\tIsNull(b.countBlocked, 0) as countBlock\\r\\n\\tfrom [getDat] gd\\r\\n\\tfull join logins l\\r\\n\\ton l.date = gd.[date]\\r\\n\\tfull join blocks b\\r\\n\\ton b.date = gd.[date]\\r\\n),\\r\\ntotal as\\r\\n(\\r\\n\\tselect sum(m.[countLog]) as totalLog,\\r\\n\\t\\t\\tsum(m.[countBlock]) as totalBlock,\\r\\n\\t\\t\\tMonth(m.[date]) as month\\r\\n\\tfrom [maintable] m\\r\\n\\tgroup by Month(m.[date])\\r\\n),\\r\\naverages as\\r\\n(\\r\\n\\tselect (t.[totalLog]/22) as averageLog,\\r\\n\\t\\t\\t(t.[totalBlock]/22) as averageBlock,\\r\\n\\t\\t\\tt.[month] as month\\r\\n\\tfrom [total] t\\r\\n\\tgroup by t.[month], (t.[totalLog]/22), (t.[totalBlock]/22)\\r\\n)\\r\\nselect m.[date] as date, m.[countLog] as countLog, m.[countBlock] as countBlock,\\r\\n\\t\\ta.[averageLog] as averageLog, a.[averageBlock] as averageBlock,\\r\\n\\t\\tt.[totalLog] as totalLog, t.[totalBlock] as totalBlock\\r\\nfrom [maintable] m\\r\\nfull join [averages] a\\r\\non Month(m.[date]) = a.[month]\\r\\nfull join [total] t\\r\\non Month(m.[date]) = t.[month]\\r\\norder by m.[date]\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Company\",\"Division\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{ \r\n    \"size\": {\r\n        \"height\": 240\r\n    },\r\n    \"commonSeriesSettings\": {\r\n        \"argumentField\": \"date\",\r\n        \"type\": \"splinearea\",\r\n        \"label\":{\r\n            \"font\": {\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        }\r\n    },\r\n    \"panes\": [{\r\n        \"name\": \"paneLogs\"\r\n    },{\r\n        \"name\": \"paneBlocks\"\r\n    }],\r\n    \"defaultPane\": \"paneBlocks\",\r\n    \"series\": [{\r\n        \"pane\": \"paneLogs\",\r\n        \"type\": \"splinearea\",\r\n        \"valueField\": \"countLog\",\r\n        \"name\": \"Logins\"\r\n    },{\r\n        \"pane\": \"paneLogs\",\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"averageLog\",\r\n        \"name\": \"Average\",\r\n        \"width\": 1.5\r\n    },{\r\n        \"pane\": \"paneLogs\",\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"totalLog\",\r\n        \"axis\": \"total\",\r\n        \"name\": \"Total\",\r\n        \"width\": 1.5\r\n    },{\r\n        \"pane\": \"paneBlocks\",\r\n        \"type\": \"splinearea\",\r\n        \"valueField\": \"countBlock\",\r\n        \"name\": \"Blocked\"\r\n    },{\r\n        \"pane\": \"paneBlocks\",\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"averageBlock\",\r\n        \"name\": \"Average\",\r\n        \"width\": 1.5\r\n    },{\r\n        \"pane\": \"paneBlocks\",\r\n        \"type\": \"spline\",\r\n        \"axis\": \"total\",\r\n        \"valueField\": \"totalBlock\",\r\n        \"name\": \"Total\",\r\n        \"width\": 1.5\r\n    }],    \r\n    \"valueAxis\": [{\r\n        \"pane\": \"paneBlocks\",\r\n        \"autoBreaksEnabled1\": true,\r\n        \"axisDivisionFactor1\": 15,\r\n        \"breakStyle1\": {\r\n            \"color\": \"#ababab\",\r\n            \"line\": \"straight\",\r\n            \"width\": 2\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        },\r\n        \"label\": {\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"title\": {\r\n            \"text\": \"Blocked\",\r\n            \"font\": {\r\n                \"size\": 11,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        }\r\n    },{\r\n        \"pane\": \"paneLogs\",\r\n        \"autoBreaksEnabled1\": true,\r\n        \"axisDivisionFactor1\": 15,\r\n        \"breakStyle1\": {\r\n            \"color\": \"#ababab\",\r\n            \"line\": \"straight\",\r\n            \"width\": 2\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        },\r\n        \"label\": {\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"title\": {\r\n            \"text\": \"Logins\",\r\n            \"font\": {\r\n                \"size\": 11,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        }\r\n    },{\r\n        \"name\": \"total\",\r\n        \"position\": \"right\",\r\n        \"autoBreaksEnabled1\": true,\r\n        \"axisDivisionFactor1\": 15,\r\n        \"breakStyle1\": {\r\n            \"color\": \"#ababab\",\r\n            \"line\": \"straight\",\r\n            \"width\": 2\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        },\r\n        \"label\": {\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"title\": {\r\n            \"text\": \"Total\",\r\n            \"font\": {\r\n                \"size\": 11,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        }\r\n    }],\r\n    \"argumentAxis\": {\r\n        \"argumentType\": \"datetime\",\r\n        \"label\": {\r\n            \"format\": \"function (value) {return value.getMonth();}\",\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"tickInterval\": {\r\n            \"months\": 1\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        }\r\n    },\r\n    \"legend\": {\r\n        \"visible\": false,\r\n        \"verticalAlignment\": \"bottom\",\r\n        \"horizontalAlignment\": \"center\"\r\n    }\r\n}","DashboardDefinitionId":"699b9142-0d2f-4538-8b53-ec714e9bab7f"},{"Id":"42ca72ad-cbfb-4754-98f5-86145f60129d","Name":"Com cascade","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#e0e0e0\",\"WidgetHeight\":30,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n\"colCount\": 4,\r\n\"items\": [\r\n    {\r\n        \"name\": \"Year\",\r\n        \"dataField\": \"Year\",\r\n        \"editorType\": \"dxNumberBox\",\r\n        \"editorOptions\": {\r\n            \"showSpinButtons\": true,\r\n            \"value\": 2019,\r\n            \"width\": 65,\r\n            \"placeholder\": \"year\",\r\n            \"onContentReady\": \"function(e){ setTimeout(function() { SkillsWorkflow.setDashboardFilter('year', 2019); SkillsWorkflow.setDashboardFilter('Company', '00000000-0000-0000-0000-000000000000'); SkillsWorkflow.setDashboardFilter('Division', '00000000-0000-0000-0000-000000000000'); SkillsWorkflow.setDashboardFilter('Department', '00000000-0000-0000-0000-000000000000');}, 1000) }\",\r\n            \"onValueChanged\": \"function(e){ if(e.value != null) { SkillsWorkflow.setDashboardFilter('year', e.value); } }\"\r\n        },\r\n        \"noDataText\": \"Please wait...\"\r\n    },\r\n    {\r\n        \"dataField\": \"CompanyId\",\r\n        \"label\": {\r\n            \"text\": \"Company\"\r\n        },\r\n        \"editorType\": \"dxSelectBox\",\r\n        \"editorOptions\": {\r\n            \"width\": 250,\r\n            \"searchEnabled\": true,\r\n            \"dataSource\": {\r\n                \"load\": \"function(loadOptions){ \r\n                            var searchValue = (\r\n                            loadOptions.searchValue != null ? loadOptions.searchValue : ''); \r\n                            var searchTake = (loadOptions.searchValue != null && loadOptions.searchValue != '' ? 10 : 100); \r\n                            return SkillsWorkflow.executeAPI('GET', 'companies/lookup',null,{}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All companies'});return res;})\r\n                }\",\r\n                \"byKey\": \"function(key) { return SW.executeAPI('GET','companies/'+key+'/lookup',null,{}).then( result =>  { return Promise.resolve(result);}) }\"\r\n            },\r\n            \"placeholder\": \"All companies\",\r\n            \"displayExpr\": \"Name\",\r\n            \"valueExpr\": \"Id\",\r\n            \"onValueChanged\": \"function(e){ \r\n                if( e.value != null && e.value != '') {\r\n                    SkillsWorkflow.setDashboardFilter('Company', e.value);\r\n                } else {\r\n                    SkillsWorkflow.setDashboardFilter('Company', '00000000-0000-0000-0000-000000000000');\r\n                }\r\n                debugger;\r\n                SW.setComponentByValue(e.previousValue, e.value, 'DivisionId');\r\n            }\",\r\n            \"onInitialized\": \"function(e){ SW.saveComponent(e.component,'CompanyId');}\"\r\n        }\r\n    },\r\n    {\r\n        \"dataField\": \"DivisionId\",\r\n        \"label\": {\r\n            \"text\": \"Division\"\r\n        },\r\n        \"editorType\": \"dxSelectBox\",\r\n        \"editorOptions\": {\r\n            \"width\": 250,\r\n            \"searchEnabled\": true,\r\n            \"dataSource\": {\r\n                \"load\": \"function(loadOptions){ \r\n                            let searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : ''); \r\n                            let skip = loadOptions.skip || 0; \r\n                            let take = loadOptions.take || 20; \r\n                            var param = { name:searchValue, skip: skip, take: take}; \r\n                            var companyId = SW.getValueFromComponent('CompanyId'); \r\n                            if (companyId == '00000000-0000-0000-0000-000000000000') {\r\n                                return SkillsWorkflow.executeAPI('GET', 'divisions/lookup',null,{}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All divisions'});return res;})\r\n                            } else if (companyId != null) { \r\n                                param['companyId'] = companyId;\r\n                                return SkillsWorkflow.executeAPI('GET', 'divisions/lookup',param,{}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All divisions'});return res;})\r\n                            }\r\n                        }\",\r\n                \"byKey\": \"function(key) { return SW.executeAPI('GET','divisions/'+key+'/lookup',null,{}).then( result =>  { return Promise.resolve(result);})}\"\r\n            },\r\n            \"placeholder\": \"All divisions\",\r\n            \"onValueChanged\": \"function(e){ \r\n                if (e.value != null && e.value != '') {\r\n                    SkillsWorkflow.setDashboardFilter('Division', e.value);\r\n                } else {\r\n                    SkillsWorkflow.setDashboardFilter('Division', '00000000-0000-0000-0000-000000000000');\r\n                }\r\n                SW.setComponentByValue(e.previousValue, e.value, 'DepartmentId');\r\n                \r\n            }\",\r\n            \"onInitialized\": \"function(e){ SW.saveComponent(e.component, 'DivisionId'); }\",\r\n            \"displayExpr\": \"Name\",\r\n            \"valueExpr\": \"Id\",\r\n            \"disabled\": true\r\n        }\r\n    },\r\n    {\r\n        \"dataField\": \"DepartmentId\",\r\n        \"label\": {\r\n            \"text\": \"Department\"\r\n        },\r\n        \"editorType\": \"dxSelectBox\",\r\n        \"editorOptions\": {\r\n            \"width\": 250,\r\n            \"searchEnabled\": true,\r\n            \"dataSource\": {\r\n                \"load\": \"function(loadOptions){ \r\n                    let searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : ''); \r\n                    let skip = loadOptions.skip || 0; \r\n                    let take = loadOptions.take || 20;\r\n                    var param = { name: searchValue, skip: skip, take: take }; \r\n                    var divisionId = SW.getValueFromComponent('DivisionId'); \r\n                    var companyId = SW.getValueFromComponent('CompanyId'); \r\n                    if (divisionId != null && divisionId != '00000000-0000-0000-0000-000000000000' && companyId != null && companyId != '00000000-0000-0000-0000-000000000000') { \r\n                        param['divisionId'] = divisionId;\r\n                        param['companyId'] = companyId;\r\n                    } \r\n                    return SkillsWorkflow.executeAPI('GET', 'departments',param,{}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All departments'});return res;})\r\n                }\",\r\n                \"byKey\": \"function(key) { return SW.executeAPI('GET', 'departments/' + key, null, {}).then( result =>  { return Promise.resolve(result); } ) }\"\r\n            },\r\n            \"placeholder\": \"All departments\",\r\n            \"onValueChanged\": \"function(e){ \r\n                    if(e.value != null && e.value != '') {\r\n                        SkillsWorkflow.setDashboardFilter('Department', e.value);\r\n                    } else {\r\n                        SkillsWorkflow.setDashboardFilter('Department', '00000000-0000-0000-0000-000000000000');\r\n                    }\r\n            }\",\r\n            \"onInitialized\": \"function(e){ SW.saveComponent(e.component, 'DepartmentId'); }\",\r\n            \"displayExpr\": \"Name\",\r\n            \"valueExpr\": \"Id\",\r\n            \"disabled\": true\r\n        }\r\n    }]\r\n}\r\n\r\n","DashboardDefinitionId":"699b9142-0d2f-4538-8b53-ec714e9bab7f"},{"Id":"74f359ab-e566-4537-ac59-c52799e28171","Name":"Top 10 (block)","Active":true,"UseQuery":false,"Query":null,"Size":4,"Order":7,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"pie\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":200,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"showSubTitle\":false,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select top 10 u.[Name] as userName, count(u.[Name]) as count, u.[Oid] as userId\\r\\nfrom [User] u, [AssistantLog] al\\r\\nwhere al.[User] = u.[Oid] and Year(al.[UtcLogTime]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n                                                                and (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n                                                                and (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\ngroup by u.[Name], u.[Oid]\\r\\norder by count(u.[Name]) desc\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Division\",\"Company\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_ExecutionStatus_Per_Client/execute","Configuration":"{\n  \"palette\": \"Material\",\n  \"type\": \"doughnut\",\n  \"series\": [\n    {\n      \"argumentField\": \"userName\",\n      \"valueField\": \"count\",\n      \"label\": {\n        \"visible\": true,\n        \"font\": {\n          \"family\": \"Varela Round\",\n          \"weight\": 800\n        },\n        \"customizeText\": \"function(arg) { return arg.percentText; }\"\n      }\n    }\n  ],\n  \"commonSeriesSettings\": {\n    \"label\": {\n      \"visible\": false,\n      \"format\": \"fixedPoint\",\n      \"connector\": {\n        \"visible\": false,\n        \"width\": 1\n      }\n    },\n    \"smallValuesGrouping\": {\n      \"mode\": \"topN\",\n      \"topCount\": 10,\n      \"groupName\": \"Others\"\n    }\n  },\n  \"size\": {\n    \"height\": 250\n  },\n  \"tooltip\": {\n    \"enabled\": true,\n    \"customizeText\": \"function (e) { return e.argumentText; }\"\n  },\n  \"legend\": {\n    \"visible\": true,\n    \"horizontalAlignment\": \"left\",\n    \"verticalAlignment\": \"middle\",\n    \"itemTextPosition\": \"right\",\n    \"paddingLeftRight\": 0,\n    \"font\": {\n      \"size\": 10,\n      \"family\": \"Varela Round\",\n      \"weight\": 800\n    }\n  },\n  \"resolveLabelOverlapping\": \"shift\"\n}","DashboardDefinitionId":"699b9142-0d2f-4538-8b53-ec714e9bab7f"},{"Id":"0cb81679-21bd-4f35-bd12-c6516bf11f86","Name":"Selected user profile","Active":true,"UseQuery":false,"Query":"","Size":4,"Order":6,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"chart\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetHeight\":220,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":true,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select\\tmetricType, userId, sum([Count]) as count\\r\\nfrom\\t(\\r\\nselect\\r\\n\\t'Logins' as metricType,\\r\\n\\tv.[userId] as userId,\\r\\n\\t(v.total * 100) / v.maxTotal as [Count]\\r\\nfrom (\\r\\n\\tselect \\r\\n\\t\\tul.[User] as userId,\\r\\n\\t\\tcount(*) as total,\\r\\n\\t\\tMax(count(*)) over () as maxTotal \\r\\n\\tfrom [UserLogon] ul\\r\\n\\twhere Year(ul.[Day]) = @year\\r\\n\\tgroup by ul.[User]\\r\\n) v\\r\\nwhere userId = @userId\\r\\nunion all\\r\\nselect\\r\\n\\t'Blocks' as metricType,\\r\\n\\tz.[userId] as userId,\\r\\n\\t(z.total * 100) / z.maxTotal as [Count]\\r\\nfrom(\\r\\n\\tselect \\r\\n\\t\\tal.[User] as userId,\\r\\n\\t\\tcount(*) as total,\\r\\n\\t\\tMax(count(*)) over () as maxTotal \\r\\n\\tfrom [AssistantLog] al\\r\\n\\twhere al.[OperationType] = 'Block' and Year(al.[UtcLogTime]) = @year\\r\\n\\tgroup by al.[User]\\r\\n) z\\r\\nwhere userId = @userId\\r\\nunion all\\r\\nselect\\r\\n\\t'Leaves' as metricType,\\r\\n\\tx.[userId] as userId,\\r\\n\\t(x.total * 100) / x.maxTotal as [Count]\\r\\nfrom (\\r\\n\\tselect \\r\\n\\t\\tad.[UserId] as userId,\\r\\n\\t\\tcount(*) as total,\\r\\n\\t\\tMax(count(*)) over () as maxTotal \\r\\n\\tfrom [Analytics].[DatamartLeave] ad\\r\\n\\twhere Year(ad.[Date]) = @year\\r\\n\\tgroup by ad.[UserId]\\r\\n\\t) x\\r\\nwhere userId = @userId\\r\\nunion all\\r\\nselect\\r\\n\\t'Timesheets' as metricType,\\r\\n\\tc.[userId] as userId,\\r\\n\\t(c.total * 100) / c.maxTotal as [Count]\\r\\nfrom (\\r\\n\\tselect \\r\\n\\t\\tt.[CreatedBy] as userId,\\r\\n\\t\\tcount(*) as total,\\r\\n\\t\\tMax(count(*)) over () as maxTotal \\r\\n\\tfrom [Timesheet] t\\r\\n\\twhere Year(t.[CreatedOn]) = @year\\r\\n\\tgroup by t.[CreatedBy]\\r\\n\\t) c\\r\\nwhere userId = @userId\\r\\nunion all\\r\\nselect\\t'Timesheets' as metricType, @userId as userId, 0 as count\\r\\nunion all\\r\\nselect 'Leaves' as metricType, @userId as userId, 0 as count\\r\\nunion all\\r\\nselect 'Blocks' as metricType, @userId as userId, 0 as count\\r\\nunion all\\r\\nselect 'Logins' as metricType, @userId as userId, 0 as count\\r\\n)t\\r\\ngroup by metricType, userId\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"userId\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"palette\": \"Material\",\r\n    \"size\": {\r\n        \"height\": 250\r\n    },\r\n    \"commonSeriesSettings\": {\r\n        \"argumentField\": \"metricType\",\r\n        \"type\": \"bar\"\r\n    },\r\n    \"series\": [\r\n        {\r\n            \"type\": \"bar\",\r\n            \"valueField\": \"count\",\r\n            \"name\": \"Type\"\r\n        }\r\n    ],\r\n    \"valueAxis\": [\r\n        {\r\n            \"label\": {\r\n                \"font\": {\r\n                    \"size\": 10,\r\n                    \"family\": \"Varela Round\",\r\n                    \"weight\": 800\r\n                }\r\n            },\r\n            \"title\": {\r\n                \"text\": \"Percentage\",\r\n                \"font\": {\r\n                    \"size\": 11,\r\n                    \"family\": \"Varela Round\",\r\n                    \"weight\": 800\r\n                }\r\n            }\r\n        }\r\n    ],\r\n    \"argumentAxis\": {\r\n        \"label\": {\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        }\r\n    },\r\n    \"customizePoint\": \"function(pointInfo) {\r\n        if(pointInfo.argument === 'Blocks') {\r\n            return { color: '#97c95c', hoverStyle: { color: '#97c95c' } }\r\n        } else if(pointInfo.argument === 'Leaves') {\r\n            return { color: '#f5564a', hoverStyle: { color: '#f5564a' } }\r\n        } else if(pointInfo.argument === 'Logins') {\r\n            return { color: '#1db2f5', hoverStyle: { color: '#1db2f5' } }\r\n        } else if(pointInfo.argument === 'Timesheets') {\r\n                return { color: '#ffc720', hoverStyle: { color: '#ffc720' } }\r\n        }\r\n    }\",\r\n    \"legend\": {\r\n        \"visible\": false,\r\n        \"verticalAlignment\": \"bottom\",\r\n        \"horizontalAlignment\": \"center\"\r\n    }\r\n}","DashboardDefinitionId":"699b9142-0d2f-4538-8b53-ec714e9bab7f"},{"Id":"57fc2232-ff34-431c-bd2d-d8181689805a","Name":"Department stats","Active":true,"UseQuery":false,"Query":"","Size":8,"Order":4,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetHeight\":220,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with logins as \\r\\n(\\r\\n\\tselect\\tu.[Oid] as idU,\\r\\n\\t\\t\\tcount(1) as countLog\\r\\n\\tfrom\\tUserLogon ul\\r\\n\\tinner join [User] u\\r\\n\\ton ul.[User] = u.[Oid]\\r\\n\\twhere Year(ul.[Day]) = @year\\r\\n\\tgroup by u.[Oid], u.[Name]\\r\\n),\\r\\nblocks as\\r\\n(\\r\\n\\tselect\\tu.[Oid] as idU,\\r\\n\\t\\t\\tcount(1) as countBlocked\\r\\n\\tfrom\\tAssistantLog al\\r\\n\\tinner join [User] u\\r\\n\\ton al.[User] = u.[Oid]\\r\\n\\twhere al.OperationType = 'Block' and Year(al.[UtcLogTime]) = @year\\r\\n\\tgroup by u.[Oid], u.[Name]\\r\\n),\\r\\nleaves as\\r\\n(\\r\\n\\tselect u.[Oid] as idU,\\r\\n\\t\\tcount(1) as countLeaves\\r\\n\\tfrom [Analytics].[DatamartLeave] ad\\r\\n\\tinner join [User] u\\r\\n\\ton u.[Oid] = ad.[UserId]\\r\\n\\twhere Year(ad.[Date]) = @year\\r\\n\\tgroup by u.[Oid], u.[Name]\\r\\n),\\r\\ntimesheetAux as\\r\\n(\\r\\n\\tselect u.[Oid] as idU,\\r\\n\\t\\tcount(1) as countTimesheets\\r\\n\\tfrom [Timesheet] t\\r\\n\\tinner join [User] u\\r\\n\\ton u.[Oid] = t.[CreatedBy]\\r\\n\\twhere Year(t.[CreatedOn]) = @year\\r\\n\\tgroup by u.[Oid], u.[Name]\\r\\n)\\r\\nselect c.[Name] as companyName, c.[Oid] as companyId, c.[HasImage] as cHasImage, di.[Name] as division, de.[Name] as department, u.[Name] as userName, u.[Oid] as userId, u.[HasImage] as uHasImage, t.[Name] as typology,\\r\\n\\t\\tIsNull(lo.countLog,0) as Logs, \\r\\n\\t\\tIsNull(b.countBlocked,0) as Blocks, \\r\\n\\t\\tIsNull(le.countLeaves,0) as Leaves,\\r\\n\\t\\tIsNull(ts.[countTimesheets], 0) as Timesheets\\r\\nfrom [Company] c, [Division] di, [Department] de, [UserTypology] t, [User] u\\r\\nfull join logins lo \\r\\non (lo.idU = u.[Oid])\\r\\nfull join blocks b\\r\\non (b.idU = u.[Oid])\\r\\nfull join leaves le\\r\\non (le.idU = u.[Oid])\\r\\nfull join timesheetAux ts\\r\\non (ts.idU = u.[Oid])\\r\\nwhere u.[Company] = c.[Oid] and u.[Division] = di.[Oid] and u.[Department] = de.[Oid] and u.[Typology] = t.[Oid]\\r\\nand (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\nand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\nand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Division\",\"Company\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n        \"onContentReady\": \"function(e){\r\n                if (e.component.instance().getDataSource() != null && e.component.instance().getDataSource().items().length > 0){\r\n                        var teste =  e.component.instance().getDataSource().items()[0].items[0].userId;\r\n                        SkillsWorkflow.setDashboardFilter('userId', teste);\r\n                }\r\n        }\",\r\n        \"stateStoring\": {\r\n                \"enabled\": false\r\n        },\r\n        \"height\": 300,\r\n        \"searchPanel\": {\r\n                \"visible\": true\r\n        },\r\n        \"columnChooser\": {\r\n                \"enabled\": false\r\n        },\r\n        \"export\": {\r\n                \"enabled\": true\r\n        },\r\n        \"groupPanel\": {\r\n                \"visible\": true\r\n        },\r\n        \"grouping\": {\r\n                \"autoExpandAll\": true\r\n        },\r\n        \"selection\": {\r\n                \"mode\": \"single\"\r\n        },\r\n        \"scrolling\": {\r\n            \"mode\": \"virtual\",\r\n            \"rowRenderingMode\": \"virtual\"\r\n        },\r\n        \"onRowClick\": \"function(e){ if(e.data.userId != null) { SkillsWorkflow.setDashboardFilter('userId', e.data.userId); } }\",\r\n        \"allowColumnReordering\": true,\r\n        \"rowAlternationEnabled\": true,\r\n        \"showBorders\": true,\r\n        \"columns\": [\r\n                {\r\n                        \"dataField\": \"department\",\r\n                        \"groupIndex\": 0\r\n                },\r\n                {\r\n                        \"dataField\": \"userId\",\r\n                        \"caption\": \"\",\r\n                        \"format\": \"#,##0\",\r\n                        \"cellTemplate\": \"function(e, i) {SK.showImage(e, 'user', 'small',i.data['uHasImage'], i.data['userName'], i.data['userId'])}\",\r\n                        \"width\": 30\r\n                },\r\n                {\r\n                        \"dataField\": \"userName\",\r\n                        \"name\": \"Name\",\r\n                        \"caption\": \"Name\"\r\n                },\r\n                {\r\n                        \"dataField\": \"companyId\",\r\n                        \"caption\": \"\",\r\n                        \"format\": \"#,##0\",\r\n                        \"cellTemplate\": \"function(e, i) { SK.showImage(e, 'company', 'small',i.data['cHasImage'], i.data['companyName'], i.data['companyId'])}\",\r\n                        \"width\": 30\r\n                },\r\n                {\r\n                        \"dataField\": \"companyName\",\r\n                        \"name\": \"Company\",\r\n                        \"caption\": \"Company\"\r\n                },\r\n                {\r\n                        \"dataField\": \"division\",\r\n                        \"name\": \"Division\",\r\n                        \"caption\": \"Division\"\r\n                },\r\n                {\r\n                        \"dataField\": \"typology\",\r\n                        \"name\": \"Typology\",\r\n                        \"caption\": \"Typology\"\r\n                },\r\n                {\r\n                        \"dataField\": \"Logs\",\r\n                        \"name\": \"Logs\",\r\n                        \"caption\": \"Logins\",\r\n                        \"alignment\": \"center\",\r\n                        \"format\": \"#,##0\",\r\n                        \"cellTemplate\": \"function(e, i) { SW.setRAG(e, i.value, i.value <= 0, i.value >= 1 && i.value <= 2, i.value > 2); }\"\r\n                },\r\n                {\r\n                        \"dataField\": \"Blocks\",\r\n                        \"name\": \"Blocks\",\r\n                        \"caption\": \"Blocked\",\r\n                        \"alignment\": \"center\",\r\n                        \"format\": \"#,##0\",\r\n                        \"cellTemplate\": \"function(e, i) { SW.setRAG(e, i.value, i.value > 2, i.value >= 1 && i.value <= 2, i.value <= 0); }\"\r\n                },\r\n                {\r\n                        \"dataField\": \"Leaves\",\r\n                        \"name\": \"Leaves\",\r\n                        \"caption\": \"Leaves\",\r\n                        \"alignment\": \"center\",\r\n                        \"format\": \"#,##0\",\r\n                        \"cellTemplate\": \"function(e, i) { SW.setRAG(e, i.value, i.value <= 0, i.value > 0 && i.value <= 50, i.value > 50); }\"\r\n                },\r\n                {\r\n                        \"dataField\": \"Timesheets\",\r\n                        \"name\": \"Timesheets\",\r\n                        \"caption\": \"Timesheets\",\r\n                        \"alignment\": \"center\",\r\n                        \"format\": \"#,##0\",\r\n                        \"cellTemplate\": \"function(e, i) { SW.setRAG(e, i.value, i.value <= 0, i.value > 0 && i.value <= 50, i.value > 50); }\"\r\n                }\r\n        ],\r\n        \"summary\": {\r\n                \"totalItems\": [\r\n                        {\r\n                                \"column\": \"userName\",\r\n                                \"summaryType\": \"count\",\r\n                                \"displayFormat\": \"{0}\",\r\n                                \"valueFormat\": \"#,##0\"\r\n                        },\r\n                        {\r\n                                \"column\": \"Logs\",\r\n                                \"summaryType\": \"sum\",\r\n                                \"displayFormat\": \"{0}\",\r\n                                \"valueFormat\": \"#,##0\"\r\n                        },\r\n                        {\r\n                                \"column\": \"Blocks\",\r\n                                \"summaryType\": \"sum\",\r\n                                \"displayFormat\": \"{0}\",\r\n                                \"valueFormat\": \"#,##0\"\r\n                        },\r\n                        {\r\n                                \"column\": \"Leaves\",\r\n                                \"summaryType\": \"sum\",\r\n                                \"displayFormat\": \"{0}\",\r\n                                \"valueFormat\": \"#,##0\"\r\n                        },\r\n                        {\r\n                                \"column\": \"Timesheets\",\r\n                                \"summaryType\": \"sum\",\r\n                                \"displayFormat\": \"{0}\",\r\n                                \"valueFormat\": \"#,##0\"\r\n                        }\r\n                ]\r\n        }\r\n}","DashboardDefinitionId":"699b9142-0d2f-4538-8b53-ec714e9bab7f"},{"Id":"eb977984-6c25-4d62-b636-d9a80727b095","Name":"","Active":true,"UseQuery":false,"Query":"","Size":4,"Order":2,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"chart\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":150,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with leaves as\\r\\n(\\r\\n\\tselect convert(Date, ad.[Date]) as date, count(1) as countLeave\\r\\n\\tfrom  [Analytics].[DatamartLeave] ad\\r\\n\\tinner join [User] u\\r\\n\\ton u.[Oid] = ad.[UserId]\\r\\n\\twhere Year(ad.[Date]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by convert(Date, ad.[Date])\\r\\n),\\r\\ntimesheetAux as \\r\\n(\\r\\n\\tselect convert(Date, t.[CreatedOn]) as date, count(1) as countTimesheet\\r\\n\\tfrom [Timesheet] t\\r\\n\\tinner join [User] u\\r\\n\\ton u.[Oid] = t.[CreatedBy]\\r\\n\\twhere Year(t.[CreatedOn]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by convert(Date, t.[CreatedOn])\\r\\n),\\r\\ngetDat as\\r\\n(\\r\\n\\tselect l.date\\r\\n\\tfrom leaves l\\r\\n\\tunion \\r\\n\\tselect t.date\\r\\n\\tfrom timesheetAux t\\r\\n),\\r\\nmaintable as\\r\\n(\\r\\n\\tselect gd.[date] as date,\\r\\n\\t\\tIsNull(l.countLeave, 0) as countLeave,\\r\\n\\t\\tIsNull(t.countTimesheet, 0) as countTimesheet\\r\\n\\tfrom [getDat] gd\\r\\n\\tfull join leaves l\\r\\n\\ton l.date = gd.date\\r\\n\\tfull join timesheetAux t\\r\\n\\ton t.date = gd.date\\r\\n),\\r\\ntotal as\\r\\n(\\r\\n\\tselect sum(m.[countLeave]) as totalLeave,\\r\\n\\t\\t\\tsum(m.[countTimesheet]) as totalTimesheet,\\r\\n\\t\\t\\tMonth(m.[date]) as month\\r\\n\\tfrom [maintable] m\\r\\n\\tgroup by Month(m.[date])\\r\\n),\\r\\naverages as\\r\\n(\\r\\n\\tselect (t.[totalLeave]/22) as averageLeave, \\r\\n\\t\\t\\t(t.[totalTimesheet]/22) as averageTimesheet,\\r\\n\\t\\t\\tt.[month] as month\\r\\n\\tfrom [total] t\\r\\n\\tgroup by t.[month], (t.[totalLeave]/22), (t.[totalTimesheet]/22)\\r\\n)\\r\\nselect m.[date] as date, m.[countLeave] as countLeave, m.[countTimesheet] as countTimesheet,\\r\\n\\t\\ta.[averageLeave] as averageLeave, a.[averageTimesheet] as averageTimesheet,\\r\\n\\t\\tt.[totalLeave] as totalLeave, t.[totalTimesheet] as totalTimesheet\\r\\nfrom [maintable] m\\r\\nfull join [averages] a\\r\\non Month(m.[date]) = a.[month]\\r\\nfull join [total] t\\r\\non Month(m.[date]) = t.[month]\\r\\norder by m.[date]\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Company\",\"Division\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{ \r\n    \"size\": {\r\n        \"height\": 240\r\n    },\r\n    \"commonSeriesSettings\": {\r\n        \"argumentField\": \"date\",\r\n        \"type\": \"splinearea\",\r\n        \"label\":{\r\n            \"font\": {\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        }\r\n    },\r\n    \"panes\": [{\r\n        \"name\": \"paneLeave\"\r\n    },{\r\n        \"name\": \"paneTimesheet\"\r\n    }],\r\n    \"defaultPane\": \"paneTimesheet\",\r\n    \"series\": [{\r\n        \"pane\": \"paneLeave\",\r\n        \"type\": \"splinearea\",\r\n        \"valueField\": \"countLeave\",\r\n        \"name\": \"Leaves\"\r\n    },{\r\n        \"pane\": \"paneLeave\",\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"averageLeave\",\r\n        \"name\": \"Average\",\r\n        \"width\": 1.5\r\n    },{\r\n        \"pane\": \"paneLeave\",\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"totalLeave\",\r\n        \"axis\": \"total\",\r\n        \"name\": \"Total\",\r\n        \"width\": 1.5\r\n    },{\r\n        \"pane\": \"paneTimesheet\",\r\n        \"type\": \"splinearea\",\r\n        \"valueField\": \"countTimesheet\",\r\n        \"name\": \"Timesheets\"\r\n    },{\r\n        \"pane\": \"paneTimesheet\",\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"averageTimesheet\",\r\n        \"name\": \"Average\",\r\n        \"width\": 1.5\r\n    },{\r\n        \"pane\": \"paneTimesheet\",\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"totalTimesheet\",\r\n        \"axis\": \"total\",\r\n        \"name\": \"Total\",\r\n        \"width\": 1.5\r\n    }],    \r\n    \"valueAxis\": [{\r\n        \"pane\": \"paneTimesheet\",\r\n        \"autoBreaksEnabled1\": true,\r\n        \"axisDivisionFactor1\": 15,\r\n        \"breakStyle1\": {\r\n            \"color\": \"#ababab\",\r\n            \"line\": \"straight\",\r\n            \"width\": 2\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        },\r\n        \"label\": {\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"title\": {\r\n            \"text\": \"Timesheets\",\r\n            \"font\": {\r\n                \"size\": 11,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        }\r\n    },{\r\n        \"pane\": \"paneLeave\",\r\n        \"autoBreaksEnabled1\": true,\r\n        \"axisDivisionFactor1\": 15,\r\n        \"breakStyle1\": {\r\n            \"color\": \"#ababab\",\r\n            \"line\": \"straight\",\r\n            \"width\": 2\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        },\r\n        \"label\": {\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"title\": {\r\n            \"text\": \"Leaves\",\r\n            \"font\": {\r\n                \"size\": 11,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        }\r\n    },{\r\n        \"name\": \"total\",\r\n        \"position\": \"right\",\r\n        \"autoBreaksEnabled1\": true,\r\n        \"axisDivisionFactor1\": 15,\r\n        \"breakStyle1\": {\r\n            \"color\": \"#ababab\",\r\n            \"line\": \"straight\",\r\n            \"width\": 2\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        },\r\n        \"label\": {\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"title\": {\r\n            \"text\": \"Total\",\r\n            \"font\": {\r\n                \"size\": 11,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        }\r\n    }],\r\n    \"argumentAxis\": {\r\n        \"argumentType\": \"datetime\",\r\n        \"label\": {\r\n            \"format\": \"function (value) {return value.getMonth();}\",\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"tickInterval\": {\r\n            \"months\": 1\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        }\r\n    },\r\n    \"legend\": {\r\n        \"visible\": false,\r\n        \"verticalAlignment\": \"bottom\",\r\n        \"horizontalAlignment\": \"center\"\r\n    }\r\n}","DashboardDefinitionId":"699b9142-0d2f-4538-8b53-ec714e9bab7f"},{"Id":"14170997-0d78-46ab-8b14-dc408aba4869","Name":"Top 10 (log)","Active":true,"UseQuery":false,"Query":null,"Size":4,"Order":6,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"pie\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":200,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"showSubTitle\":false,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select top 10 u.[Name] as userName, count(u.[Name]) as count, u.[Oid] as userId\\r\\nfrom [User] u, [UserLogon] ul\\r\\nwhere ul.[User] = u.[Oid] and Year(ul.[Day]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n                                                                and (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n                                                                and (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\ngroup by u.[Name], u.[Oid]\\r\\norder by count(u.[Name]) desc\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Division\",\"Company\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_ExecutionStatus_Per_Client/execute","Configuration":"{\n  \"palette\": \"Material\",\n  \"type\": \"doughnut\",\n  \"series\": [\n    {\n      \"argumentField\": \"userName\",\n      \"valueField\": \"count\",\n      \"label\": {\n        \"visible\": true,\n        \"format\": \"fixedPoint\",\n        \"font\": {\n          \"family\": \"Varela Round\",\n          \"weight\": 800\n        },\n        \"connector\": {\n          \"visible\": true,\n          \"width\": 1\n        },\n        \"customizeText\": \"function(arg) { return arg.percentText; }\"\n      }\n    }\n  ],\n  \"commonSeriesSettings\": {\n   \"smallValuesGrouping\": {\n      \"mode\": \"topN\",\n      \"topCount\": 10,\n      \"groupName\": \"Others\"\n    }\n  },\n  \"size\": {\n    \"height\": 250\n  },\n  \"legend\": {\n    \"visible\": true,\n    \"horizontalAlignment\": \"left\",\n    \"verticalAlignment\": \"middle\",\n    \"itemTextPosition\": \"right\",\n    \"paddingLeftRight\": 0,\n    \"font\": {\n      \"size\": 10,\n      \"family\": \"Varela Round\",\n      \"weight\": 800\n    }\n  },\n  \"resolveLabelOverlapping\": \"shift\"\n}","DashboardDefinitionId":"699b9142-0d2f-4538-8b53-ec714e9bab7f"}]}
