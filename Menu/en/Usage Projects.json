{"DashboardDefinitionRoles":[],"Id":"dd50be31-4429-4e5f-9792-d21ac456d735","Name":"Usage Projects","Active":true,"Location":0,"DocumentId":"4b1a7f25-257c-419c-92cd-7c7232cb90a8","DocumentName":"CommercialClientProduct","DocumentsConfiguration":"{\"type\":\"\",\"operations\":{\"read\":{\"endpoint\":\"\"},\"update\":{\"endpoint\":\"\",\"model\":{}},\"create\":{\"endpoint\":\"\",\"model\":{}},\"patch\":{\"endpoint\":\"\",\"patchModel\":[{\"model\":\"\",\"translation\":\"\",\"type\":\"\"}]},\"remove\":{\"endpoint\":\"\"},\"lookup\":{\"endpoint\":\"\"}},\"layout\":{\"create\":{},\"read\":{}},\"customDocument\":{\"useCustomStyle\":false,\"mainColor\":\"\",\"secondaryColor\":\"\",\"imageClass\":\"\",\"namePlural\":\"\",\"name\":\"\",\"systemName\":\"\"},\"availableOptions\":{\"feed\":false,\"info\":true,\"files\":false,\"userfields\":false,\"dashboard\":false}}","Templates":[],"DashboardDefinitionComponents":[{"Id":"b838110a-3f25-4276-82a9-1644ab97f32b","Name":"Top 10 creators","Active":true,"UseQuery":false,"Query":null,"Size":4,"Order":8,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"pie\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":200,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"showSubTitle\":false,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select top 10 aux.name as Name, count(aux.Name) as count\\r\\nfrom (\\r\\n\\tselect u.[Name] as name\\r\\n\\tfrom [User] u\\r\\n\\tinner join [Deliverable] d\\r\\n\\ton u.[Oid] = d.[CreatedBy] and Year(d.[CreatedOn]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n                                                         and (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n                                                         and (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tunion all\\r\\n\\tselect u.[Name] as name\\r\\n\\tfrom [User] u\\r\\n\\tinner join [Project] p\\r\\n\\ton u.[Oid] = p.[CreatedBy] and Year(p.[CreatedOn]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n                                                         and (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n                                                         and (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tunion all\\r\\n\\tselect u.[Name] as name\\r\\n\\tfrom [User] u\\r\\n\\tinner join [Estimate] es\\r\\n\\ton u.[Oid] = es.[CreatedBy] and Year(es.[CreatedOn]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n                                                           and (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n                                                           and (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tunion all\\r\\n\\tselect u.[Name] as name\\r\\n\\tfrom [User] u\\r\\n\\tinner join [Expense] ex\\r\\n\\ton u.[Oid] = ex.[CreatedBy] and Year(ex.[CreatedOn]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n                                                           and (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n                                                           and (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tunion all\\r\\n\\tselect u.[Name] as name\\r\\n\\tfrom [User] u\\r\\n\\tinner join [CommercialClient] c\\r\\n\\ton u.[Oid] = c.[CreatedBy] and Year(c.[CreatedOn]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n                                                         and (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n                                                         and (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\t) aux\\r\\ngroup by aux.Name\\r\\norder by count(aux.Name) desc\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Division\",\"Company\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_ExecutionStatus_Per_Client/execute","Configuration":"{\n  \"type\": \"doughnut\",\n  \"series\": [\n    {\n      \"argumentField\": \"Name\",\n      \"valueField\": \"count\",\n      \"label\": {\n        \"visible\": true,\n        \"font\": {\n          \"family\": \"Varela Round\",\n          \"weight\": 800\n        },\n        \"customizeText\": \"function(arg) { return arg.percentText; }\"\n      }\n    }\n  ],\n  \"commonSeriesSettings\": {\n    \"label\": {\n      \"visible\": false,\n      \"format\": \"fixedPoint\",\n      \"connector\": {\n        \"visible\": false,\n        \"width\": 1\n      }\n    },\n    \"smallValuesGrouping\": {\n      \"mode\": \"topN\",\n      \"topCount\": 10,\n      \"groupName\": \"Others\"\n    }\n  },\n  \"size\": {\n    \"height\": 250\n  },\n  \"tooltip\": {\n    \"enabled\": true,\n    \"customizeText\": \"function (e) {return e.argumentText;}\"\n  },\n  \"legend\": {\n    \"visible\": true,\n    \"horizontalAlignment\": \"left\",\n    \"verticalAlignment\": \"middle\",\n    \"itemTextPosition\": \"right\",\n    \"paddingLeftRight\": 0,\n    \"font\": {\n      \"size\": 10,\n      \"family\": \"Varela Round\",\n      \"weight\": 800\n    }\n  },\n  \"resolveLabelOverlapping\": \"shift\"\n}","DashboardDefinitionId":"dd50be31-4429-4e5f-9792-d21ac456d735"},{"Id":"a0277b91-5680-4e74-9870-45443f66723e","Name":"","Active":true,"UseQuery":false,"Query":"","Size":3,"Order":2,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"chart\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":50,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with cntProj as \\r\\n(\\r\\n\\tselect Convert(Date, p.[CreatedOn]) as date, \\r\\n\\t\\t\\tcount(1) as countProj\\r\\n\\tfrom [Project] p\\r\\n\\tinner join [User] u\\r\\n\\ton u.[Oid] = p.[CreatedBy]\\r\\n\\twhere Year(p.[CreatedOn]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by Convert(Date, p.[CreatedOn])\\r\\n),\\r\\ncntAssign as \\r\\n(\\r\\n\\tselect convert(date, a.[AssignDate]) as date, \\r\\n\\t\\tcount(1) as countAssign\\r\\n\\tfrom [Assignment] a\\r\\n\\tinner join [User] u\\r\\n\\ton u.[Oid] = a.[User]\\r\\n\\twhere a.DocumentTypeName = 'Skill.Module.BusinessObjects.Deliverable'\\r\\n\\tand YEAR(a.AssignDate) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by convert(date, a.AssignDate)\\r\\n),\\r\\ngetDat as \\r\\n(\\r\\n\\tselect cp.date\\r\\n\\tfrom cntProj cp\\r\\n\\tunion\\r\\n\\tselect ca.date\\r\\n\\tfrom cntAssign ca\\r\\n),\\r\\nmaintable as \\r\\n(\\r\\n\\tselect gd.[date] as date,\\r\\n\\t\\tIsNull(ca.countAssign, 0) as countAssign,\\r\\n\\t\\tIsNull(cp.countProj, 0) as countProj\\r\\n\\tfrom [getDat] gd\\r\\n\\tfull join cntAssign ca\\r\\n\\ton ca.date = gd.[date]\\r\\n\\tfull join cntProj cp\\r\\n\\ton cp.date = gd.[date]\\r\\n),\\r\\ntotal as\\r\\n(\\r\\n\\tselect sum(m.[countProj]) as totalProj,\\r\\n\\t\\t\\tsum(m.[countAssign]) as totalAssign,\\r\\n\\t\\t\\tMonth(m.[date]) as month\\r\\n\\tfrom [maintable] m\\r\\n\\tgroup by Month(m.[date])\\r\\n),\\r\\naverages as\\r\\n(\\r\\n\\tselect (t.[totalProj]/22) as averageProj,\\r\\n\\t\\t\\t(t.[totalAssign]/22) as averageAssign,\\r\\n\\t\\t\\tt.[month] as month\\r\\n\\tfrom [total] t\\r\\n\\tgroup by t.[month], (t.[totalProj]/22), (t.[totalAssign]/22)\\r\\n)\\r\\nselect m.[date] as date, m.[countProj] as countProj, m.[countAssign] as countJob,\\r\\n\\t\\ta.[averageProj] as averageProj, a.[averageAssign] as averageJob,\\r\\n\\t\\tt.[totalProj] as totalProj, t.[totalAssign] as totalJob\\r\\nfrom [maintable] m\\r\\nfull join [averages] a\\r\\non Month(m.[date]) = a.[month]\\r\\nfull join [total] t\\r\\non Month(m.[date]) = t.[month]\\r\\norder by m.[date]\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Company\",\"Division\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{ \r\n    \"palette\": \"Material\",\r\n    \"size\": {\r\n        \"height\": 120\r\n    },\r\n    \"commonSeriesSettings\": {\r\n        \"argumentField\": \"date\",\r\n        \"type\": \"splinearea\"\r\n    },\r\n    \r\n    \"defaultPane\": \"paneJobs\",\r\n    \"series\": [{\r\n        \"type\": \"splinearea\",\r\n        \"valueField\": \"countJob\",\r\n        \"name\": \"Jobs\"\r\n    },{\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"averageJob\",\r\n        \"name\": \"Average\",\r\n        \"width\": 1.5\r\n    },{\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"totalJob\",\r\n        \"name\": \"Total\",\r\n        \"width\": 1.5\r\n    }],    \r\n    \"valueAxis\": [\r\n        {\r\n        \"autoBreaksEnabled\": true,\r\n        \"axisDivisionFactor\": 15,\r\n        \"breakStyle\": {\r\n            \"color\": \"#ababab\",\r\n            \"line\": \"straight\",\r\n            \"width\": 2\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        },\r\n        \"label\": {\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"title\": {\r\n            \"text\": \"Jobs\",\r\n            \"font\": {\r\n                \"size\": 11,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        }\r\n    }],\r\n    \"argumentAxis\": {\r\n        \"argumentType\": \"datetime\",\r\n        \"label\": {\r\n            \"format\": \"function (value) {return value.getMonth();}\",\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"tickInterval\": {\r\n            \"months\": 1\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        }\r\n    },\r\n    \"legend\": {\r\n        \"visible\": false,\r\n        \"verticalAlignment\": \"bottom\",\r\n        \"horizontalAlignment\": \"center\"\r\n    }\r\n}","DashboardDefinitionId":"dd50be31-4429-4e5f-9792-d21ac456d735"},{"Id":"1aa2b35b-989a-4b57-963d-475913361167","Name":"","Active":true,"UseQuery":false,"Query":"","Size":3,"Order":3,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"chart\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":50,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with cntComment as\\r\\n(\\r\\n\\tselect convert(Date, p.[CreatedOnUtc]) as date,\\r\\n\\t\\t\\tcount(1) as countComent\\r\\n\\tfrom [Post] p\\r\\n\\tinner join [User] u\\r\\n\\ton u.[Oid] = p.[CreatedBy]\\r\\n\\twhere Year(p.[CreatedOnUtc]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by convert(Date, p.[CreatedOnUtc])\\r\\n),\\r\\ncntAssign as\\r\\n(\\r\\n\\tselect convert(date, a.[AssignDate]) as date, \\r\\n\\t\\tcount(1) as countAssign\\r\\n\\tfrom [Assignment] a\\r\\n\\tinner join [User] u\\r\\n\\ton u.[Oid] = a.[User]\\r\\n\\tand YEAR(a.AssignDate) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by convert(date, a.AssignDate)\\r\\n),\\r\\ngetDat as\\r\\n(\\r\\n\\tselect cc.[date]\\r\\n\\tfrom [cntComment] cc\\r\\n\\tunion\\r\\n\\tselect ca.[date]\\r\\n\\tfrom [cntAssign] ca\\r\\n),\\r\\nmaintable as\\r\\n(\\r\\n\\tselect gd.[date] as date,\\r\\n\\t\\tIsNull(ca.countAssign, 0) as countAssign,\\r\\n\\t\\tIsNull(cc.countComent, 0) as countComment\\r\\n\\tfrom [getDat] gd\\r\\n\\tfull join [cntComment] cc\\r\\n\\ton cc.date = gd.[date]\\r\\n\\tfull join [cntAssign] ca\\r\\n\\ton ca.date = gd.[date]\\r\\n),\\r\\ntotal as\\r\\n(\\r\\n\\tselect sum(m.[countComment]) as totalComment,\\r\\n\\t\\t\\tsum(m.[countAssign]) as totalAssign,\\r\\n\\t\\t\\tMonth(m.[date]) as month\\r\\n\\tfrom [maintable] m\\r\\n\\tgroup by Month(m.[date])\\r\\n),\\r\\naverage as\\r\\n(\\r\\n\\tselect (t.[totalComment]/22) as averageComment,\\r\\n\\t\\t\\t(t.[totalAssign]/22) as averageAssign,\\r\\n\\t\\t\\tt.[month] as month\\r\\n\\tfrom [total] t\\r\\n\\tgroup by t.[month], (t.[totalComment]/22), (t.[totalAssign]/22)\\r\\n)\\r\\nselect m.[date] as date, m.[countComment] as countComment, m.[countAssign] as countAssign,\\r\\n\\t\\ta.[averageComment] as averageComment, a.[averageAssign] as averageAssign,\\r\\n\\t\\tt.[totalComment] as totalComment, t.[totalAssign] as totalAssign\\r\\nfrom [maintable] m\\r\\nfull join [average] a\\r\\non Month(m.[date]) = a.[month]\\r\\nfull join [total] t\\r\\non Month(m.[date]) = t.[month]\\r\\norder by m.[date]\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Company\",\"Division\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{ \r\n    \"palette\": \"Material\",\r\n    \"size\": {\r\n        \"height\": 120\r\n    },\r\n    \"commonSeriesSettings\": {\r\n        \"argumentField\": \"date\",\r\n        \"type\": \"splinearea\"\r\n    },\r\n    \"series\": [{\r\n        \"type\": \"splinearea\",\r\n        \"valueField\": \"countComment\",\r\n        \"name\": \"Comments\"\r\n    },{\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"averageComment\",\r\n        \"name\": \"Average\",\r\n        \"width\": 1.5\r\n    },{\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"totalComment\",\r\n        \"name\": \"Total\",\r\n        \"width\": 1.5\r\n    }],    \r\n    \"valueAxis\": [\r\n        {\r\n        \"autoBreaksEnabled\": true,\r\n        \"axisDivisionFactor\": 15,\r\n        \"breakStyle\": {\r\n            \"color\": \"#ababab\",\r\n            \"line\": \"straight\",\r\n            \"width\": 2\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        },\r\n        \"label\": {\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"title\": {\r\n            \"text\": \"Comments\",\r\n            \"font\": {\r\n                \"size\": 11,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        }\r\n    }],\r\n    \"argumentAxis\": {\r\n        \"argumentType\": \"datetime\",\r\n        \"label\": {\r\n            \"format\": \"function (value) {return value.getMonth();}\",\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"tickInterval\": {\r\n            \"months\": 1\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        }\r\n    },\r\n    \"legend\": {\r\n        \"visible\": false,\r\n        \"verticalAlignment\": \"bottom\",\r\n        \"horizontalAlignment\": \"center\"\r\n    }\r\n}","DashboardDefinitionId":"dd50be31-4429-4e5f-9792-d21ac456d735"},{"Id":"a3e918ad-102f-4e1e-97fd-5ba3b51f08b2","Name":"","Active":true,"UseQuery":false,"Query":"","Size":3,"Order":4,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"chart\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":50,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with cntComment as\\r\\n(\\r\\n\\tselect convert(Date, p.[CreatedOnUtc]) as date,\\r\\n\\t\\t\\tcount(1) as countComent\\r\\n\\tfrom [Post] p\\r\\n\\tinner join [User] u\\r\\n\\ton u.[Oid] = p.[CreatedBy]\\r\\n\\twhere Year(p.[CreatedOnUtc]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by convert(Date, p.[CreatedOnUtc])\\r\\n),\\r\\ncntAssign as\\r\\n(\\r\\n\\tselect convert(date, a.[AssignDate]) as date, \\r\\n\\t\\tcount(1) as countAssign\\r\\n\\tfrom [Assignment] a\\r\\n\\tinner join [User] u\\r\\n\\ton u.[Oid] = a.[User]\\r\\n\\tand YEAR(a.AssignDate) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by convert(date, a.AssignDate)\\r\\n),\\r\\ngetDat as\\r\\n(\\r\\n\\tselect cc.[date]\\r\\n\\tfrom [cntComment] cc\\r\\n\\tunion\\r\\n\\tselect ca.[date]\\r\\n\\tfrom [cntAssign] ca\\r\\n),\\r\\nmaintable as\\r\\n(\\r\\n\\tselect gd.[date] as date,\\r\\n\\t\\tIsNull(ca.countAssign, 0) as countAssign,\\r\\n\\t\\tIsNull(cc.countComent, 0) as countComment\\r\\n\\tfrom [getDat] gd\\r\\n\\tfull join [cntComment] cc\\r\\n\\ton cc.date = gd.[date]\\r\\n\\tfull join [cntAssign] ca\\r\\n\\ton ca.date = gd.[date]\\r\\n),\\r\\ntotal as\\r\\n(\\r\\n\\tselect sum(m.[countComment]) as totalComment,\\r\\n\\t\\t\\tsum(m.[countAssign]) as totalAssign,\\r\\n\\t\\t\\tMonth(m.[date]) as month\\r\\n\\tfrom [maintable] m\\r\\n\\tgroup by Month(m.[date])\\r\\n),\\r\\naverage as\\r\\n(\\r\\n\\tselect (t.[totalComment]/22) as averageComment,\\r\\n\\t\\t\\t(t.[totalAssign]/22) as averageAssign,\\r\\n\\t\\t\\tt.[month] as month\\r\\n\\tfrom [total] t\\r\\n\\tgroup by t.[month], (t.[totalComment]/22), (t.[totalAssign]/22)\\r\\n)\\r\\nselect m.[date] as date, m.[countComment] as countComment, m.[countAssign] as countAssign,\\r\\n\\t\\ta.[averageComment] as averageComment, a.[averageAssign] as averageAssign,\\r\\n\\t\\tt.[totalComment] as totalComment, t.[totalAssign] as totalAssign\\r\\nfrom [maintable] m\\r\\nfull join [average] a\\r\\non Month(m.[date]) = a.[month]\\r\\nfull join [total] t\\r\\non Month(m.[date]) = t.[month]\\r\\norder by m.[date]\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Company\",\"Division\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{ \r\n    \"palette\": \"Material\",\r\n    \"size\": {\r\n        \"height\": 120\r\n    },\r\n    \"commonSeriesSettings\": {\r\n        \"argumentField\": \"date\",\r\n        \"type\": \"splinearea\"\r\n    },\r\n    \"series\": [{\r\n        \"type\": \"splinearea\",\r\n        \"valueField\": \"countAssign\",\r\n        \"name\": \"Assigns\"\r\n    },{\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"averageAssign\",\r\n        \"name\": \"Average\",\r\n        \"width\": 1.5\r\n    },{\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"totalAssign\",\r\n        \"name\": \"Total\",\r\n        \"width\": 1.5\r\n    }],    \r\n    \"valueAxis\": [\r\n        {\r\n        \"autoBreaksEnabled\": true,\r\n        \"axisDivisionFactor\": 15,\r\n        \"breakStyle\": {\r\n            \"color\": \"#ababab\",\r\n            \"line\": \"straight\",\r\n            \"width\": 2\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        },\r\n        \"label\": {\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"title\": {\r\n            \"text\": \"Assignments\",\r\n            \"font\": {\r\n                \"size\": 11,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        }\r\n    }],\r\n    \"argumentAxis\": {\r\n        \"argumentType\": \"datetime\",\r\n        \"label\": {\r\n            \"format\": \"function (value) {return value.getMonth();}\",\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"tickInterval\": {\r\n            \"months\": 1\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        }\r\n    },\r\n    \"legend\": {\r\n        \"visible\": false,\r\n        \"verticalAlignment\": \"bottom\",\r\n        \"horizontalAlignment\": \"center\"\r\n    }\r\n}","DashboardDefinitionId":"dd50be31-4429-4e5f-9792-d21ac456d735"},{"Id":"7391ef56-7914-498b-ac58-5f589cf64069","Name":"Activity over the year","Active":true,"UseQuery":false,"Query":"","Size":3,"Order":1,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"chart\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":50,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with cntProj as \\r\\n(\\r\\n\\tselect Convert(Date, p.[CreatedOn]) as date, \\r\\n\\t\\t\\tcount(1) as countProj\\r\\n\\tfrom [Project] p\\r\\n\\tinner join [User] u\\r\\n\\ton u.[Oid] = p.[CreatedBy]\\r\\n\\twhere Year(p.[CreatedOn]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by Convert(Date, p.[CreatedOn])\\r\\n),\\r\\ncntAssign as \\r\\n(\\r\\n\\tselect convert(date, a.[AssignDate]) as date, \\r\\n\\t\\tcount(1) as countAssign\\r\\n\\tfrom [Assignment] a\\r\\n\\tinner join [User] u\\r\\n\\ton u.[Oid] = a.[User]\\r\\n\\twhere a.DocumentTypeName = 'Skill.Module.BusinessObjects.Deliverable'\\r\\n\\tand YEAR(a.AssignDate) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n\\t\\t\\t\\t\\t\\t\\t\\tand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\n\\tgroup by convert(date, a.AssignDate)\\r\\n),\\r\\ngetDat as \\r\\n(\\r\\n\\tselect cp.date\\r\\n\\tfrom cntProj cp\\r\\n\\tunion\\r\\n\\tselect ca.date\\r\\n\\tfrom cntAssign ca\\r\\n),\\r\\nmaintable as \\r\\n(\\r\\n\\tselect gd.[date] as date,\\r\\n\\t\\tIsNull(ca.countAssign, 0) as countAssign,\\r\\n\\t\\tIsNull(cp.countProj, 0) as countProj\\r\\n\\tfrom [getDat] gd\\r\\n\\tfull join cntAssign ca\\r\\n\\ton ca.date = gd.[date]\\r\\n\\tfull join cntProj cp\\r\\n\\ton cp.date = gd.[date]\\r\\n),\\r\\ntotal as\\r\\n(\\r\\n\\tselect sum(m.[countProj]) as totalProj,\\r\\n\\t\\t\\tsum(m.[countAssign]) as totalAssign,\\r\\n\\t\\t\\tMonth(m.[date]) as month\\r\\n\\tfrom [maintable] m\\r\\n\\tgroup by Month(m.[date])\\r\\n),\\r\\naverages as\\r\\n(\\r\\n\\tselect (t.[totalProj]/22) as averageProj,\\r\\n\\t\\t\\t(t.[totalAssign]/22) as averageAssign,\\r\\n\\t\\t\\tt.[month] as month\\r\\n\\tfrom [total] t\\r\\n\\tgroup by t.[month], (t.[totalProj]/22), (t.[totalAssign]/22)\\r\\n)\\r\\nselect m.[date] as date, m.[countProj] as countProj, m.[countAssign] as countJob,\\r\\n\\t\\ta.[averageProj] as averageProj, a.[averageAssign] as averageJob,\\r\\n\\t\\tt.[totalProj] as totalProj, t.[totalAssign] as totalJob\\r\\nfrom [maintable] m\\r\\nfull join [averages] a\\r\\non Month(m.[date]) = a.[month]\\r\\nfull join [total] t\\r\\non Month(m.[date]) = t.[month]\\r\\norder by m.[date]\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Company\",\"Division\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{ \r\n    \"palette\": \"Material\",\r\n    \"size\": {\r\n        \"height\": 120\r\n    },\r\n    \"commonSeriesSettings\": {\r\n        \"argumentField\": \"date\",\r\n        \"type\": \"splinearea\"\r\n    },\r\n    \"defaultPane\": \"paneJobs\",\r\n    \"series\": [{\r\n        \"type\": \"splinearea\",\r\n        \"valueField\": \"countProj\",\r\n        \"name\": \"Projects\"\r\n    },{\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"averageProj\",\r\n        \"name\": \"Average\",\r\n        \"width\": 1.5\r\n    },{\r\n        \"type\": \"spline\",\r\n        \"valueField\": \"totalProj\",\r\n        \"name\": \"Total\",\r\n        \"width\": 1.5\r\n    }],    \r\n    \"valueAxis\": [\r\n        {\r\n        \"autoBreaksEnabled\": true,\r\n        \"axisDivisionFactor\": 15,\r\n        \"breakStyle\": {\r\n            \"color\": \"#ababab\",\r\n            \"line\": \"straight\",\r\n            \"width\": 2\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        },\r\n        \"label\": {\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"title\": {\r\n            \"text\": \"Projects\",\r\n            \"font\": {\r\n                \"size\": 11,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        }\r\n    }],\r\n    \"argumentAxis\": {\r\n        \"argumentType\": \"datetime\",\r\n        \"label\": {\r\n            \"format\": \"function (value) {return value.getMonth();}\",\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        },\r\n        \"tickInterval\": {\r\n            \"months\": 1\r\n        },\r\n        \"grid\": {\r\n            \"visible\": true\r\n        }\r\n    },\r\n    \"legend\": {\r\n        \"visible\": false,\r\n        \"verticalAlignment\": \"bottom\",\r\n        \"horizontalAlignment\": \"center\"\r\n    }\r\n}","DashboardDefinitionId":"dd50be31-4429-4e5f-9792-d21ac456d735"},{"Id":"ec1c0a50-9070-40b2-aa27-8d9fadbc5157","Name":"Selected user profile","Active":true,"UseQuery":false,"Query":"","Size":4,"Order":6,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"chart\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetHeight\":220,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":true,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select\\tmetricType, userId, sum([Count]) as count\\r\\nfrom\\t(\\r\\nselect\\r\\n\\t'Projects' as metricType,\\r\\n\\tv.[userId] as userId,\\r\\n\\t(v.total * 100) / v.maxTotal as [Count]\\r\\nfrom (\\r\\n\\tselect \\r\\n\\t\\tp.[CreatedBy] as userId,\\r\\n\\t\\tcount(*) as total,\\r\\n\\t\\tMax(count(*)) over () as maxTotal \\r\\n\\tfrom [Project] p\\r\\n\\twhere Year(p.[CreatedOn]) = @year\\r\\n\\tgroup by p.[CreatedBy]\\r\\n) v\\r\\nwhere userId = @userId\\r\\nunion all\\r\\nselect\\r\\n\\t'Jobs' as metricType,\\r\\n\\tz.[userId] as userId,\\r\\n\\t(z.total * 100) / z.maxTotal as [Count]\\r\\nfrom(\\r\\n\\tselect \\r\\n\\t\\ta.[User] as userId,\\r\\n\\t\\tcount(*) as total,\\r\\n\\t\\tMax(count(*)) over () as maxTotal \\r\\n\\tfrom [Assignment] a\\r\\n\\twhere a.[DocumentTypeName] = 'Skill.Module.BusinessObjects.Deliverable' and Year(a.[AssignDate]) = @year\\r\\n\\tgroup by a.[User]\\r\\n) z\\r\\nwhere userId = @userId\\r\\nunion all\\r\\nselect\\r\\n\\t'Comments' as metricType,\\r\\n\\tx.[userId] as userId,\\r\\n\\t(x.total * 100) / x.maxTotal as [Count]\\r\\nfrom (\\r\\n\\tselect \\r\\n\\t\\tc.[Creator] as userId,\\r\\n\\t\\tcount(*) as total,\\r\\n\\t\\tMax(count(*)) over () as maxTotal \\r\\n\\tfrom [Comment] c\\r\\n\\twhere Year(c.[CreateDate]) = @year\\r\\n\\tgroup by c.[Creator]\\r\\n\\t) x\\r\\nwhere userId = @userId\\r\\nunion all\\r\\nselect\\r\\n\\t'Assignments' as metricType,\\r\\n\\tc.[userId] as userId,\\r\\n\\t(c.total * 100) / c.maxTotal as [Count]\\r\\nfrom (\\r\\n\\tselect \\r\\n\\t\\ta.[User] as userId,\\r\\n\\t\\tcount(*) as total,\\r\\n\\t\\tMax(count(*)) over () as maxTotal \\r\\n\\tfrom [Assignment] a\\r\\n\\twhere Year(a.[AssignDate]) = @year\\r\\n\\tgroup by a.[User]\\r\\n\\t) c\\r\\nwhere userId = @userId\\r\\nunion all\\r\\nselect\\t'Assignments' as metricType, @userId as userId, 0 as count\\r\\nunion all\\r\\nselect 'Comments' as metricType, @userId as userId, 0 as count\\r\\nunion all\\r\\nselect 'Jobs' as metricType, @userId as userId, 0 as count\\r\\nunion all\\r\\nselect 'Projects' as metricType, @userId as userId, 0 as count\\r\\n)t\\r\\ngroup by metricType, userId\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"userId\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"palette\": \"Material\",\r\n    \"size\": {\r\n        \"height\": 250\r\n    },\r\n    \"commonSeriesSettings\": {\r\n        \"argumentField\": \"metricType\",\r\n        \"type\": \"bar\"\r\n    },\r\n    \"series\": [\r\n        {\r\n            \"type\": \"bar\",\r\n            \"valueField\": \"count\",\r\n            \"name\": \"Type\"\r\n        }\r\n    ],\r\n    \"valueAxis\": [\r\n        {\r\n            \"label\": {\r\n                \"font\": {\r\n                    \"size\": 10,\r\n                    \"family\": \"Varela Round\",\r\n                    \"weight\": 800\r\n                }\r\n            },\r\n            \"title\": {\r\n                \"text\": \"Percentage\",\r\n                \"font\": {\r\n                    \"size\": 11,\r\n                    \"family\": \"Varela Round\",\r\n                    \"weight\": 800\r\n                }\r\n            }\r\n        }\r\n    ],\r\n    \"argumentAxis\": {\r\n        \"label\": {\r\n            \"font\": {\r\n                \"size\": 10,\r\n                \"family\": \"Varela Round\",\r\n                \"weight\": 800\r\n            }\r\n        }\r\n    },\r\n    \"customizePoint\": \"function(pointInfo) {\r\n        if(pointInfo.argument === 'Assignments') {\r\n            return { color: '#97c95c', hoverStyle: { color: '#97c95c' } }\r\n        } else if(pointInfo.argument === 'Comments') {\r\n            return { color: '#f5564a', hoverStyle: { color: '#f5564a' } }\r\n        } else if(pointInfo.argument === 'Jobs') {\r\n            return { color: '#1db2f5', hoverStyle: { color: '#1db2f5' } }\r\n        } else if(pointInfo.argument === 'Projects') {\r\n                return { color: '#ffc720', hoverStyle: { color: '#ffc720' } }\r\n        }\r\n    }\",\r\n    \"legend\": {\r\n        \"visible\": false,\r\n        \"verticalAlignment\": \"bottom\",\r\n        \"horizontalAlignment\": \"center\"\r\n    }\r\n}","DashboardDefinitionId":"dd50be31-4429-4e5f-9792-d21ac456d735"},{"Id":"4a804f85-0903-4b83-8ba2-95fe3ed4ffb9","Name":"Filters","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#e0e0e0\",\"WidgetHeight\":30,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n\"colCount\": 4,\r\n\"items\": [\r\n    {\r\n        \"name\": \"Year\",\r\n        \"dataField\": \"Year\",\r\n        \"editorType\": \"dxNumberBox\",\r\n        \"editorOptions\": {\r\n            \"showSpinButtons\": true,\r\n            \"value\": 2019,\r\n            \"width\": 65,\r\n            \"placeholder\": \"year\",\r\n            \"onContentReady\": \"function(e){ setTimeout(function() { SkillsWorkflow.setDashboardFilter('year', 2019); SkillsWorkflow.setDashboardFilter('Company', '00000000-0000-0000-0000-000000000000'); SkillsWorkflow.setDashboardFilter('Division', '00000000-0000-0000-0000-000000000000'); SkillsWorkflow.setDashboardFilter('Department', '00000000-0000-0000-0000-000000000000');}, 1000) }\",\r\n            \"onValueChanged\": \"function(e){ if(e.value != null) { SkillsWorkflow.setDashboardFilter('year', e.value); } }\"\r\n        },\r\n        \"noDataText\": \"Please wait...\"\r\n    },\r\n    {\r\n        \"dataField\": \"CompanyId\",\r\n        \"label\": {\r\n            \"text\": \"Company\"\r\n        },\r\n        \"editorType\": \"dxSelectBox\",\r\n        \"editorOptions\": {\r\n            \"width\": 250,\r\n            \"searchEnabled\": true,\r\n            \"dataSource\": {\r\n                \"load\": \"function(loadOptions){ \r\n                            var searchValue = (\r\n                            loadOptions.searchValue != null ? loadOptions.searchValue : ''); \r\n                            var searchTake = (loadOptions.searchValue != null && loadOptions.searchValue != '' ? 10 : 100); \r\n                            return SkillsWorkflow.executeAPI('GET', 'companies/lookup',null,{}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All companies'});return res;})\r\n                }\",\r\n                \"byKey\": \"function(key) { return SW.executeAPI('GET','companies/'+key+'/lookup',null,{}).then( result =>  { return Promise.resolve(result);}) }\"\r\n            },\r\n            \"placeholder\": \"All companies\",\r\n            \"displayExpr\": \"Name\",\r\n            \"valueExpr\": \"Id\",\r\n            \"onValueChanged\": \"function(e){ \r\n                if( e.value != null && e.value != '') {\r\n                    SkillsWorkflow.setDashboardFilter('Company', e.value);\r\n                } else {\r\n                    SkillsWorkflow.setDashboardFilter('Company', '00000000-0000-0000-0000-000000000000');\r\n                }\r\n                debugger;\r\n                SW.setComponentByValue(e.previousValue, e.value, 'DivisionId');\r\n            }\",\r\n            \"onInitialized\": \"function(e){ SW.saveComponent(e.component,'CompanyId');}\"\r\n        }\r\n    },\r\n    {\r\n        \"dataField\": \"DivisionId\",\r\n        \"label\": {\r\n            \"text\": \"Division\"\r\n        },\r\n        \"editorType\": \"dxSelectBox\",\r\n        \"editorOptions\": {\r\n            \"width\": 250,\r\n            \"searchEnabled\": true,\r\n            \"dataSource\": {\r\n                \"load\": \"function(loadOptions){ \r\n                            let searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : ''); \r\n                            let skip = loadOptions.skip || 0; \r\n                            let take = loadOptions.take || 20; \r\n                            var param = { name:searchValue, skip: skip, take: take}; \r\n                            var companyId = SW.getValueFromComponent('CompanyId'); \r\n                            if (companyId == '00000000-0000-0000-0000-000000000000') {\r\n                                return SkillsWorkflow.executeAPI('GET', 'divisions/lookup',null,{}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All divisions'});return res;})\r\n                            } else if (companyId != null) { \r\n                                param['companyId'] = companyId;\r\n                                return SkillsWorkflow.executeAPI('GET', 'divisions/lookup',param,{}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All divisions'});return res;})\r\n                            }\r\n                        }\",\r\n                \"byKey\": \"function(key) { return SW.executeAPI('GET','divisions/'+key+'/lookup',null,{}).then( result =>  { return Promise.resolve(result);})}\"\r\n            },\r\n            \"placeholder\": \"All divisions\",\r\n            \"onValueChanged\": \"function(e){ \r\n                if (e.value != null && e.value != '') {\r\n                    SkillsWorkflow.setDashboardFilter('Division', e.value);\r\n                } else {\r\n                    SkillsWorkflow.setDashboardFilter('Division', '00000000-0000-0000-0000-000000000000');\r\n                }\r\n                SW.setComponentByValue(e.previousValue, e.value, 'DepartmentId');\r\n                \r\n            }\",\r\n            \"onInitialized\": \"function(e){ SW.saveComponent(e.component, 'DivisionId'); }\",\r\n            \"displayExpr\": \"Name\",\r\n            \"valueExpr\": \"Id\",\r\n            \"disabled\": true\r\n        }\r\n    },\r\n    {\r\n        \"dataField\": \"DepartmentId\",\r\n        \"label\": {\r\n            \"text\": \"Department\"\r\n        },\r\n        \"editorType\": \"dxSelectBox\",\r\n        \"editorOptions\": {\r\n            \"width\": 250,\r\n            \"searchEnabled\": true,\r\n            \"dataSource\": {\r\n                \"load\": \"function(loadOptions){ \r\n                    let searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : ''); \r\n                    let skip = loadOptions.skip || 0; \r\n                    let take = loadOptions.take || 20;\r\n                    var param = { name: searchValue, skip: skip, take: take }; \r\n                    var divisionId = SW.getValueFromComponent('DivisionId'); \r\n                    var companyId = SW.getValueFromComponent('CompanyId'); \r\n                    if (divisionId != null && divisionId != '00000000-0000-0000-0000-000000000000' && companyId != null && companyId != '00000000-0000-0000-0000-000000000000') { \r\n                        param['divisionId'] = divisionId;\r\n                        param['companyId'] = companyId;\r\n                    } \r\n                    return SkillsWorkflow.executeAPI('GET', 'departments',param,{}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'All departments'});return res;})\r\n                }\",\r\n                \"byKey\": \"function(key) { return SW.executeAPI('GET', 'departments/' + key, null, {}).then( result =>  { return Promise.resolve(result); } ) }\"\r\n            },\r\n            \"placeholder\": \"All departments\",\r\n            \"onValueChanged\": \"function(e){ \r\n                    if(e.value != null && e.value != '') {\r\n                        SkillsWorkflow.setDashboardFilter('Department', e.value);\r\n                    } else {\r\n                        SkillsWorkflow.setDashboardFilter('Department', '00000000-0000-0000-0000-000000000000');\r\n                    }\r\n            }\",\r\n            \"onInitialized\": \"function(e){ SW.saveComponent(e.component, 'DepartmentId'); }\",\r\n            \"displayExpr\": \"Name\",\r\n            \"valueExpr\": \"Id\",\r\n            \"disabled\": true\r\n        }\r\n    }]\r\n}\r\n\r\n","DashboardDefinitionId":"dd50be31-4429-4e5f-9792-d21ac456d735"},{"Id":"216f18c2-8a4a-4d84-8bb7-b462f9a7966d","Name":"Department stats","Active":true,"UseQuery":false,"Query":"","Size":8,"Order":5,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetHeight\":220,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with projects as \\r\\n(\\r\\n\\tselect\\tu.[Oid] as idU,\\r\\n\\t\\t\\tcount(1) as countProj\\r\\n\\tfrom\\t[Project] p\\r\\n\\tinner join [User] u\\r\\n\\ton p.[CreatedBy] = u.[Oid]\\r\\n\\twhere Year(p.[CreatedOn]) = @year\\r\\n\\tgroup by u.[Oid], u.[Name]\\r\\n),\\r\\njobs as\\r\\n(\\r\\n\\tselect\\tu.[Oid] as idU,\\r\\n\\t\\t\\tcount(1) as countJobs\\r\\n\\tfrom\\t[Assignment] a\\r\\n\\tinner join [User] u\\r\\n\\ton a.[User] = u.[Oid]\\r\\n\\twhere Year(a.[AssignDate]) = @year and a.[DocumentTypeName] = 'Skill.Module.BusinessObjects.Deliverable'\\r\\n\\tgroup by u.[Oid], u.[Name]\\r\\n),\\r\\ncomments as\\r\\n(\\r\\n\\tselect u.[Oid] as idU,\\r\\n\\t\\tcount(1) as countComments\\r\\n\\tfrom [Comment] c\\r\\n\\tinner join [User] u\\r\\n\\ton u.[Oid] = c.[Creator]\\r\\n\\twhere Year(c.[CreateDate]) = @year\\r\\n\\tgroup by u.[Oid], u.[Name]\\r\\n),\\r\\nassignments as\\r\\n(\\r\\n\\tselect u.[Oid] as idU,\\r\\n\\t\\tcount(1) as countAssignment\\r\\n\\tfrom [Assignment] a\\r\\n\\tinner join [User] u\\r\\n\\ton u.[Oid] = a.[User]\\r\\n\\twhere Year(a.[AssignDate]) = @year\\r\\n\\tgroup by u.[Oid], u.[Name]\\r\\n)\\r\\nselect c.[Name] as companyName, c.[Oid] as companyId, c.[HasImage] as cHasImage, di.[Name] as division, de.[Name] as department, u.[Name] as userName, u.[Oid] as userId, u.[HasImage] as uHasImage, t.[Name] as typology,\\r\\n\\t\\tIsNull(p.countProj,0) as Projects, \\r\\n\\t\\tIsNull(j.countJobs,0) as Jobs, \\r\\n\\t\\tIsNull(co.countComments,0) as Comments,\\r\\n\\t\\tIsNull(a.countAssignment,0) as Assignments\\r\\nfrom [Company] c, [Division] di, [Department] de, [UserTypology] t, [User] u\\r\\nfull join projects p \\r\\non (p.idU = u.[Oid])\\r\\nfull join jobs j\\r\\non (j.idU = u.[Oid])\\r\\nfull join comments co\\r\\non (co.[idU] = u.[Oid])\\r\\nfull join assignments a\\r\\non (a.idU = u.[Oid])\\r\\nwhere u.[Company] = c.[Oid] and u.[Division] = di.[Oid] and u.[Department] = de.[Oid] and u.[Typology] = t.[Oid]\\r\\nand (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\nand (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\nand (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Division\",\"Company\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n        \"onContentReady\": \"function(e){\r\n                if (e.component.instance().getDataSource() != null && e.component.instance().getDataSource().items().length > 0){\r\n                        var teste =  e.component.instance().getDataSource().items()[0].items[0].userId;\r\n                        SkillsWorkflow.setDashboardFilter('userId', teste);\r\n                }\r\n        }\",\r\n        \"stateStoring\": {\r\n                \"enabled\": false\r\n        },\r\n        \"height\": 300,\r\n        \"searchPanel\": {\r\n                \"visible\": true\r\n        },\r\n        \"columnChooser\": {\r\n                \"enabled\": false\r\n        },\r\n        \"export\": {\r\n                \"enabled\": true\r\n        },\r\n        \"groupPanel\": {\r\n                \"visible\": true\r\n        },\r\n        \"grouping\": {\r\n                \"autoExpandAll\": true\r\n        },\r\n        \"selection\": {\r\n                \"mode\": \"single\"\r\n        },\r\n        \"scrolling\": {\r\n            \"mode\": \"virtual\",\r\n            \"rowRenderingMode\": \"virtual\"\r\n        },\r\n        \"onRowClick\": \"function(e){ if(e.data.userId != null) { SkillsWorkflow.setDashboardFilter('userId', e.data.userId); } }\",\r\n        \"allowColumnReordering\": true,\r\n        \"rowAlternationEnabled\": true,\r\n        \"showBorders\": true,\r\n        \"columns\": [\r\n                {\r\n                        \"dataField\": \"department\",\r\n                        \"groupIndex\": 0\r\n                },\r\n                {\r\n                        \"dataField\": \"userId\",\r\n                        \"caption\": \"\",\r\n                        \"format\": \"#,##0\",\r\n                        \"cellTemplate\": \"function(e, i) {SK.showImage(e, 'user', 'small',i.data['uHasImage'], i.data['userName'], i.data['userId'])}\",\r\n                        \"width\": 30\r\n                },\r\n                {\r\n                        \"dataField\": \"userName\",\r\n                        \"name\": \"Name\",\r\n                        \"caption\": \"Name\"\r\n                },\r\n                {\r\n                        \"dataField\": \"companyId\",\r\n                        \"caption\": \"\",\r\n                        \"format\": \"#,##0\",\r\n                        \"cellTemplate\": \"function(e, i) { SK.showImage(e, 'company', 'small', i.data['cHasImage'], i.data['companyName'], i.data['companyId'])}\",\r\n                        \"width\": 30\r\n                },\r\n                {\r\n                        \"dataField\": \"companyName\",\r\n                        \"name\": \"Company\",\r\n                        \"caption\": \"Company\"\r\n                },\r\n                {\r\n                        \"dataField\": \"division\",\r\n                        \"name\": \"Division\",\r\n                        \"caption\": \"Division\"\r\n                },\r\n                {\r\n                        \"dataField\": \"typology\",\r\n                        \"name\": \"Typology\",\r\n                        \"caption\": \"Typology\"\r\n                },\r\n                {\r\n                        \"dataField\": \"Projects\",\r\n                        \"name\": \"Projects\",\r\n                        \"caption\": \"Projects\",\r\n                        \"alignment\": \"center\",\r\n                        \"format\": \"#,##0\",\r\n                        \"cellTemplate\": \"function(e, i) { SW.setRAG(e, i.value, i.value <= 0, i.value > 0 && i.value <= 50, i.value > 50); }\"\r\n                },\r\n                {\r\n                        \"dataField\": \"Jobs\",\r\n                        \"name\": \"Jobs\",\r\n                        \"caption\": \"Jobs\",\r\n                        \"alignment\": \"center\",\r\n                        \"format\": \"#,##0\",\r\n                        \"cellTemplate\": \"function(e, i) { SW.setRAG(e, i.value, i.value <= 0, i.value > 0 && i.value <= 50, i.value > 50); }\"\r\n                },\r\n                {\r\n                        \"dataField\": \"Comments\",\r\n                        \"name\": \"Comments\",\r\n                        \"caption\": \"Comments\",\r\n                        \"alignment\": \"center\",\r\n                        \"format\": \"#,##0\",\r\n                        \"cellTemplate\": \"function(e, i) { SW.setRAG(e, i.value, i.value <= 0, i.value > 0 && i.value <= 50, i.value > 50); }\"\r\n                },\r\n                {\r\n                        \"dataField\": \"Assignments\",\r\n                        \"name\": \"Assignments\",\r\n                        \"caption\": \"Assignments\",\r\n                        \"alignment\": \"center\",\r\n                        \"format\": \"#,##0\",\r\n                        \"cellTemplate\": \"function(e, i) { SW.setRAG(e, i.value, i.value <= 0, i.value > 0 && i.value <= 50, i.value > 50); }\"\r\n                }\r\n        ],\r\n        \"summary\": {\r\n                \"totalItems\": [\r\n                        {\r\n                                \"column\": \"userName\",\r\n                                \"summaryType\": \"count\",\r\n                                \"displayFormat\": \"{0}\",\r\n                                \"valueFormat\": \"#,##0\"\r\n                        },\r\n                        {\r\n                                \"column\": \"Projects\",\r\n                                \"summaryType\": \"sum\",\r\n                                \"displayFormat\": \"{0}\",\r\n                                \"valueFormat\": \"#,##0\"\r\n                        },\r\n                        {\r\n                                \"column\": \"Jobs\",\r\n                                \"summaryType\": \"sum\",\r\n                                \"displayFormat\": \"{0}\",\r\n                                \"valueFormat\": \"#,##0\"\r\n                        },\r\n                        {\r\n                                \"column\": \"Comments\",\r\n                                \"summaryType\": \"sum\",\r\n                                \"displayFormat\": \"{0}\",\r\n                                \"valueFormat\": \"#,##0\"\r\n                        },\r\n                        {\r\n                                \"column\": \"Assignments\",\r\n                                \"summaryType\": \"sum\",\r\n                                \"displayFormat\": \"{0}\",\r\n                                \"valueFormat\": \"#,##0\"\r\n                        }\r\n                ]\r\n        }\r\n}","DashboardDefinitionId":"dd50be31-4429-4e5f-9792-d21ac456d735"},{"Id":"29b1413d-11ae-44b2-beb9-baa4e1d1127a","Name":"Top 10 posters","Active":true,"UseQuery":false,"Query":null,"Size":4,"Order":7,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"pie\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":200,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"showSubTitle\":false,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select top 10 u.[Name] as userName, count(u.[Name]) as count, u.[Oid] as userId, u.[HasImage] as hasImage\\r\\nfrom [User] u, [Post] p\\r\\nwhere p.[CreatedBy] = u.[Oid] and Year(p.[CreatedOnUtc]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n                                                                and (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n                                                                and (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\ngroup by u.[Name], u.[Oid], u.[HasImage]\\r\\norder by count(u.[Name]) desc\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Division\",\"Company\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_ExecutionStatus_Per_Client/execute","Configuration":"{\n  \"type\": \"doughnut\",\n  \"series\": [\n    {\n      \"argumentField\": \"userName\",\n      \"valueField\": \"count\",\n      \"label\": {\n        \"visible\": true,\n        \"format\": \"fixedPoint\",\n        \"font\": {\n          \"family\": \"Varela Round\",\n          \"weight\": 800\n        },\n        \"connector\": {\n          \"visible\": true,\n          \"width\": 1\n        },\n        \"customizeText\": \"function(arg) { return arg.percentText; }\"\n      }\n    }\n  ],\n  \"commonSeriesSettings\": {\n   \"smallValuesGrouping\": {\n      \"mode\": \"topN\",\n      \"topCount\": 10,\n      \"groupName\": \"Others\"\n    }\n  },\n  \"size\": {\n    \"height\": 250\n  },\n  \"legend\": {\n    \"visible\": true,\n    \"horizontalAlignment\": \"left\",\n    \"verticalAlignment\": \"middle\",\n    \"itemTextPosition\": \"right\",\n    \"paddingLeftRight\": 0,\n    \"font\": {\n      \"size\": 10,\n      \"family\": \"Varela Round\",\n      \"weight\": 800\n    }\n  },\n  \"resolveLabelOverlapping\": \"shift\"\n}","DashboardDefinitionId":"dd50be31-4429-4e5f-9792-d21ac456d735"},{"Id":"2676fdcb-861d-419a-bf9b-e7037bc2bc2c","Name":"Top 10 assignees","Active":true,"UseQuery":false,"Query":null,"Size":4,"Order":9,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"pie\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetHeight\":200,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"showSubTitle\":false,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select top 10 u.[Name], count(u.[Name]) as count\\r\\nfrom [User] u, [Assignment] a\\r\\nwhere u.[Oid] = a.[User] and Year(a.[AssignDate]) = @year and (u.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n                                                         and (u.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')\\r\\n                                                         and (u.[Company] = @Company or @Company = '00000000-0000-0000-0000-000000000000')\\r\\ngroup by u.[Name]\\r\\norder by count(u.[Name]) desc\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"year\",\"Department\",\"Division\",\"Company\"]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"globalQuery/Analytics_ExecutionStatus_Per_Client/execute","Configuration":"{\n  \"type\": \"doughnut\",\n  \"series\": [\n    {\n      \"argumentField\": \"Name\",\n      \"valueField\": \"count\",\n      \"label\": {\n        \"position\": \"columns\",\n        \"visible\": true,\n        \"font\": {\n          \"family\": \"Varela Round\",\n          \"weight\": 800\n        },\n        \"customizeText\": \"function(arg) { return arg.percentText; }\"\n      }\n    }\n  ],\n  \"commonSeriesSettings\": {\n    \"label\": {\n      \"visible\": true,\n      \"format\": \"fixedPoint\",\n      \"connector\": {\n        \"position\": \"columns\",\n        \"visible\": true,\n        \"width\": 1\n      }\n    },\n    \"smallValuesGrouping\": {\n      \"mode\": \"topN\",\n      \"topCount\": 10,\n      \"groupName\": \"Others\"\n    }\n  },\n  \"size\": {\n    \"height\": 250\n  },\n  \"tooltip\": {\n    \"enabled\": true,\n    \"customizeText\": \"function (e) {return e.argumentText;}\"\n  },\n  \"legend\": {\n    \"visible\": true,\n    \"horizontalAlignment\": \"left\",\n    \"verticalAlignment\": \"middle\",\n    \"itemTextPosition\": \"right\",\n    \"paddingLeftRight\": 0,\n    \"font\": {\n      \"size\": 10,\n      \"family\": \"Varela Round\",\n      \"weight\": 800\n    }\n  },\n  \"resolveLabelOverlapping\": \"shift\"\n}","DashboardDefinitionId":"dd50be31-4429-4e5f-9792-d21ac456d735"}]}
