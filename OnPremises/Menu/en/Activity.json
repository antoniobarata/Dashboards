{
    "DashboardDefinitionRoles": [],
    "Id": "89c14e18-0d7b-4c4f-ad39-b716cb4229c2",
    "Name": "Activity Dashboard",
    "Active": true,
    "Location": 0,
    "DocumentId": "00000000-0000-0000-0000-000000000000",
    "DocumentName": "",
    "DocumentsConfiguration": null,
    "Templates": [],
    "DashboardDefinitionComponents": [
        {
            "Id": "c11ffeff-29e7-408d-b5d0-315942f80caa",
            "Name": "Activity Type per Department and Client",
            "Active": true,
            "UseQuery": false,
            "Query": null,
            "Size": 8,
            "Order": 2,
            "Parameters": "[\r\n    {\r\n        \"WidgetSubTitle\": \"Last 12 months\",\r\n        \"WidgetType\": \"pivotGrid\",\r\n        \"WidgetFilterField\": \"\",\r\n        \"WidgetColor\": \"\",\r\n        \"WidgetHeight\": \"\",\r\n        \"WidgetHeader\": {\r\n            \"showContextInfo\": false,\r\n            \"WidgetPeriodChooser\": {\r\n                \"type\": \"year\",\r\n                \"visible\": false\r\n            },\r\n            \"WidgetMetrics\": {\r\n                \"visible\": false,\r\n                \"Metrics\": [\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"? Forecast\",\r\n                        \"metricFieldValue\": \"TimeGrandTotal\"\r\n                    },\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"? Actual\",\r\n                        \"metricFieldValue\": \"UtilizationPercentGrandTotal\"\r\n                    }\r\n                ]\r\n            },\r\n            \"showSubTitle\": true,\r\n            \"showTitle\": true\r\n        },\r\n        \"WidgetDataSources\": {\r\n            \"main\": {\r\n                \"type\": \"queryText\",\r\n                \"value\": \"select v.Client, v.Department, v.[Type], sum(v.JobsByJobType) as Jobs, sum(v.HoursByJobType) as [Hours] from ( select Client, Department, [Type], [Month], sum(Jobs) as JobsByJobType, sum(HoursPerType) as HoursByJobType from ( select cc.[Name] as Client, dep.[Name] as Department, j.[Name] as [Type], DateFromParts(Year(d.EntryDateLocal), Month(d.EntryDateLocal), 1) as [Month], count(1) as Jobs, 0 as HoursPerType from SkillDeliverableWithoutDeleted d left outer join CommercialClient cc on (cc.Oid = d.Client) left outer join Department dep on (dep.Oid = d.Department), JobType j, workflowstate ws, WorkflowStateType wst, DocumentType dt, DocumentState dst, UserUsers_CompanyCompanies uucc where uucc.Companies = d.Company and uucc.Users = @CurrentUserId and j.Oid = d.JobType AND d.isDraft = 0 AND d.workflowstate = ws.oid AND ws.workflowstatetype = wst.oid and wst.status not in (7, 6) AND dst.oid = d.DocumentState and dst.status not in (4, 5) and dt.oid = d.DocumentType and dt.FinalWorkflowState != d.WorkflowState and Exists(select ccc.CommercialClient from CommercialClientCompany ccc, UserUsers_CompanyCompanies uucc where ccc.Company = uucc.Companies and uucc.Users = @CurrentUserId and ccc.CommercialClient = cc.Oid) group by cc.[Name], dep.[Name], j.[Name], DateFromParts(Year(d.EntryDateLocal), Month(d.EntryDateLocal), 1) union all select t.Client, t.Department, j.[Name] as [Type], DateFromParts(Year(t.[Date]), Month(t.[Date]), 1) as [Month], 0 as Jobs, sum(t.[Hours] / 60.0) as HoursPerType from SkillTimesheetExpanded t, Deliverable d, JobType j, UserUsers_CompanyCompanies uucc where uucc.Companies = t.CompanyId and uucc.Users = @CurrentUserId and d.Oid = t.DeliverableId and j.Oid = d.JobType and Exists(select ccc.CommercialClient from CommercialClientCompany ccc, UserUsers_CompanyCompanies uucc where ccc.Company = uucc.Companies and uucc.Users = @CurrentUserId and ccc.CommercialClient = t.ClientId) group by t.Client, t.Department, j.[Name], DateFromParts(Year(t.[Date]), Month(t.[Date]), 1) ) t group by Client, Department, [Type], [Month] ) v where v.[Month] between DATEFROMPARTS(Year(DateAdd(mm, -12, getdate())), Month(DateAdd(mm, -12, getdate())), 1) and DATEFROMPARTS(Year(getdate()), Month(getdate()), 1) group by v.Client, v.Department, v.[Type]\",\r\n                \"mapping\": \"\"\r\n            }\r\n        },\r\n        \"QueryConfiguration\": {}\r\n    }\r\n]",
            "DashboardComponentType": {
                "Id": "6f649e62-be82-4af7-8d64-06b32cf6c0ea",
                "Name": "Generic Dashboard",
                "ComponentTypeNumber": 42
            },
            "AnalyticsApiUrl": "globalQuery/Analytics_Activity_Per_Client_Departament_Type/execute",
            "Configuration": "{\n \"size\": {\n    \"height\": 250\n  },\n  \"allowSortingBySummary\": true,\n  \"allowSorting\": true,\n  \"allowFiltering\": true,\n  \"allowExpandAll\":true,\n  \"height\": 250,\n  \"showBorders\": true,\n  \"fieldPanel\": {\n      \"showColumnFields\": true,\n      \"showDataFields\": true,\n      \"showFilterFields\": true,\n      \"showRowFields\": true,\n      \"allowFieldDragging\": true,\n      \"visible\": true\n  },\n  \"wordWrapEnabled\":false,\n  \"dataSource\": {\n    \"fields\": [\n      {\n        \"caption\": \"Department\",\n        \"width\": 120,\n        \"dataField\": \"Department\",\n        \"area\": \"column\",\n        \"expanded\":true\n      },\n      {\n        \"dataField\": \"Client\",\n        \"dataType\": \"string\",\n        \"area\": \"filter\",\n        \"expanded\":true\n      },\n      {\n        \"dataField\": \"Type\",\n        \"dataType\": \"string\",\n        \"area\": \"row\",\n        \"expanded\":true\n      },\n \r\n      {\n        \"caption\": \"Jobs\",\n        \"dataField\": \"Jobs\",\n        \"area\": \"data\",\n        \"dataType\": \"number\",\n        \"summaryType\": \"sum\",\n        \"format\":\"#,###.#\"\n      },\n     {\n        \"caption\": \"Time\",\n        \"dataField\": \"Hours\",\n        \"dataType\": \"number\",\n        \"summaryType\": \"sum\",\n        \"area\": \"data\",\n        \"format\":\"#,###.#\"\n      }\n    ],\n    \"store\": null\n  },\n   \"onCellPrepared\": \"function(e) {var dataField = e.component.getDataSource().getAreaFields(\u0027data\u0027)[e.cell.dataIndex];if(e.area==\u0027data\u0027 \u0026\u0026 dataField.caption==\u0027Utilization %\u0027 \u0026\u0026 e.cell.value\u003c0.8){e.cellElement.css(\u0027background-color\u0027,\u0027#ffc7ce\u0027);e.cellElement.css(\u0027color\u0027,\u0027#9c0c06\u0027);}}\"\n}",
            "DashboardDefinitionId": "89c14e18-0d7b-4c4f-ad39-b716cb4229c2"
        },
        {
            "Id": "11c60c61-5f51-4348-90fc-ec19556d462d",
            "Name": "Top 10 Activity Types",
            "Active": true,
            "UseQuery": false,
            "Query": null,
            "Size": 4,
            "Order": 1,
            "Parameters": "[\r\n    {\r\n        \"WidgetSubTitle\": \"Jobs and Time per Activity Type in the last 12 months\",\r\n        \"WidgetType\": \"pie\",\r\n        \"WidgetFilterField\": \"\",\r\n        \"WidgetColor\": \"\",\r\n        \"WidgetHeight\": \"\",\r\n        \"WidgetHeader\": {\r\n            \"showContextInfo\": false,\r\n            \"WidgetPeriodChooser\": {\r\n                \"type\": \"year\",\r\n                \"visible\": false\r\n            },\r\n            \"WidgetMetrics\": {\r\n                \"visible\": false,\r\n                \"Metrics\": [\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"? Planned\",\r\n                        \"metricFieldValue\": \"PlannedTimeGrandTotal\"\r\n                    }\r\n                ]\r\n            },\r\n            \"showSubTitle\": true,\r\n            \"showTitle\": true\r\n        },\r\n        \"WidgetDataSources\": {\r\n            \"main\": {\r\n                \"type\": \"queryText\",\r\n                \"value\": \"select v.[Type], sum(v.JobsByJobType) as Jobs, sum(v.HoursByJobType) as [Hours] from ( select [Type], [Month], sum(Jobs) as JobsByJobType, sum(HoursPerType) as HoursByJobType from ( select j.[Name] as [Type], DateFromParts(Year(d.EntryDateLocal), Month(d.EntryDateLocal), 1) as [Month], count(1) as Jobs, 0 as HoursPerType from SkillDeliverableWithoutDeleted d, JobType j, workflowstate ws, WorkflowStateType wst, DocumentType dt, DocumentState dst, UserUsers_CompanyCompanies uucc where uucc.Companies = d.Company and uucc.Users = @CurrentUserId and j.Oid = d.JobType AND d.isDraft = 0 AND d.workflowstate = ws.oid AND ws.workflowstatetype = wst.oid and wst.status not in (7, 6) AND dst.oid = d.DocumentState and dst.status not in (4, 5) and dt.oid = d.DocumentType and dt.FinalWorkflowState != d.WorkflowState group by j.[Name], DateFromParts(Year(d.EntryDateLocal), Month(d.EntryDateLocal), 1) union all select j.[Name] as [Type], DateFromParts(Year(t.[Date]), Month(t.[Date]), 1) as [Month], 0 as Jobs, sum(t.[Hours] / 60.0) as HoursPerType from SkillTimesheetExpanded t, Deliverable d, JobType j, UserUsers_CompanyCompanies uucc where uucc.Companies = t.CompanyId and uucc.Users = @CurrentUserId and d.Oid = t.DeliverableId and j.Oid = d.JobType group by j.[Name], DateFromParts(Year(t.[Date]), Month(t.[Date]), 1) ) t group by [Type], [Month] ) v where v.[Month] between DATEFROMPARTS(Year(DateAdd(mm, -12, getdate())), Month(DateAdd(mm, -12, getdate())), 1) and DATEFROMPARTS(Year(getdate()), Month(getdate()), 1) group by v.[Type]\",\r\n                \"mapping\": \"\"\r\n            }\r\n        },\r\n        \"QueryConfiguration\": null\r\n    }\r\n]",
            "DashboardComponentType": {
                "Id": "6f649e62-be82-4af7-8d64-06b32cf6c0ea",
                "Name": "Generic Dashboard",
                "ComponentTypeNumber": 42
            },
            "AnalyticsApiUrl": "globalQuery/Analytics_Activity_Per_Type/execute",
            "Configuration": "{\n \"type\": \"doughnut\",\n  \"series\": [{\n      \"argumentField\":\"Type\",\n      \"valueField\":\"Jobs\",\n      \"name\":\"Jobs\",\n      \"label\":false\n    },\n    {\n      \"argumentField\":\"Type\",\n      \"valueField\":\"Hours\",\n   \r\n   \"name\":\"Time\",\n      \"label\":false\n    }\n  ],\n  \"commonSeriesSettings\": {\n    \"label\": {\n      \"visible\": false,\n      \"format\": \"fixedPoint\",\n      \"connector\": {\n        \"visible\": true,\n        \"width\": 1\n      }\n    },\n    \"smallValuesGrouping\": {\n        \"mode\": \"topN\",\n        \"topCount\": 10\n    }\n  },\n  \"size\": {\n    \"height\": 250\n  },\n  \"tooltip\": {\n            \"enabled\": true,\n            \"format\": \"#,###.#\",\n            \"customizeTooltip\": \"function(e) { return { text: this.argumentText + \u0027\u003cbr\u003e\u0027 + this.seriesName + \u0027: \u0027 + this.valueText };}\"\n        },\n  \"legend\": {\n    \"visible\":true,\n    \"horizontalAlignment\": \"left\",\n    \"verticalAlignment\": \"middle\",\n    \"itemTextPosition\" : \"right\",\n    \"paddingLeftRight\" : 0,\n    \"font\":{\"size\":8}\n  }\n}",
            "DashboardDefinitionId": "89c14e18-0d7b-4c4f-ad39-b716cb4229c2"
        },
        {
            "Id": "19976bbf-051c-413a-9a54-f60b2a8e6e43",
            "Name": "Time and Jobs over Months",
            "Active": true,
            "UseQuery": false,
            "Query": null,
            "Size": 12,
            "Order": 3,
            "Parameters": "[\r\n    {\r\n        \"WidgetSubTitle\": \"Last 12 months\",\r\n        \"WidgetType\": \"chart\",\r\n        \"WidgetFilterField\": \"\",\r\n        \"WidgetColor\": \"#efefef\",\r\n        \"WidgetHeight\": \"\",\r\n        \"WidgetHeader\": {\r\n            \"showContextInfo\": false,\r\n            \"WidgetPeriodChooser\": {\r\n                \"type\": \"year\",\r\n                \"visible\": false\r\n            },\r\n            \"WidgetMetrics\": {\r\n                \"visible\": false,\r\n                \"Metrics\": [\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"# Forecast\",\r\n                        \"metricFieldValue\": \"TimeGrandTotal\"\r\n                    },\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"# Actual\",\r\n                        \"metricFieldValue\": \"UtilizationPercentGrandTotal\"\r\n                    }\r\n                ]\r\n            },\r\n            \"showSubTitle\": true,\r\n            \"showTitle\": true\r\n        },\r\n        \"WidgetDataSources\": {\r\n            \"main\": {\r\n                \"type\": \"queryText\",\r\n                \"value\": \"select v.[Month], sum(v.JobsByJobType) as Jobs, sum(v.HoursByJobType) as [Hours] from ( select [Month], sum(Jobs) as JobsByJobType, sum(HoursPerType) as HoursByJobType from ( select DateFromParts(Year(d.EntryDateLocal), Month(d.EntryDateLocal), 1) as [Month], count(1) as Jobs, 0 as HoursPerType from SkillDeliverableWithoutDeleted d, workflowstate ws, WorkflowStateType wst, DocumentType dt, DocumentState dst, UserUsers_CompanyCompanies uucc where uucc.Companies = d.Company and uucc.Users = @CurrentUserId and d.isDraft = 0 AND d.workflowstate = ws.oid AND ws.workflowstatetype = wst.oid and wst.status not in (7, 6) AND dst.oid = d.DocumentState and dst.status not in (4, 5) and dt.oid = d.DocumentType and dt.FinalWorkflowState != d.WorkflowState group by DateFromParts(Year(d.EntryDateLocal), Month(d.EntryDateLocal), 1) union all select DateFromParts(Year(t.[Date]), Month(t.[Date]), 1) as [Month], 0 as Jobs, sum(t.[Hours] / 60.0) as HoursPerType from SkillTimesheetExpanded t, UserUsers_CompanyCompanies uucc where uucc.Companies = t.CompanyId and uucc.Users = @CurrentUserId group by DateFromParts(Year(t.[Date]), Month(t.[Date]), 1) ) t group by [Month] ) v where v.[Month] between DATEFROMPARTS(Year(DateAdd(mm, -12, getdate())), Month(DateAdd(mm, -12, getdate())), 1) and DATEFROMPARTS(Year(getdate()), Month(getdate()), 1) group by v.[Month]\",\r\n                \"mapping\": \"\"\r\n            }\r\n        },\r\n        \"QueryConfiguration\": {}\r\n    }\r\n]",
            "DashboardComponentType": {
                "Id": "6f649e62-be82-4af7-8d64-06b32cf6c0ea",
                "Name": "Generic Dashboard",
                "ComponentTypeNumber": 42
            },
            "AnalyticsApiUrl": "globalQuery/Analytics_Activity_Per_Month/execute",
            "Configuration": "{\n  \"commonSeriesSettings\": {\n    \"argumentField\": \"Month\",\n    \"ignoreEmptyPoints\": false,\n    \"aggregation\": {\n      \"enabled\": true,\n      \"method\": \"sum\"\n    }\n  },\n  \"series\": [\n    {\n      \"axis\": \"jobs\",\n      \"type\": \"line\",\n      \"valueField\": \"Jobs\",\n      \"name\": \"Jobs\"\n    },\n    {\n      \"axis\": \"time\",\n      \"type\": \"bar\",\n      \"valueField\": \"Hours\",\n      \"name\": \"Time\"\n    }\n  ],\n  \"argumentAxis\": {\n    \"argumentType\": \"dateTime\",\n    \"type\": \"discrete\"\n  },\n  \"valueAxis\": [\n    {\n      \"name\": \"time\",\n      \"position\": \"left\",\n      \"title\": {\n        \"text\": \"Time\",\n        \"font\": {\n          \"size\": 12\n        }\n      }\n    },\n    {\n      \"name\": \"jobs\",\n      \"position\": \"right\",\n      \"title\": {\n        \"text\": \"Jobs\",\n        \"font\": {\n          \"size\": 12\n        }\n      }\n    }\n  ],\n  \"legend\": {\n    \"visible\": true,\n    \"rowCount\": 1,\n    \"verticalAlignment\": \"bottom\",\n    \"horizontalAlignment\": \"center\"\n  },\n  \"tooltip\": {\n    \"enabled\": true,\n    \"argumentFormat\": \"monthAndYear\",\n    \"format\": \"#,##0.00\"\n  }\n}",
            "DashboardDefinitionId": "89c14e18-0d7b-4c4f-ad39-b716cb4229c2"
        }
    ],
    "Version": 2,
    "Default": true,
    "Dependencies": {
        "DashboardSdk": "1.0.0",
        "Analytics": "1.0.0",
        "SkillsWorkflow": "1.0.0"
    }
}