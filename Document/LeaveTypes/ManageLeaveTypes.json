{"DashboardDefinitionRoles":[],"Id":"1b995655-aeaf-4e5d-918d-73927a92f7de","Name":"apply leave types","Active":true,"Location":1,"DocumentId":"00000000-0000-0000-0000-000000000000","DocumentName":"","DocumentTypeName":null,"DocumentsConfiguration":"[\n    {\n        \"entity\": \"\",\n        \"operations\": {\n            \"read\": {\n                \"endpoint\": \"\"\n            },\n            \"update\": {\n                \"endpoint\": \"\",\n                \"model\": {}\n            },\n            \"create\": {\n                \"endpoint\": \"\",\n                \"model\": {}\n            },\n            \"patch\": {\n                \"endpoint\": \"\",\n                \"model\": [\n                    {\n                        \"field\": \"\",\n                        \"caption\": \"\",\n                        \"type\": \"\"\n                    }\n                ]\n            },\n            \"remove\": {\n                \"endpoint\": \"\"\n            },\n            \"lookup\": {\n                \"endpoint\": \"\"\n            },\n            \"lookupById\": {\n                \"endpoint\": \"\"\n            }\n        },\n        \"layout\": {\n            \"create\": {},\n            \"read\": {},\n            \"patch\": {}\n        },\n        \"customDocument\": {\n            \"useCustomStyle\": false,\n            \"mainColor\": \"\",\n            \"secondaryColor\": \"\",\n            \"imageClass\": \"\",\n            \"namePlural\": \"\",\n            \"name\": \"\",\n            \"systemName\": \"\"\n        },\n        \"availableOptions\": {\n            \"feed\": false,\n            \"info\": true,\n            \"files\": false,\n            \"userfields\": false,\n            \"workspaces\": false\n        },\n        \"fields\": []\n    }\n]","Templates":[],"DashboardDefinitionComponents":[{"Id":"27211d0d-516f-422f-acb0-39c6551a5c12","Name":"","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"button\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":18,\"WidgetYPosition\":34,\"WidgetRows\":4,\"WidgetColumns\":10,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"queryempty\",\"value\":\"{\\\"entities\\\":[],\\\"fields\\\":[]}\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\"onClick\":\"function(e){\\n    var buttonGroup = SW.getComponent('buttonGroup');\\n    var operation = buttonGroup.option('selectedItems')[0];\\n    if(operation.text == 'Apply'){\\n        Apply(e);\\n    } else {\\n        Delete(e);\\n    }\\n\\n    function Apply(e) {\\n        SetLoading();\\n        var gridUsers = SW.getComponent('data');\\n        var gridLeaveTypes = SW.getComponent('applyLeaveTypesGrid');\\n        if (gridUsers && gridLeaveTypes) {\\n            var selectedUsers = gridUsers.getSelectedRowKeys();\\n            var selectedLeaveTypes = gridLeaveTypes.getSelectedRowKeys();\\n        }\\n        var year = SW.getComponent('formLTyear') != null ? SW.getComponent('formLTyear').option('value') : null;\\n        var days = SW.getComponent('formLTdays') != null ? SW.getComponent('formLTdays').option('value') : null;\\n        var startDate = SW.getComponent('formLTstartDate') != null ? SW.getComponent('formLTstartDate').option('value') : null;\\n        var expirationDate = SW.getComponent('formLTexpirationDate') != null ? SW.getComponent('formLTexpirationDate').option('value') : null;\\n        var seniority = false;\\n        seniority = SW.getComponent('formLTseniority').option('value') != null ? SW.getComponent('formLTseniority').option('value') : false;\\n        var carryForward = false;\\n        carryForward = SW.getComponent('formLTcarryForward').option('value') != null ? SW.getComponent('formLTcarryForward').option('value') : false;\\n        if (!selectedUsers || !selectedLeaveTypes || !year || !days || !startDate || !expirationDate) {\\n            StopLoading();\\n            return SW.Toastr.toastr_Error('A field is missing');\\n        }\\n        if (selectedUsers.length == 0) {\\n            StopLoading();\\n            return SW.Toastr.toastr_Error('No users selected');\\n        }\\n        if (selectedLeaveTypes.length == 0) {\\n            StopLoading();\\n            return SW.Toastr.toastr_Error('No leave types selected');\\n        }\\n        var selectedUsersIds = [];\\n        selectedUsers.forEach(\\n            user => {\\n                selectedUsersIds.push(user.UserId);\\n            }\\n        );\\n        var selectedLeaveTypesIds = [];\\n        selectedLeaveTypes.forEach(\\n            leaveType => {\\n                selectedLeaveTypesIds.push(leaveType.Oid);\\n            }\\n        );\\n        var details = {\\n            Year: year,\\n            TotalVacationDays: days,\\n            StartDate: startDate,\\n            ExpirationDate: expirationDate,\\n            Seniority: seniority,\\n            CarryForward: carryForward\\n        };\\n        var batchModel = {\\n            LeaveInfoBatchAction: 0,\\n            UsersIdList: selectedUsersIds,\\n            LeaveTypesIdList: selectedLeaveTypesIds,\\n            Details: details\\n        };\\n        SW.executeAPI('POST', 'leaveInfos/batch', null, batchModel).then(x => {\\n            SW.Toastr.toastr_Success('Applied');\\n            StopLoading();\\n        }).catch(x => {\\n            StopLoading();\\n        });\\n    }\\n\\n    function Delete(e){\\n        SetLoading();\\n        var gridUsers = SW.getComponent('data');\\n        var gridLeaveTypes = SW.getComponent('applyLeaveTypesGrid');\\n        if (gridUsers && gridLeaveTypes) {\\n            var selectedUsers = gridUsers.getSelectedRowKeys();\\n            var selectedLeaveTypes = gridLeaveTypes.getSelectedRowKeys();\\n        };\\n        if (selectedUsers.length == 0) {\\n            StopLoading();\\n            return SW.Toastr.toastr_Error('No users selected');\\n        }\\n        if (selectedLeaveTypes.length == 0) {\\n            StopLoading();\\n            return SW.Toastr.toastr_Error('No leave types selected');\\n        }\\n        var selectedUsersIds = [];\\n        selectedUsers.forEach(\\n            user => {\\n                selectedUsersIds.push(user.UserId);\\n            }\\n        );\\n        var selectedLeaveTypesIds = [];\\n        selectedLeaveTypes.forEach(\\n            leaveType => {\\n                selectedLeaveTypesIds.push(leaveType.Oid);\\n            }\\n        );\\n        var batchModel = {\\n            LeaveInfoBatchAction: 1,\\n            UsersIdList: selectedUsersIds,\\n            LeaveTypesIdList: selectedLeaveTypesIds\\n        };\\n        SW.executeAPI('POST', 'leaveInfos/batch', null, batchModel).then(x => {\\n            SW.Toastr.toastr_Success('Deleted');\\n            StopLoading();\\n        }).catch(x=>{\\n            StopLoading();\\n        });\\n    }\\n\\n    function SetLoading() {\\n        var grid = SW.getComponent('applyLeaveTypesGrid');\\n        grid.option('disabled', true);\\n        var form = SW.getComponent('form');\\n        form.option('disabled', true);\\n        var buttonGroup = SW.getComponent('buttonGroup');\\n        buttonGroup.option('disabled', true);\\n        debugger;\\n    }\\n\\n    function StopLoading() {\\n        var grid = SW.getComponent('applyLeaveTypesGrid');\\n        grid.option('disabled', false);\\n        var form = SW.getComponent('form');\\n        form.option('disabled', false);\\n        var buttonGroup = SW.getComponent('buttonGroup');\\n        buttonGroup.option('disabled', false);\\n    }\\n}\",\"onInitialized\":\"function(e){\\r\\n    SW.saveComponent(e.component, 'button');\\r\\n}\",\"text\":\"OK\"}","DashboardDefinitionId":"1b995655-aeaf-4e5d-918d-73927a92f7de"},{"Id":"c96d8e22-404a-48e5-b8a9-498819e02009","Name":"Apply Leave Types","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":0,\"WidgetRows\":15,\"WidgetColumns\":46,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select [Name], Oid from UserVacationType\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\"height\":\"100%\",\"onContentReady\":\"function(e) {\\n    SW.saveComponent(e.component, 'applyLeaveTypesGrid');\\n    var selectBoxCarryForward = SW.getComponent('formLTcarryForwardLeaveType');\\n    selectBoxCarryForward.option('dataSource', e.component.option('dataSource'));\\n    \\n    StopLoading();\\n    \\n    function StopLoading() {\\n        var generic = document.getElementsByTagName(\\\"generic-popup\\\");\\n        ng.getComponent(generic[0]).popupInfo.isLoading = false;\\n    }\\n}\",\"columns\":[\"Name\"],\"width\":\"100%\"}","DashboardDefinitionId":"1b995655-aeaf-4e5d-918d-73927a92f7de"},{"Id":"43769c54-9cda-4e2e-bbd8-4d2ff81b21da","Name":"Apply Mass Leave Type","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":18,\"WidgetRows\":16,\"WidgetColumns\":46,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select\\tOid,\\n\\t\\t[Name]\\nfrom UserVacationType\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"colCount\": \"2\",\r\n    \"labelLocation\": \"top\",\r\n    \"items\": [\r\n        {\r\n            \"label\": {\r\n                \"text\": \"Year\"\r\n            },\r\n            \"editorType\": \"dxNumberBox\",\r\n            \"dataField\": \"\",\r\n            \"editorOptions\": {\r\n                \"onInitialized\": \"function(e) { SW.saveComponent(e.component, 'formLTyear') }\",\r\n                \"onValueChanged\": \"function(e) {}\",\r\n                \"showSpinButtons\": \"true\",\r\n                \"value\": 2020\r\n            }\r\n        },\r\n        {\r\n            \"label\": {\r\n                \"text\": \"Days\"\r\n            },\r\n            \"editorType\": \"dxNumberBox\",\r\n            \"dataField\": \"\",\r\n            \"editorOptions\": {\r\n                \"onInitialized\": \"function(e) { SW.saveComponent(e.component, 'formLTdays') }\"\r\n            }\r\n        },\r\n        {\r\n            \"label\": {\r\n                \"text\": \"Start Date\"\r\n            },\r\n            \"editorType\": \"dxDateBox\",\r\n            \"dataField\": \"\",\r\n            \"editorOptions\": {\r\n                \"onInitialized\": \"function(e) { SW.saveComponent(e.component, 'formLTstartDate') }\",\r\n                \"type\": \"datetime\"\r\n            }\r\n        },\r\n        {\r\n            \"label\": {\r\n                \"text\": \"Expiration Date\"\r\n            },\r\n            \"editorType\": \"dxDateBox\",\r\n            \"dataField\": \"\",\r\n            \"editorOptions\": {\r\n                \"onInitialized\": \"function(e) { SW.saveComponent(e.component, 'formLTexpirationDate') }\",\r\n                \"type\":\"datetime\"\r\n            }\r\n        },\r\n        {\r\n            \"label\": {\r\n                \"text\": \"Seniority\"\r\n            },\r\n            \"editorType\": \"dxCheckBox\",\r\n            \"dataField\": \"\",\r\n            \"editorOptions\": {\r\n                \"onInitialized\": \"function(e) { SW.saveComponent(e.component, 'formLTseniority') }\"\r\n            }\r\n        },\r\n        {\r\n            \"label\": {\r\n                \"text\": \"Carry Forward\"\r\n            },\r\n            \"itemType\": \"simple\",\r\n            \"editorType\": \"dxCheckBox\",\r\n            \"editorOptions\": {\r\n                \"onInitialized\": \"function(e) { SW.saveComponent(e.component, 'formLTcarryForward'); }\",\r\n                \"onValueChanged\": \"function(e){ var cfLt = SW.getComponent('formLTcarryForwardLeaveType'); cfLt.option('disabled', !e.value); var cfLt2 = SW.getComponent('formLTcarryForwardDate'); cfLt2.option('disabled', !e.value); }\"\r\n            }\r\n        },\r\n        {\r\n            \"label\": {\r\n                \"text\": \"Carry Forward Leave Type\"\r\n            },\r\n            \"editorType\": \"dxSelectBox\",\r\n            \"name\": \"CarryForwardLeaveType\",\r\n            \"editorOptions\": {\r\n                \"displayExpr\": \"Name\",\r\n                \"onInitialized\": \"function(e) { SW.saveComponent(e.component, 'formLTcarryForwardLeaveType'); debugger;}\",\r\n                \"disabled\": true\r\n            }\r\n        },\r\n        {\r\n            \"label\": {\r\n                \"text\": \"Carry Forward Expiration Date\"\r\n            },\r\n            \"editorType\": \"dxDateBox\",\r\n            \"dataField\": \"\",\r\n            \"name\": \"CarryForwardExpirationDate\",\r\n            \"editorOptions\": {\r\n                \"onInitialized\": \"function(e) { SW.saveComponent(e.component, 'formLTcarryForwardDate') }\",\r\n                \"disabled\": true,\r\n                \"type\": \"datetime\"\r\n            }\r\n        }\r\n    ],\r\n    \"width\": \"100%\",\r\n    \"height\": \"100%\",\r\n    \"onContentReady\": \"function(e){ SW.saveComponent(e.component, 'form'); }\"\r\n}","DashboardDefinitionId":"1b995655-aeaf-4e5d-918d-73927a92f7de"},{"Id":"c36e67dd-b9ad-44de-93cd-bb542d5ce8e4","Name":"","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"buttongroup\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":16,\"WidgetYPosition\":15,\"WidgetRows\":3,\"WidgetColumns\":14,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"queryempty\",\"value\":\"\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"items\": [\r\n        {\r\n            \"text\": \"Apply\"\r\n        },\r\n        {\r\n            \"text\": \"Delete\"\r\n        }\r\n    ],\r\n    \"onItemClick\": \"function(e) {\\r\\n    debugger;\\r\\n    var form = SW.getComponent('form');\\r\\n    var actual = form.option('disabled');\\r\\n    form.option('disabled', !actual);\\r\\n}\",\r\n    \"keyExpr\": \"text\",\r\n    \"selectedItemKeys\": [\r\n        \"Apply\"\r\n    ],\r\n    \"width\": \"100%\",\r\n    \"height\": \"25px\",\r\n    \"onInitialized\": \"function(e){\\r\\n    SW.saveComponent(e.component, 'buttonGroup');\\r\\n       function SetLoading() {\\r\\n        var generic = document.getElementsByTagName(\\\"generic-popup\\\");\\r\\n        debugger;\\r\\n        ng.getComponent(generic[0]).popupInfo.isLoading = true;\\r\\n    }\\r\\n}\"\r\n}","DashboardDefinitionId":"1b995655-aeaf-4e5d-918d-73927a92f7de"},{"Id":"59ee317b-3390-4052-9350-c652f2494c44","Name":"","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":15,\"WidgetRows\":3,\"WidgetColumns\":16,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"queryempty\",\"value\":\"{\\\"entities\\\":[],\\\"fields\\\":[]}\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"items\": [\r\n        {\r\n            \"itemType\": \"group\",\r\n            \"caption\": \" \",\r\n            \"items\": [\r\n                {}\r\n            ]\r\n        }\r\n    ]\r\n}","DashboardDefinitionId":"1b995655-aeaf-4e5d-918d-73927a92f7de"},{"Id":"a7552901-1454-4a89-9e9e-e9220310b6b6","Name":"","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":30,\"WidgetYPosition\":15,\"WidgetRows\":3,\"WidgetColumns\":16,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"queryempty\",\"value\":\"{\\\"entities\\\":[],\\\"fields\\\":[]}\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"items\": [\r\n        {\r\n            \"itemType\": \"group\",\r\n            \"caption\": \"\\n\",\r\n            \"items\": [\r\n                {}\r\n            ]\r\n        }\r\n    ]\r\n}","DashboardDefinitionId":"1b995655-aeaf-4e5d-918d-73927a92f7de"}],"QueryText":"","UseStore":false,"StoreEntity":null,"Version":1,"Default":true}