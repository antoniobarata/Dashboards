{
  "DashboardDefinitionRoles": [],
  "Id": "ab5f924a-5db7-484f-b28e-1b8efb04cdb6",
  "Name": "Timesheets",
  "Active": true,
  "Location": 2,
  "DocumentId": "00000000-0000-0000-0000-000000000000",
  "DocumentName": "",
  "DocumentTypeName": "timesheets",
  "DocumentsConfiguration": "[]",
  "Templates": [],
  "DashboardDefinitionComponents": [
    {
      "Id": "749b3013-9136-4495-b45d-054e1004fa80",
      "Name": "Timesheet Blocking Dashboard",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 5,
      "Order": 3,
      "Parameters": "[{\"WidgetSubTitle\":\"Users\u0027 AD blocking log\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetHeight\":\"\",\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":true,\"Metrics\":[{\"visible\":true,\"metricName\":\"? Unblocked Users\",\"metricFieldValue\":\"GrandTotalUnblock\"},{\"visible\":true,\"metricName\":\"? Blocked Users\",\"metricFieldValue\":\"GrandTotalBlock\"}]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"SELECT al.utcLogTime AS \u0027Date\u0027,\\n    ssu.oid as UserId,\\n    ssu.username AS \u0027UserName\u0027,\\n    al.OperationType,\\n    case \\n        when al.OperationType in (\u0027Block\u0027) then \u0027Blocked\u0027\\n        when al.OperationType in (\u0027Unblock\u0027) then \u0027Unblocked\u0027\\n        end as [Type],\\n    replace(al.[Description], ssu.oid, ssu.UserName) AS \u0027Description\u0027,\\n    al.Executed,\\n    al.Error,\\n    sum(iif(al.OperationType in (\u0027Unblock\u0027),1,0)) over() as \u0027GrandTotalUnblock\u0027,\\n    sum(iif(al.OperationType in (\u0027Block\u0027),1,0)) over() as \u0027GrandTotalBlock\u0027\\nFROM assistantlog al,\\n    SecuritySystemUser ssu\\n    WHERE \\n    al.[user] = ssu.oid and\\n        ssu.username not in (\u0027Internal Process\u0027, \u0027Support\u0027) and\\n    al.OperationType in (\u0027Unblock\u0027,\u0027Block\u0027)\\n    /*[DateFilter]*/ and al.utcLogTime \u003e= @FromDate and al.utcLogTime \u003c= @ToDate /*[/DateFilter]*/\\nORDER BY DATE DESC\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[\"startDate\",\"endDate\"]}}]",
      "DashboardComponentType": {
        "Id": "3c1da83b-efe9-4b70-87d0-c3813a512774",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/ADBlockerLog/execute",
      "Configuration": "  {\n        \"height\": \"330\",\n        \"hoverStateEnabled\": \"true\",\n        \"allowSorting\": \"true\",\n        \"grouping\": {\n            \"autoExpandAll\": \"true\"\n        },\n                 \"scrolling\": {\n            \"mode\": \"infinite\"\n        },\n        \"columnAutoWidth\": \"true\",\n        \"searchPanel\": {\n            \"visible\": \"true\"\n        },\n        \"groupPanel\": {\n            \"visible\": \"true\"\n        },\n        \"export\": {\n            \"enabled\": \"true\",\n            \"fileName\": \"AssistantLog\"\n        },\n        \"sortByGroupSummaryInfo\": [\n            {\n                \"summaryItem\": \"count\"\n            }\n        ],\n        \"summary\": {\n            \"groupItems\": [\n                {\n                    \"summaryType\": \"count\",\n                    \"displayFormat\": \"{0} items\"\n                }\n            ],\n            \"totalItems\": [\n                {\n                    \"column\": \"Executed\",\n                    \"summaryType\": \"sum\",\n                    \"valueFormat\": \"#,##0\",\n                    \"displayFormat\": \"{0}\",\n                    \"alignment\": \"right\",\n                    \"cellTemplate\": \"function(e, i) {var h=e.append(\u0027\u003cdiv\u003e\u0027+i.text+\u0027\u003c/div\u003e\u0027);if(i.value\u003c0) {h.css(\u0027background-color\u0027,\u0027#f5564a\u0027).css(\u0027color\u0027,\u0027#ffffff\u0027)}}\"\n                }\n            ]\n        },\n        \"columns\": [\n\n\n{\n      \"allowHeaderFiltering\":false,\n      \"dataField\": \"UserId\",\n      \"alignment\": \"right\",\n      \"format\": \"#,##0\",\n      \"width\": 50,\n      \"headerCellTemplate\" :\" \",\n      \"cellTemplate\": \"function(e, i) {if(i.text == \u0027\u0027) return; \n          \n                var h = document.createElement(\u0027DIV\u0027); \n                    e.appendChild(h);\n                    h.style[\u0027text-align\u0027] = \u0027center\u0027; \n                    var img = document.createElement(\u0027img\u0027); \n                    h.appendChild(img);\n                    img.src = SkillsWorkflow.getUserImages([i.text]);\n                    img.style[\u0027border-radius\u0027] = \u002740px\u0027; \n                    img.height=\u002716\u0027;\n                    img.width=\u002716\u0027;}\"\n},       \n            {\n                \"dataField\": \"UserName\",\n                \"caption\": \"User\"\n            },\n             {\n                \"alignment\":\"center\",\n                \"dataField\": \"Type\",\n                \"caption\": \"Type\",\n                \"alignment\": \"center\",\n                \"cellTemplate\": \"function(e, i) {\ndebugger;\n                    var h = document.createElement(\u0027DIV\u0027); \n                    e.appendChild(h);\n                    var span = document.createElement(\u0027span\u0027); \n                    h.appendChild(span);\n                    span.innerHTML = i.text; \n                    span.classList.add(\u0027dx-button-mode-contained\u0027);\n                    span.setAttribute(\u0027style\u0027,\u0027 color: #ffffff; display : inline-block ; border-radius : 2px ; padding: 3px 7px; font-weight: 700; white-space : nowrap\u0027);\n                    if(i.value==\u0027Unblocked\u0027|| i.value==\u0027ADUnblocked\u0027) {\n                        span.style[\u0027background-color\u0027]=\u0027 #488cbf\u0027;\n                        }\n                     if(i.value==\u0027Blocked\u0027|| i.value==\u0027ADBlocked\u0027) {\n                        span.style[\u0027background-color\u0027]=\u0027 #da5859\u0027;\n                    }\n;}\"\n            },\n            {\n                \"dataField\": \"Date\",\n                \"caption\": \"Date\",\n                \"dataType\": \"date\",\n                \"format\": \"dd/MM/yyyy HH:mm:ss\",\n                \"sortOrder\": \"desc\"\n            },\n            {\n                \"dataField\": \"Executed\",\n                \"caption\": \"Executed\"\n            }\n        ]\n    }",
      "DashboardDefinitionId": "ab5f924a-5db7-484f-b28e-1b8efb04cdb6"
    },
    {
      "Id": "cfebcd19-60f0-4bfc-a04a-e373ef80a371",
      "Name": "Select the desired range",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 12,
      "Order": 4,
      "Parameters": "[{\"WidgetSubTitle\":\"Blocked and unblocked users\",\"WidgetType\":\"rangeselector\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#e0e0e0\",\"WidgetHeight\":\"500\",\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"startDate\":\"2019/04/01\",\"endDate\":\"2019/08/30\",\"type\":\"year\",\"visible\":false},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"SELECT    max(al.utcLogTime) AS \u0027Date\u0027, \\n          sum(iif(al.OperationType in (\u0027Unblock\u0027, \u0027ADUnblock\u0027), 1, 0)) as \u0027Unblock\u0027,\\n          sum(iif(al.OperationType in (\u0027Block\u0027, \u0027ADBlock\u0027), 1, 0)) as \u0027Block\u0027\\nFROM      AssistantLog al\\nGROUP BY   datepart(yyyy, al.utcLogTime), datepart(mm, al.utcLogTime), datepart(dd, al.utcLogTime)\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]",
      "DashboardComponentType": {
        "Id": "3c1da83b-efe9-4b70-87d0-c3813a512774",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/ADBlockerLogsCount/execute",
      "Configuration": "{\n    \"onDrawn\": \"function(s) {      \n        var yesterday = new Date();  \n        var today = new Date();\n        yesterday.setDate(today.getDate()-1);\n\n        yesterday.setHours(0,\n    0,\n    0,\n    0);      \n        today.setHours(23,\n    59,\n    59,\n    0);      \n        s.component.option(\u0027value\u0027,\n    [yesterday, today\n    ]);\n}\",\n    \"onDisposing\": \"function (e,c) {debugger; var test=new Date();};\",\n\"height\": \"250\",\n\"containerBackgroundColor\": \"#e0e0e0\",\n\"selectedRangeColor\": \"#f5564a\",\n\"chart\": {\n    \"commonSeriesSettings\": {\n        \"type\": \"steparea\",\n        \"argumentField\": \"Date\"\n    },\n    \"series\": [\n        {\n            \"valueField\": \"Unblock\"\n        },\n        {\n            \"valueField\": \"Block\"\n        }\n    ]\n},\n\"scale\": {\n    \"minorTickInterval\": \"day\",\n    \"tickInterval\": \"day\",\n    \"valueType\": \"datetime\"\n},\n\"sliderMarker\": {\n    \"format\": \"monthAndDay\",\n    \"color\": \"#da5859\"\n},\n\"value\": [\n    \"2019/05/13\",\n    \"2019/05/20\"\n]\n}",
      "DashboardDefinitionId": "ab5f924a-5db7-484f-b28e-1b8efb04cdb6"
    },
    {
      "Id": "30cb8bde-6c79-4b51-93d6-e64ba5c3bb47",
      "Name": "Users Missing Timesheets",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 7,
      "Order": 2,
      "Parameters": "[{\"WidgetSubTitle\":\"Users\u0027 missing timesheets and AD status\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetHeight\":\"500\",\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":true,\"Metrics\":[{\"visible\":true,\"metricName\":\"? Users missing hours\",\"metricFieldValue\":\"GrandTotalUsersMissingHours\"},{\"visible\":true,\"metricName\":\"? Missing hours\",\"metricFieldValue\":\"GrandTotalMissingHours\"}]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select t.UserId,\\n    ssu.UserName, \\n    u.AdUserName, \\n    u.TimesheetRequired , \\n    u.HasToFillTimesheets , \\n    u.IsBlockedInAd, \\n    ssu.IsActive, \\n\\tt.MissingDays,\\n\\tt.MissingHours,\\nsum(t.MissingHours) over() as \u0027GrandTotalMissingHours\u0027,\\ncount(ssu.UserName) over() as \u0027GrandTotalUsersMissingHours\u0027\\nfrom\\n    (   \\n          select\\n            v.UserId,\\n            Name,\\n            Company,\\n            --cast(MissingHours as float) as MissingHours,\\n\\t\\t\\tSTRING_AGG(CONVERT(VARCHAR(10), Day, 111) , \u0027, \u0027) within group (order by Day asc) as MissingDays,\\n\\t\\t\\tround(sum(MissingHours), 2) as MissingHours\\n        from SkillTimesheetMissingReport v with(NOLOCK), UserUsers_CompanyCompanies uc with(NOLOCK)\\n        where   uc.Users = @CurrentUserId\\n           and uc.Companies = v.CompanyId\\n\\t\\tgroup by v.UserId, v.Name, v.Company\\n         -- and ( v.ResponsibleId = @CurrentUserId or v.UserId = @CurrentUserId)\\n\\n         union all\\n      \\n          select\\n            v.UserId,\\n            Name,\\n            Company,\\n            --cast(MissingHours as float) as MissingHours,\\n\\t\\t\\tSTRING_AGG(CONVERT(VARCHAR(10), Day, 111) , \u0027, \u0027) within group (order by Day asc) as MissingDays,\\n\\t\\t\\tround(sum(MissingHours), 2) as MissingHours\\n        from SkillWeeklyTimesheetMissingReport v with(NOLOCK), UserUsers_CompanyCompanies uc with(NOLOCK)\\n        where   uc.Users = @CurrentUserId\\n           and uc.Companies = v.CompanyId\\n\\t\\tgroup by v.UserId, v.Name, v.Company\\n         -- and ( v.ResponsibleId = @CurrentUserId or v.UserId = @CurrentUserId)\\n\\n    ) t, [User] u, SecuritySystemUser ssu\\nwhere  u.Oid = ssu.Oid \\n   --and u.IsBlockedInAd = 1 \\n   -- and u.HasToFillTimesheets = 1\\n    --and u.TimesheetRequired = 1 \\n   and t.UserId = u.Oid \\n   -- and t.UserId = ssu.Oid\\n--group by t.UserId, t.Name, ssu.UserName, u.AdUserName, u.TimesheetRequired , u.HasToFillTimesheets , u.IsBlockedInAd, ssu.IsActive\\norder by MissingDays desc\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{}}]",
      "DashboardComponentType": {
        "Id": "3c1da83b-efe9-4b70-87d0-c3813a512774",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/ADBlockerTimesheetDashboard/execute",
      "Configuration": "{\n\"height\": \"330\",\n        \"hoverStateEnabled\": \"true\",\n        \"allowSorting\": \"true\",\n        \"grouping\": {\n            \"autoExpandAll\": \"true\"\n        },\n        \"columnAutoWidth\": \"true\",\n        \"searchPanel\": {\n            \"visible\": \"true\"\n        },\n        \"scrolling\": {\n            \"mode\": \"infinite\"\n        },\n        \"groupPanel\": {\n            \"visible\": \"true\"\n        },\n        \"export\": {\n            \"enabled\": \"true\",\n            \"fileName\": \"AssistantLog\"\n           },\n        \"sortByGroupSummaryInfo\": [\n            {\n                \"summaryItem\": \"count\"\n            }\n        ],\n        \"allowColumnResizing\": true,\n         \"summary\": {\n            \"groupItems\": [\n                {\n                    \"summaryType\": \"count\",\n                    \"displayFormat\": \"{0} items\"\n                }\n            ],\n            \"totalItems\": [\n                {\n                    \"column\": \"MissingHours\",\n                    \"summaryType\": \"sum\",\n                    \"valueFormat\": \"#,##0\",\n                    \"displayFormat\": \"{0}\",\n                    \"alignment\": \"right\",\n                    \"cellTemplate\": \"function(e, i) {var h=e.append(\u0027\u003cdiv\u003e\u0027+i.text+\u0027\u003c/div\u003e\u0027);if(i.value\u003c0) {h.css(\u0027background-color\u0027,\u0027#f5564a\u0027).css(\u0027color\u0027,\u0027#ffffff\u0027)}}\"\n                }\n            ]\n        },\n    \"columns\": [{\n      \"allowHeaderFiltering\":false,\n      \"dataField\": \"UserId\",\n      \"alignment\": \"right\",\n      \"format\": \"#,##0\",\n      \"width\": 10,\n      \"headerCellTemplate\" :\" \",\n\"cellTemplate\": \"function(e, i) {  if(i.text == \u0027\u0027) return; \n          \n                var h = document.createElement(\u0027DIV\u0027); \n                    e.appendChild(h);\n                    h.style[\u0027text-align\u0027] = \u0027center\u0027; \n                    var img = document.createElement(\u0027img\u0027); \n                    h.appendChild(img);\n                    img.src = SkillsWorkflow.getUserImages([i.text]);\n                    img.style[\u0027border-radius\u0027] = \u002740px\u0027; \n                    img.height=\u002716\u0027;\n                    img.width=\u002716\u0027;}\"\n},        \n{\n            \"dataField\": \"UserName\",\n            \"caption\": \"Username\"\n        },\n        {\n            \"dataField\": \"AdUserName\",\n            \"caption\": \"Ad Username\"\n        },\n        {\n            \"dataField\": \"TimesheetRequired\",\n            \"caption\": \"Timesheet Required\",\n            \"visible\":\"false\"\n        },\n        {\n            \"dataField\": \"HasToFillTimesheets\",\n            \"caption\": \"Blocked in Skills\"\n        },\n        {\n            \"dataField\": \"IsBlockedInAd\",\n            \"caption\": \"Blocked In Ad\"\n        },\n        {\n            \"dataField\": \"MissingHours\",\n            \"caption\": \"? Missing Hours\"\n        },\n        {\n            \"alignment\":\"center\",\n            \"caption\": \"Missing Days\",\n            \"dataField\":\"MissingDays\",\n            \"cellTemplate\": \"function(container, options) { var h = document.createElement(\u0027DIV\u0027); \n                container.appendChild(h);\n                h.dataset[\u0027id\u0027] = options.data.MissingDays;\n                h.onclick = function(e) {alert(this.attributes[\u0027data-id\u0027].value)};\n                h.setAttribute(\u0027class\u0027, \u0027dx-button dx-button-normal dx-button-mode-contained dx-widget dx-button-has-text\u0027);\n                var h1 = document.createElement(\u0027DIV\u0027); \n                h.appendChild(h1);\n                h1.classList.add(\u0027dx-button-content\u0027);\n                var span = document.createElement(\u0027span\u0027); \n                h1.appendChild(span);\n                span.classList.add(\u0027dx-button-text\u0027);\n                span.innerHTML = \u0027View\u0027; debugger;}\"\n        }\n \n   ]\n}",
      "DashboardDefinitionId": "ab5f924a-5db7-484f-b28e-1b8efb04cdb6"
    }
  ],
  "Version": 8,
  "Default": true
}
