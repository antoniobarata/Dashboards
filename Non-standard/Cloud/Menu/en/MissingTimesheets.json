{
    "DashboardDefinitionRoles": [],
    "Id": "db39c916-c152-4a0a-a260-7c47f837692b",
    "Name": "Missing Timesheets",
    "Active": true,
    "Location": 0,
    "DocumentId": "00000000-0000-0000-0000-000000000000",
    "DocumentName": "",
    "DocumentTypeName": null,
    "DocumentsConfiguration": null,
    "Templates": [],
    "DashboardDefinitionComponents": [
        {
            "Id": "02390768-c5cf-41eb-a0d9-06386223b3e7",
            "Name": "Users Missing Timesheets",
            "Active": true,
            "UseQuery": false,
            "Query": null,
            "Size": 7,
            "Order": 2,
            "Parameters": "[{\"WidgetSubTitle\":\"Users\u0027 missing timesheets and AD status\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":0,\"WidgetRows\":18,\"WidgetColumns\":28,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":true,\"Metrics\":[{\"visible\":true,\"metricName\":\"# Users missing hours\",\"metricFieldValue\":\"GrandTotalUsersMissingHours\"},{\"visible\":true,\"metricName\":\"# Missing hours\",\"metricFieldValue\":\"GrandTotalMissingHours\"}]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select t.UserId,\\n    ssu.UserName, \\n\\tu.HasImage,\\n    u.AdUserName, \\n    u.TimesheetRequired , \\n    u.HasToFillTimesheets , \\n    u.IsBlockedInAd, \\n    ssu.IsActive, \\n\\tt.MissingDays,\\n\\tt.MissingHours,\\nsum(t.MissingHours) over() as \u0027GrandTotalMissingHours\u0027,\\ncount(ssu.UserName) over() as \u0027GrandTotalUsersMissingHours\u0027\\nfrom\\n    (   \\n          select\\n            v.UserId,\\n            Name,\\n            Company,\\n            --cast(MissingHours as float) as MissingHours,\\n\\t\\t\\tSTRING_AGG(CONVERT(VARCHAR(10), Day, 111) , \u0027, \u0027) within group (order by Day asc) as MissingDays,\\n\\t\\t\\tround(sum(MissingHours), 2) as MissingHours\\n        from SkillTimesheetMissingReport v with(NOLOCK), UserUsers_CompanyCompanies uc with(NOLOCK)\\n        where   uc.Users = @CurrentUserId\\n           and uc.Companies = v.CompanyId\\n\\t\\tgroup by v.UserId, v.Name, v.Company\\n         -- and ( v.ResponsibleId = @CurrentUserId or v.UserId = @CurrentUserId)\\n\\n         union all\\n      \\n          select\\n            v.UserId,\\n            Name,\\n            Company,\\n            --cast(MissingHours as float) as MissingHours,\\n\\t\\t\\tSTRING_AGG(CONVERT(VARCHAR(10), Day, 111) , \u0027, \u0027) within group (order by Day asc) as MissingDays,\\n\\t\\t\\tround(sum(MissingHours), 2) as MissingHours\\n        from SkillWeeklyTimesheetMissingReport v with(NOLOCK), UserUsers_CompanyCompanies uc with(NOLOCK)\\n        where   uc.Users = @CurrentUserId\\n           and uc.Companies = v.CompanyId\\n\\t\\tgroup by v.UserId, v.Name, v.Company\\n         -- and ( v.ResponsibleId = @CurrentUserId or v.UserId = @CurrentUserId)\\n\\n    ) t, [User] u, SecuritySystemUser ssu\\nwhere  u.Oid = ssu.Oid \\n   --and u.IsBlockedInAd = 1 \\n   -- and u.HasToFillTimesheets = 1\\n    --and u.TimesheetRequired = 1 \\n   and t.UserId = u.Oid \\n   -- and t.UserId = ssu.Oid\\n--group by t.UserId, t.Name, ssu.UserName, u.AdUserName, u.TimesheetRequired , u.HasToFillTimesheets , u.IsBlockedInAd, ssu.IsActive\\norder by MissingDays desc\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{}}]",
            "DashboardComponentType": {
                "Id": "1c5bcb1b-adf5-4b6f-94cd-f7dacaa568b2",
                "Name": "Generic Dashboard",
                "ComponentTypeNumber": 42
            },
            "AnalyticsApiUrl": "globalQuery/ADBlockerTimesheetDashboard/execute",
            "Configuration": "{\r\n    \"height\": \"330\",\r\n    \"hoverStateEnabled\": \"true\",\r\n    \"allowSorting\": \"true\",\r\n    \"grouping\": {\r\n        \"autoExpandAll\": \"true\"\r\n    },\r\n    \"columnAutoWidth\": \"true\",\r\n    \"searchPanel\": {\r\n        \"visible\": \"true\"\r\n    },\r\n    \"scrolling\": {\r\n        \"mode\": \"infinite\"\r\n    },\r\n    \"groupPanel\": {\r\n        \"visible\": \"true\"\r\n    },\r\n    \"export\": {\r\n        \"enabled\": \"true\",\r\n        \"fileName\": \"AssistantLog\"\r\n    },\r\n    \"sortByGroupSummaryInfo\": [\r\n        {\r\n            \"summaryItem\": \"count\"\r\n        }\r\n    ],\r\n    \"allowColumnResizing\": \"true\",\r\n    \"summary\": {\r\n        \"groupItems\": [\r\n            {\r\n                \"summaryType\": \"count\",\r\n                \"displayFormat\": \"{0} items\"\r\n            }\r\n        ],\r\n        \"totalItems\": [\r\n            {\r\n                \"column\": \"MissingHours\",\r\n                \"summaryType\": \"sum\",\r\n                \"valueFormat\": \"#,##0\",\r\n                \"displayFormat\": \"{0}\",\r\n                \"alignment\": \"right\",\r\n                \"cellTemplate\": \"function(e, i) {var h=e.append(\u0027\u003cdiv\u003e\u0027+i.text+\u0027\u003c/div\u003e\u0027);if(i.value\u003c0) {h.css(\u0027background-color\u0027,\u0027#f5564a\u0027).css(\u0027color\u0027,\u0027#ffffff\u0027)}}\"\r\n            }\r\n        ]\r\n    },\r\n    \"columns\": [\r\n        {\r\n            \"allowHeaderFiltering\": false,\r\n            \"dataField\": \"UserId\",\r\n            \"alignment\": \"right\",\r\n            \"format\": \"#,##0\",\r\n            \"width\": 30,\r\n            \"headerCellTemplate\": \" \",\r\n            \"cellTemplate\": \"function(e, i) {                SW.showImage(e, \u0027user\u0027, \u0027small\u0027, i.data.HasImage, i.data.UserName, i.data.UserId);            }\"\r\n        },\r\n        {\r\n            \"dataField\": \"UserName\",\r\n            \"caption\": \"Username\"\r\n        },\r\n        {\r\n            \"dataField\": \"AdUserName\",\r\n            \"caption\": \"Ad Username\"\r\n        },\r\n        {\r\n            \"dataField\": \"TimesheetRequired\",\r\n            \"caption\": \"Timesheet Required\",\r\n            \"visible\": \"false\"\r\n        },\r\n        {\r\n            \"dataField\": \"HasToFillTimesheets\",\r\n            \"caption\": \"Blocked in Skills\"\r\n        },\r\n        {\r\n            \"dataField\": \"IsBlockedInAd\",\r\n            \"caption\": \"Blocked In Ad\"\r\n        },\r\n        {\r\n            \"dataField\": \"MissingHours\",\r\n            \"caption\": \"# Missing Hours\"\r\n        },\r\n        {\r\n            \"alignment\": \"center\",\r\n            \"caption\": \"Missing Days\",\r\n            \"dataField\": \"MissingDays\",\r\n            \"cellTemplate\": \"function(container, options) { var h = document.createElement(\u0027DIV\u0027);                 container.appendChild(h);                h.dataset[\u0027id\u0027        ] = options.data.MissingDays;                h.onclick = function(e) {alert(this.attributes[\u0027data-id\u0027            ].value)        };                h.setAttribute(\u0027class\u0027, \u0027dx-button dx-button-normal dx-button-mode-contained dx-widget dx-button-has-text\u0027);                var h1 = document.createElement(\u0027DIV\u0027);                 h.appendChild(h1);                h1.classList.add(\u0027dx-button-content\u0027);                var span = document.createElement(\u0027span\u0027);                 h1.appendChild(span);                span.classList.add(\u0027dx-button-text\u0027);                span.innerHTML = \u0027View\u0027; debugger;    }\"\r\n        }\r\n    ]\r\n}",
            "DashboardDefinitionId": "db39c916-c152-4a0a-a260-7c47f837692b"
        },
        {
            "Id": "f195e961-05db-49ac-afc3-e510588c9370",
            "Name": "Timesheet Blocking Dashboard",
            "Active": true,
            "UseQuery": false,
            "Query": null,
            "Size": 5,
            "Order": 3,
            "Parameters": "[\r\n    {\r\n        \"WidgetSubTitle\": \"Users\u0027 AD blocking log\",\r\n        \"WidgetType\": \"grid\",\r\n        \"WidgetFilterField\": \"\",\r\n        \"WidgetColor\": \"\",\r\n        \"WidgetFrameStyle\": {},\r\n        \"WidgetXPosition\": 28,\r\n        \"WidgetYPosition\": 0,\r\n        \"WidgetRows\": 18,\r\n        \"WidgetColumns\": 20,\r\n        \"WidgetHeader\": {\r\n            \"showContextInfo\": false,\r\n            \"WidgetPeriodChooser\": {\r\n                \"type\": \"year\",\r\n                \"visible\": false\r\n            },\r\n            \"WidgetMetrics\": {\r\n                \"visible\": true,\r\n                \"Metrics\": [\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"# Unblocked Users\",\r\n                        \"metricFieldValue\": \"GrandTotalUnblock\"\r\n                    },\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"# Blocked Users\",\r\n                        \"metricFieldValue\": \"GrandTotalBlock\"\r\n                    }\r\n                ]\r\n            },\r\n            \"showSubTitle\": true,\r\n            \"showTitle\": true\r\n        },\r\n        \"WidgetDataSources\": {\r\n            \"main\": {\r\n                \"type\": \"querytext\",\r\n                \"value\": \"SELECT al.utcLogTime AS \u0027Date\u0027,\\n    ssu.oid as UserId,\\n\\tu.HasImage,\\n    ssu.username AS \u0027UserName\u0027,\\n    al.OperationType,\\n    case \\n        when al.OperationType in (\u0027Block\u0027) then \u0027Blocked\u0027\\n        when al.OperationType in (\u0027Unblock\u0027) then \u0027Unblocked\u0027\\n        end as [Type],\\n    replace(al.[Description], ssu.oid, ssu.UserName) AS \u0027Description\u0027,\\n    al.Executed,\\n    al.Error,\\n    sum(iif(al.OperationType in (\u0027Unblock\u0027),1,0)) over() as \u0027GrandTotalUnblock\u0027,\\n    sum(iif(al.OperationType in (\u0027Block\u0027),1,0)) over() as \u0027GrandTotalBlock\u0027\\nFROM assistantlog al,\\n    SecuritySystemUser ssu,\\n\\t[User] u\\nWHERE \\n    al.[user] = ssu.oid and\\n\\tssu.Oid = u.Oid and\\n        ssu.username not in (\u0027Internal Process\u0027, \u0027Support\u0027) and\\n    al.OperationType in (\u0027Unblock\u0027,\u0027Block\u0027)\\n    /*[DateFilter]*/ and al.utcLogTime \u003e= @FromDate and al.utcLogTime \u003c= @ToDate /*[/DateFilter]*/\\nORDER BY DATE DESC\",\r\n                \"mapping\": \"\"\r\n            }\r\n        },\r\n        \"Filters\": {},\r\n        \"QueryConfiguration\": {\r\n            \"RequiredFilters\": [\r\n                \"startDate\",\r\n                \"endDate\"\r\n            ]\r\n        }\r\n    }\r\n]",
            "DashboardComponentType": {
                "Id": "1c5bcb1b-adf5-4b6f-94cd-f7dacaa568b2",
                "Name": "Generic Dashboard",
                "ComponentTypeNumber": 42
            },
            "AnalyticsApiUrl": "globalQuery/ADBlockerLog/execute",
            "Configuration": "{\r\n    \"height\": \"330\",\r\n    \"hoverStateEnabled\": \"true\",\r\n    \"allowSorting\": \"true\",\r\n    \"grouping\": {\r\n        \"autoExpandAll\": \"true\"\r\n    },\r\n    \"scrolling\": {\r\n        \"mode\": \"infinite\"\r\n    },\r\n    \"columnAutoWidth\": \"true\",\r\n    \"searchPanel\": {\r\n        \"visible\": \"true\"\r\n    },\r\n    \"groupPanel\": {\r\n        \"visible\": \"true\"\r\n    },\r\n    \"export\": {\r\n        \"enabled\": \"true\",\r\n        \"fileName\": \"AssistantLog\"\r\n    },\r\n    \"sortByGroupSummaryInfo\": [\r\n        {\r\n            \"summaryItem\": \"count\"\r\n        }\r\n    ],\r\n    \"summary\": {\r\n        \"groupItems\": [\r\n            {\r\n                \"summaryType\": \"count\",\r\n                \"displayFormat\": \"{0} items\"\r\n            }\r\n        ],\r\n        \"totalItems\": [\r\n            {\r\n                \"column\": \"Executed\",\r\n                \"summaryType\": \"sum\",\r\n                \"valueFormat\": \"#,##0\",\r\n                \"displayFormat\": \"{0}\",\r\n                \"alignment\": \"right\",\r\n                \"cellTemplate\": \"function(e, i) {var h=e.append(\u0027\u003cdiv\u003e\u0027+i.text+\u0027\u003c/div\u003e\u0027);if(i.value\u003c0) {h.css(\u0027background-color\u0027,\u0027#f5564a\u0027).css(\u0027color\u0027,\u0027#ffffff\u0027)}}\"\r\n            }\r\n        ]\r\n    },\r\n    \"columns\": [\r\n        {\r\n            \"allowHeaderFiltering\": false,\r\n            \"dataField\": \"UserId\",\r\n            \"alignment\": \"right\",\r\n            \"format\": \"#,##0\",\r\n            \"width\": 30,\r\n            \"headerCellTemplate\": \" \",\r\n            \"cellTemplate\": \"function(e, i) { SW.showImage(e, \u0027user\u0027, \u0027small\u0027, i.data.HasImage, i.data.UserName, i.data.UserId);         }\"\r\n        },\r\n        {\r\n            \"dataField\": \"UserName\",\r\n            \"caption\": \"User\"\r\n        },\r\n        {\r\n            \"alignment\": \"center\",\r\n            \"dataField\": \"Type\",\r\n            \"caption\": \"Type\",\r\n            \"cellTemplate\": \"function(e, i) {              var h = document.createElement(\u0027DIV\u0027);                     e.appendChild(h);                    var span = document.createElement(\u0027span\u0027);                     h.appendChild(span);                    span.innerHTML = i.text;                     span.classList.add(\u0027dx-button-mode-contained\u0027);                    span.setAttribute(\u0027style\u0027,\u0027 color: #ffffff; display : inline-block ; border-radius : 2px ; padding: 3px 7px; font-weight: 700; white-space : nowrap\u0027);                    if(i.value==\u0027Unblocked\u0027|| i.value==\u0027ADUnblocked\u0027) {                        span.style[\u0027background-color\u0027            ]=\u0027 #488cbf\u0027;        }                     if(i.value==\u0027Blocked\u0027|| i.value==\u0027ADBlocked\u0027) {                        span.style[\u0027background-color\u0027            ]=\u0027 #da5859\u0027;        };    }\"\r\n        },\r\n        {\r\n            \"dataField\": \"Date\",\r\n            \"caption\": \"Date\",\r\n            \"dataType\": \"date\",\r\n            \"format\": \"dd/MM/yyyy HH:mm:ss\",\r\n            \"sortOrder\": \"desc\"\r\n        },\r\n        {\r\n            \"dataField\": \"Executed\",\r\n            \"caption\": \"Executed\"\r\n        }\r\n    ]\r\n}",
            "DashboardDefinitionId": "db39c916-c152-4a0a-a260-7c47f837692b"
        },
        {
            "Id": "9828cd02-26d6-4e75-bdc6-fd992935c3c6",
            "Name": "Select the desired range",
            "Active": true,
            "UseQuery": false,
            "Query": null,
            "Size": 12,
            "Order": 4,
            "Parameters": "[{\"WidgetSubTitle\":\"Blocked and unblocked users\",\"WidgetType\":\"rangeselector\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#e0e0e0\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":18,\"WidgetRows\":11,\"WidgetColumns\":48,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"startDate\":\"2019/04/01\",\"endDate\":\"2019/08/30\",\"type\":\"year\",\"visible\":false},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"SELECT    max(al.utcLogTime) AS \u0027Date\u0027, \\n          sum(iif(al.OperationType in (\u0027Unblock\u0027, \u0027ADUnblock\u0027), 1, 0)) as \u0027Unblock\u0027,\\n          sum(iif(al.OperationType in (\u0027Block\u0027, \u0027ADBlock\u0027), 1, 0)) as \u0027Block\u0027\\nFROM      AssistantLog al\\nGROUP BY   datepart(yyyy, al.utcLogTime), datepart(mm, al.utcLogTime), datepart(dd, al.utcLogTime)\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]",
            "DashboardComponentType": {
                "Id": "1c5bcb1b-adf5-4b6f-94cd-f7dacaa568b2",
                "Name": "Generic Dashboard",
                "ComponentTypeNumber": 42
            },
            "AnalyticsApiUrl": "globalQuery/ADBlockerLogsCount/execute",
            "Configuration": "{\n    \"onDisposing\": \"function (e,c) {debugger; var test=new Date();};\",\n    \"height\": \"250\",\n    \"containerBackgroundColor\": \"#e0e0e0\",\n    \"selectedRangeColor\": \"#f5564a\",\n    \"chart\": {\n        \"commonSeriesSettings\": {\n            \"type\": \"steparea\",\n            \"argumentField\": \"Date\"\n        },\n        \"series\": [\n            {\n                \"valueField\": \"Unblock\"\n            },\n            {\n                \"valueField\": \"Block\"\n            }\n        ]\n    },\n    \"scale\": {\n        \"minorTickInterval\": \"day\",\n        \"tickInterval\": \"day\",\n        \"valueType\": \"datetime\"\n    },\n    \"sliderMarker\": {\n        \"format\": \"monthAndDay\",\n        \"color\": \"#da5859\"\n    },\n    \"value\": [\n        \"2019/05/13\",\n        \"2019/05/20\"\n    ]\n}",
            "DashboardDefinitionId": "db39c916-c152-4a0a-a260-7c47f837692b"
        }
    ],
    "QueryText": null,
    "UseStore": false,
    "StoreEntity": null,
    "Version": 8,
    "Default": false
}