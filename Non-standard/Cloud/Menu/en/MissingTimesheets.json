{
  "DashboardDefinitionRoles": [

  ],
  "Id": "db39c916-c152-4a0a-a260-7c47f837692b",
  "Name": "Missing Timesheets",
  "Active": true,
  "Location": 0,
  "DocumentId": "00000000-0000-0000-0000-000000000000",
  "DocumentName": "",
  "DocumentTypeName": null,
  "DocumentsConfiguration": null,
  "Templates": [

  ],
  "DashboardDefinitionComponents": [
    {
      "Id": "6b294b94-22aa-4687-9db9-66d7b5d2328d",
      "Name": "Timesheet Blocking Dashboard",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 5,
      "Order": 3,
      "Parameters": "[{\"WidgetSubTitle\":\"Users' AD blocking log\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":28,\"WidgetYPosition\":11,\"WidgetRows\":18,\"WidgetColumns\":20,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":true,\"Metrics\":[{\"visible\":true,\"metricName\":\"# Unblocked Users\",\"metricFieldValue\":\"GrandTotalUnblock\"},{\"visible\":true,\"metricName\":\"# Blocked Users\",\"metricFieldValue\":\"GrandTotalBlock\"}]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"SELECT al.utcLogTime AS 'Date',\\n    ssu.oid as UserId,\\n\\tu.HasImage,\\n    ssu.username AS 'UserName',\\n    al.OperationType,\\n    case \\n        when al.OperationType in ('Block') then 'Blocked'\\n        when al.OperationType in ('Unblock') then 'Unblocked'\\n        end as [Type],\\n    replace(al.[Description], ssu.oid, ssu.UserName) AS 'Description',\\n    al.Executed,\\n    al.Error,\\n    sum(iif(al.OperationType in ('Unblock'),1,0)) over() as 'GrandTotalUnblock',\\n    sum(iif(al.OperationType in ('Block'),1,0)) over() as 'GrandTotalBlock'\\nFROM assistantlog al,\\n    SecuritySystemUser ssu,\\n\\t[User] u\\nWHERE \\n    al.[user] = ssu.oid and\\n\\tssu.Oid = u.Oid and\\n        ssu.username not in ('Internal Process', 'Support') and\\n    al.OperationType in ('Unblock','Block')\\n    /*[DateFilter]*/ and al.utcLogTime >= @FromDate and al.utcLogTime <= @ToDate /*[/DateFilter]*/\\nORDER BY DATE DESC\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[\"startDate\",\"endDate\"]}}]",
      "DashboardComponentType": {
        "Id": "1c5bcb1b-adf5-4b6f-94cd-f7dacaa568b2",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/ADBlockerLog/execute",
      "Configuration": "{\r\n    \"height\": \"330\",\r\n    \"hoverStateEnabled\": \"true\",\r\n    \"allowSorting\": \"true\",\r\n    \"grouping\": {\r\n        \"autoExpandAll\": \"true\"\r\n    },\r\n    \"scrolling\": {\r\n        \"mode\": \"infinite\"\r\n    },\r\n    \"columnAutoWidth\": \"true\",\r\n    \"searchPanel\": {\r\n        \"visible\": \"true\"\r\n    },\r\n    \"groupPanel\": {\r\n        \"visible\": \"true\"\r\n    },\r\n    \"export\": {\r\n        \"enabled\": \"true\",\r\n        \"fileName\": \"AssistantLog\"\r\n    },\r\n    \"sortByGroupSummaryInfo\": [\r\n        {\r\n            \"summaryItem\": \"count\"\r\n        }\r\n    ],\r\n    \"summary\": {\r\n        \"groupItems\": [\r\n            {\r\n                \"summaryType\": \"count\",\r\n                \"displayFormat\": \"{0} items\"\r\n            }\r\n        ],\r\n        \"totalItems\": [\r\n            {\r\n                \"column\": \"Executed\",\r\n                \"summaryType\": \"sum\",\r\n                \"valueFormat\": \"#,##0\",\r\n                \"displayFormat\": \"{0}\",\r\n                \"alignment\": \"right\",\r\n                \"cellTemplate\": \"function(e, i) {var h=e.append('<div>'+i.text+'</div>');if(i.value<0) {h.css('background-color','#f5564a').css('color','#ffffff')}}\"\r\n            }\r\n        ]\r\n    },\r\n    \"columns\": [\r\n        {\r\n            \"allowHeaderFiltering\": false,\r\n            \"dataField\": \"UserId\",\r\n            \"alignment\": \"right\",\r\n            \"format\": \"#,##0\",\r\n            \"width\": 30,\r\n            \"headerCellTemplate\": \" \",\r\n            \"cellTemplate\": \"function(e, i) { SW.showImage(e, 'user', 'small', i.data.HasImage, i.data.UserName, i.data.UserId);         }\"\r\n        },\r\n        {\r\n            \"dataField\": \"UserName\",\r\n            \"caption\": \"User\"\r\n        },\r\n        {\r\n            \"alignment\": \"center\",\r\n            \"dataField\": \"Type\",\r\n            \"caption\": \"Type\",\r\n            \"cellTemplate\": \"function(e, i) {              var h = document.createElement('DIV');                     e.appendChild(h);                    var span = document.createElement('span');                     h.appendChild(span);                    span.innerHTML = i.text;                     span.classList.add('dx-button-mode-contained');                    span.setAttribute('style',' color: #ffffff; display : inline-block ; border-radius : 2px ; padding: 3px 7px; font-weight: 700; white-space : nowrap');                    if(i.value=='Unblocked'|| i.value=='ADUnblocked') {                        span.style['background-color'            ]=' #488cbf';        }                     if(i.value=='Blocked'|| i.value=='ADBlocked') {                        span.style['background-color'            ]=' #da5859';        };    }\"\r\n        },\r\n        {\r\n            \"dataField\": \"Date\",\r\n            \"caption\": \"Date\",\r\n            \"dataType\": \"date\",\r\n            \"format\": \"dd/MM/yyyy HH:mm:ss\",\r\n            \"sortOrder\": \"desc\"\r\n        },\r\n        {\r\n            \"dataField\": \"Executed\",\r\n            \"caption\": \"Executed\"\r\n        }\r\n    ]\r\n}",
      "DashboardDefinitionId": "db39c916-c152-4a0a-a260-7c47f837692b"
    },
    {
      "Id": "28491d71-3987-40be-8a16-7fb88bdfe9e1",
      "Name": "Select the desired range",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 12,
      "Order": 4,
      "Parameters": "[{\"WidgetSubTitle\":\"Blocked and unblocked users\",\"WidgetType\":\"rangeselector\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#e0e0e0\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":0,\"WidgetRows\":11,\"WidgetColumns\":48,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"startDate\":\"2019/04/01\",\"endDate\":\"2019/08/30\",\"type\":\"year\",\"visible\":false},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"SELECT    max(al.utcLogTime) AS 'Date', \\n          sum(iif(al.OperationType in ('Unblock', 'ADUnblock'), 1, 0)) as 'Unblock',\\n          sum(iif(al.OperationType in ('Block', 'ADBlock'), 1, 0)) as 'Block'\\nFROM      AssistantLog al\\nGROUP BY   datepart(yyyy, al.utcLogTime), datepart(mm, al.utcLogTime), datepart(dd, al.utcLogTime)\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]",
      "DashboardComponentType": {
        "Id": "1c5bcb1b-adf5-4b6f-94cd-f7dacaa568b2",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/ADBlockerLogsCount/execute",
      "Configuration": "{\r\n    \"onDisposing\": \"function (e,c) {debugger; var test=new Date();}\",\r\n    \"height\": 100,\r\n    \"containerBackgroundColor\": \"#e0e0e0\",\r\n    \"selectedRangeColor\": \"#f5564a\",\r\n    \"chart\": {\r\n        \"commonSeriesSettings\": {\r\n            \"type\": \"steparea\",\r\n            \"argumentField\": \"Date\"\r\n        },\r\n        \"series\": [\r\n            {\r\n                \"valueField\": \"Unblock\"\r\n            },\r\n            {\r\n                \"valueField\": \"Block\"\r\n            }\r\n        ]\r\n    },\r\n    \"scale\": {\r\n        \"minorTickInterval\": \"day\",\r\n        \"tickInterval\": \"day\",\r\n        \"valueType\": \"datetime\"\r\n    },\r\n    \"sliderMarker\": {\r\n        \"format\": \"monthAndDay\",\r\n        \"color\": \"#da5859\"\r\n    },\r\n    \"value\": [\r\n        \"2019/05/13\",\r\n        \"2019/05/20\"\r\n    ]\r\n}",
      "DashboardDefinitionId": "db39c916-c152-4a0a-a260-7c47f837692b"
    },
    {
      "Id": "1dcc793a-a68e-4230-9bd8-a2965dce35f6",
      "Name": "Users Missing Timesheets",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 7,
      "Order": 2,
      "Parameters": "[\r\n    {\r\n        \"WidgetSubTitle\": \"Users' missing timesheets and AD status\",\r\n        \"WidgetType\": \"grid\",\r\n        \"WidgetFilterField\": \"\",\r\n        \"WidgetColor\": \"\",\r\n        \"WidgetFrameStyle\": {},\r\n        \"WidgetXPosition\": 0,\r\n        \"WidgetYPosition\": 11,\r\n        \"WidgetRows\": 18,\r\n        \"WidgetColumns\": 28,\r\n        \"WidgetHeader\": {\r\n            \"showContextInfo\": false,\r\n            \"WidgetPeriodChooser\": {\r\n                \"type\": \"year\",\r\n                \"visible\": false\r\n            },\r\n            \"WidgetMetrics\": {\r\n                \"visible\": true,\r\n                \"Metrics\": [\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"# Users missing hours\",\r\n                        \"metricFieldValue\": \"GrandTotalUsersMissingHours\"\r\n                    },\r\n                    {\r\n                        \"visible\": true,\r\n                        \"metricName\": \"# Missing hours\",\r\n                        \"metricFieldValue\": \"GrandTotalMissingHours\"\r\n                    }\r\n                ]\r\n            },\r\n            \"showSubTitle\": true,\r\n            \"showTitle\": true\r\n        },\r\n        \"WidgetDataSources\": {\r\n            \"main\": {\r\n                \"type\": \"querytext\",\r\n                \"value\": \"select t.UserId,\\n    ssu.UserName, \\n\\tu.HasImage,\\n    u.AdUserName, \\n    u.TimesheetRequired , \\n    u.HasToFillTimesheets , \\n    u.IsBlockedInAd, \\n    ssu.IsActive, \\n\\tt.MissingDays,\\n\\tt.MissingHours,\\nsum(t.MissingHours) over() as 'GrandTotalMissingHours',\\ncount(ssu.UserName) over() as 'GrandTotalUsersMissingHours'\\nfrom\\n    (   \\n          select\\n            v.UserId,\\n            Name,\\n            Company,\\n            --cast(MissingHours as float) as MissingHours,\\n\\t\\t\\tSTRING_AGG(CONVERT(VARCHAR(10), Day, 111) , ', ') within group (order by Day asc) as MissingDays,\\n\\t\\t\\tround(sum(MissingHours), 2) as MissingHours\\n        from SkillTimesheetMissingReport v with(NOLOCK), UserUsers_CompanyCompanies uc with(NOLOCK)\\n        where  \\n\\t\\t\\tv.[Day] between @FromDate and @ToDate and\\n\\t\\t\\tuc.Users = @CurrentUserId\\n\\t\\t\\tand uc.Companies = v.CompanyId\\n\\t\\tgroup by v.UserId, v.Name, v.Company\\n         -- and ( v.ResponsibleId = @CurrentUserId or v.UserId = @CurrentUserId)\\n\\n         union all\\n      \\n        select\\n            v.UserId,\\n            Name,\\n            Company,\\n            --cast(MissingHours as float) as MissingHours,\\n\\t\\t\\tSTRING_AGG(CONVERT(VARCHAR(10), Day, 111) , ', ') within group (order by Day asc) as MissingDays,\\n\\t\\t\\tround(sum(MissingHours), 2) as MissingHours\\n        from SkillWeeklyTimesheetMissingReport v with(NOLOCK), UserUsers_CompanyCompanies uc with(NOLOCK)\\n        where   \\n\\t\\t\\tv.[Day] between @FromDate and @ToDate and\\n\\t\\t\\tuc.Users = @CurrentUserId\\n\\t\\t\\tand uc.Companies = v.CompanyId\\n\\t\\tgroup by v.UserId, v.Name, v.Company\\n         -- and ( v.ResponsibleId = @CurrentUserId or v.UserId = @CurrentUserId)\\n\\n    ) t, [User] u, SecuritySystemUser ssu\\nwhere  u.Oid = ssu.Oid \\n   --and u.IsBlockedInAd = 1 \\n   -- and u.HasToFillTimesheets = 1\\n    --and u.TimesheetRequired = 1 \\n   and t.UserId = u.Oid \\n   -- and t.UserId = ssu.Oid\\n--group by t.UserId, t.Name, ssu.UserName, u.AdUserName, u.TimesheetRequired , u.HasToFillTimesheets , u.IsBlockedInAd, ssu.IsActive\\norder by MissingDays desc\",\r\n                \"mapping\": \"\"\r\n            }\r\n        },\r\n        \"Filters\": {},\r\n        \"QueryConfiguration\": {\r\n            \"RequiredFilters\": [\r\n                \"startDate\",\r\n                \"endDate\"\r\n            ]\r\n        }\r\n    }\r\n]",
      "DashboardComponentType": {
        "Id": "1c5bcb1b-adf5-4b6f-94cd-f7dacaa568b2",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/ADBlockerTimesheetDashboard/execute",
      "Configuration": "{\r\n    \"height\": \"330\",\r\n    \"hoverStateEnabled\": \"true\",\r\n    \"allowSorting\": \"true\",\r\n    \"grouping\": {\r\n        \"autoExpandAll\": \"true\"\r\n    },\r\n    \"columnAutoWidth\": \"true\",\r\n    \"searchPanel\": {\r\n        \"visible\": \"true\"\r\n    },\r\n    \"scrolling\": {\r\n        \"mode\": \"infinite\"\r\n    },\r\n    \"groupPanel\": {\r\n        \"visible\": \"true\"\r\n    },\r\n    \"export\": {\r\n        \"enabled\": \"true\",\r\n        \"fileName\": \"AssistantLog\"\r\n    },\r\n    \"sortByGroupSummaryInfo\": [\r\n        {\r\n            \"summaryItem\": \"count\"\r\n        }\r\n    ],\r\n    \"allowColumnResizing\": \"true\",\r\n    \"summary\": {\r\n        \"groupItems\": [\r\n            {\r\n                \"summaryType\": \"count\",\r\n                \"displayFormat\": \"{0} items\"\r\n            }\r\n        ],\r\n        \"totalItems\": [\r\n            {\r\n                \"column\": \"MissingHours\",\r\n                \"summaryType\": \"sum\",\r\n                \"valueFormat\": \"#,##0\",\r\n                \"displayFormat\": \"{0}\",\r\n                \"alignment\": \"right\",\r\n                \"cellTemplate\": \"function(e, i) {var h=e.append('<div>'+i.text+'</div>');if(i.value<0) {h.css('background-color','#f5564a').css('color','#ffffff')}}\"\r\n            }\r\n        ]\r\n    },\r\n    \"columns\": [\r\n        {\r\n            \"allowHeaderFiltering\": false,\r\n            \"dataField\": \"UserId\",\r\n            \"alignment\": \"right\",\r\n            \"format\": \"#,##0\",\r\n            \"width\": 30,\r\n            \"headerCellTemplate\": \" \",\r\n            \"cellTemplate\": \"function(e, i) {                SW.showImage(e, 'user', 'small', i.data.HasImage, i.data.UserName, i.data.UserId);            }\"\r\n        },\r\n        {\r\n            \"dataField\": \"UserName\",\r\n            \"caption\": \"Username\"\r\n        },\r\n        {\r\n            \"dataField\": \"AdUserName\",\r\n            \"caption\": \"Ad Username\"\r\n        },\r\n        {\r\n            \"dataField\": \"TimesheetRequired\",\r\n            \"caption\": \"Timesheet Required\",\r\n            \"visible\": \"false\"\r\n        },\r\n        {\r\n            \"dataField\": \"HasToFillTimesheets\",\r\n            \"caption\": \"Blocked in Skills\"\r\n        },\r\n        {\r\n            \"dataField\": \"IsBlockedInAd\",\r\n            \"caption\": \"Blocked In Ad\"\r\n        },\r\n        {\r\n            \"dataField\": \"MissingHours\",\r\n            \"caption\": \"# Missing Hours\"\r\n        },\r\n        {\r\n            \"alignment\": \"center\",\r\n            \"caption\": \"Missing Days\",\r\n            \"dataField\": \"MissingDays\",\r\n            \"cellTemplate\": \"function(container, options) { var h = document.createElement('DIV');                 container.appendChild(h);                h.dataset['id'        ] = options.data.MissingDays;                h.onclick = function(e) {alert(this.attributes['data-id'            ].value)        };                h.setAttribute('class', 'dx-button dx-button-normal dx-button-mode-contained dx-widget dx-button-has-text');                var h1 = document.createElement('DIV');                 h.appendChild(h1);                h1.classList.add('dx-button-content');                var span = document.createElement('span');                 h1.appendChild(span);                span.classList.add('dx-button-text');                span.innerHTML = 'View'; debugger;    }\"\r\n        }\r\n    ]\r\n}",
      "DashboardDefinitionId": "db39c916-c152-4a0a-a260-7c47f837692b"
    }
  ],
  "QueryText": null,
  "UseStore": false,
  "StoreEntity": null,
  "Version": 9,
  "Default": false
}
