{"DashboardDefinitionRoles":[],"Id":"37344e92-2ceb-4d5f-abb5-e38f5831ddd6","Name":"Users in Gamification","Active":true,"Location":0,"DocumentId":"00000000-0000-0000-0000-000000000000","DocumentName":"","DocumentTypeName":"usergamification","DocumentsConfiguration":"{}","Templates":[],"DashboardDefinitionComponents":[{"Id":"3e5c7a19-4de5-41d3-944f-0f09fe1952f5","Name":"Update","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"There is an automatic update every hour\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":21,\"WidgetRows\":3,\"WidgetColumns\":18,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":true,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"queryempty\",\"mapping\":\"\",\"value\":\"{\\\"entities\\\":[],\\\"fields\\\":[]}\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"items\": [\r\n        {\r\n            \"dataField\": \"\",\r\n            \"editorType\": \"dxButton\",\r\n            \"editorOptions\": {\r\n                \"text\": \"Update now\",\r\n                \"onClick\": \"function(e) { SW.executeAPI('POST', 'gamification/users/achievements/update'); var rc = SW.getComponent('rank-component'); if (!rc) return; return rc.refresh(); }\"\r\n            }\r\n        }\r\n    ]\r\n}","DashboardDefinitionId":"37344e92-2ceb-4d5f-abb5-e38f5831ddd6"},{"Id":"4bbbf3bf-3e39-4daa-94bf-39da0e962b46","Name":"Rank","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"Users ranked based on their points\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":0,\"WidgetRows\":21,\"WidgetColumns\":18,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":true,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"queryempty\",\"value\":\"{\\\"entities\\\":[{\\\"name\\\":\\\"\\\"}],\\\"fields\\\":[]}\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\"dataSource\":{\"load\":\"function load(){\\r\\n    return SW.executeAPI('GET', 'gamification/users').then(\\r\\n        result => { return Promise.resolve(result) }\\r\\n    );\\r\\n}\"},\"onRowClick\":\"function click(e) {\\r\\n    if (!e.data.UserId) return;\\r\\n    SW.saveComponent(e.data, 'rank-data');\\r\\n\\r\\n    var pc = SW.getComponent(\\\"profile-component\\\");\\r\\n    if (!pc) return;    \\r\\n    SW.executeAPI('GET', 'gamification/users/' + e.data.UserId + '/points-information').then(\\r\\n        result => {\\r\\n            var i = result.PointsStartOfNextLevel - result.PointsStartOfCurrentLevel;\\r\\n            var p = i * result.PercentageToNextLevel / 100;\\r\\n\\r\\n            var pd = {\\r\\n                \\\"UserId\\\": e.data.UserId,\\r\\n                \\\"UserName\\\": e.data.UserName,\\r\\n                \\\"Name\\\": e.data.Name,\\r\\n                \\\"Company\\\": e.data.Company,\\r\\n                \\\"Department\\\": e.data.Department,\\r\\n                \\\"HasImage\\\": e.data.HasImage,\\r\\n                \\\"TotalPoints\\\": e.data.TotalPoints,\\r\\n                \\\"Rank\\\": e.data.Rank,\\r\\n                \\\"Level\\\": e.data.Level,\\r\\n                \\\"Progress\\\": p,\\r\\n                \\\"PointsInterval\\\": i,\\r\\n                \\\"PointsLeft\\\": i - p\\r\\n            };\\r\\n            SW.saveComponent(pd, 'profile-data');\\r\\n            pc.option(\\\"formData\\\", pd);\\r\\n        }\\r\\n    );\\r\\n\\r\\n    var ac = SW.getComponent(\\\"achievements-component\\\");\\r\\n    if (!ac) return;\\r\\n    ac.refresh();\\r\\n}\",\"onContentReady\":\"function ready(e) {\\r\\n    var user = e.component.getKeyByRowIndex(1);\\r\\n    if (!user) return;\\r\\n    \\r\\n    e.component.selectRowsByIndexes(1);\\r\\n    SW.saveComponent(e.component, \\\"rank-component\\\");\\r\\n    \\r\\n    if (!user.UserId) return;\\r\\n    SW.saveComponent(user, 'rank-data');\\r\\n\\r\\n    var pc = SW.getComponent(\\\"profile-component\\\");\\r\\n    if (!pc) return;\\r\\n    SW.executeAPI('GET', 'gamification/users/' + user.UserId + '/points-information').then(\\r\\n        result => {\\r\\n            var i = result.PointsStartOfNextLevel - result.PointsStartOfCurrentLevel;\\r\\n            var p = i * result.PercentageToNextLevel / 100;\\r\\n\\r\\n            var pd = {\\r\\n                \\\"UserId\\\": user.UserId,\\r\\n                \\\"UserName\\\": user.UserName,\\r\\n                \\\"Name\\\": user.Name,\\r\\n                \\\"Company\\\": user.Company,\\r\\n                \\\"Department\\\": user.Department,\\r\\n                \\\"HasImage\\\": user.HasImage,\\r\\n                \\\"TotalPoints\\\": user.TotalPoints,\\r\\n                \\\"Rank\\\": user.Rank,\\r\\n                \\\"Level\\\": user.Level,\\r\\n                \\\"Progress\\\": p,\\r\\n                \\\"PointsInterval\\\": i,\\r\\n                \\\"PointsLeft\\\": i - p\\r\\n            };\\r\\n            SW.saveComponent(pd, 'profile-data');\\r\\n            pc.option(\\\"formData\\\", pd);\\r\\n        }\\r\\n    )\\r\\n\\r\\n    var ac = SW.getComponent(\\\"achievements-component\\\");\\r\\n    if (!ac) return;\\r\\n    ac.refresh();\\r\\n}\",\"columns\":[{\"dataField\":\"Id\",\"visible\":false},{\"dataField\":\"Image\",\"alignment\":\"right\",\"caption\":\"\",\"cellTemplate\":\"function(e, i) { SK.showImage(e, 'user', 'medium', i.data.HasImage, i.data.UserName, i.data.UserId); }\",\"width\":50},\"Name\",\"Company\",\"Department\",{\"dataField\":\"TotalPoints\",\"alignment\":\"center\"},{\"dataField\":\"Level\",\"alignment\":\"center\",\"groupIndex\":0,\"sortOrder\":\"desc\",\"width\":75},{\"dataField\":\"Rank\",\"alignment\":\"center\",\"width\":75}],\"columnChooser\":{\"enabled\":false},\"grouping\":{\"autoExpandAll\":true},\"height\":\"90%\",\"selection\":{\"mode\":\"single\"},\"stateStoring\":{\"enabled\":false}}","DashboardDefinitionId":"37344e92-2ceb-4d5f-abb5-e38f5831ddd6"},{"Id":"d79a2702-7c95-4980-900f-40fdf4dfddc2","Name":"Profile","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":18,\"WidgetYPosition\":0,\"WidgetRows\":6,\"WidgetColumns\":6,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"queryempty\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"items\": [\r\n        {\r\n            \"template\": \"<p style='text-align:center;'>WIP</p><p style='text-align:center;'>User Image</p>\"\r\n        }\r\n    ]\r\n}","DashboardDefinitionId":"37344e92-2ceb-4d5f-abb5-e38f5831ddd6"},{"Id":"3542f0f5-3906-4b8c-87c6-76f73b8313a6","Name":"Achievent Level","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":18,\"WidgetYPosition\":15,\"WidgetRows\":9,\"WidgetColumns\":30,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"queryempty\",\"value\":\"\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\"dataSource\":{\"load\":\"function load() {\\r\\n    var rc = SW.getComponent('rank-data');\\r\\n    if (!rc || !rc.UserId) return;\\r\\n\\r\\n    var ac = SW.getComponent('achievements-data');\\r\\n    if (!ac || !ac.Id) return;\\r\\n        \\r\\n    return SW.executeAPI('GET', 'gamification/users/' + rc.UserId + '/achievements/' + ac.Id).then(\\r\\n        result => { return Promise.resolve(result) }\\r\\n    );\\r\\n}\"},\"onContentReady\":\"function ready(e) {\\r\\n    SW.saveComponent(e.component, 'levels-component');\\r\\n}\",\"columns\":[\"Name\",\"Type\",{\"dataField\":\"Goal\",\"alignment\":\"center\",\"width\":125},{\"dataField\":\"ProgressInPercentage\",\"caption\":\"Progress (%)\",\"alignment\":\"center\",\"width\":125},{\"dataField\":\"ValueInPoints\",\"caption\":\"Reward (points)\",\"alignment\":\"center\",\"width\":125},\"IsBlocked\",\"ImageUrl\"],\"allowColumnReordering\":false,\"allowColumnResizing\":false,\"columnChooser\":{\"enabled\":false},\"groupPanel\":{\"visible\":false},\"height\":\"90%\",\"selection\":{\"mode\":\"none\"},\"stateStoring\":{\"enabled\":false}}","DashboardDefinitionId":"37344e92-2ceb-4d5f-abb5-e38f5831ddd6"},{"Id":"b700013a-ab69-4c1b-ae60-9a329c3a9269","Name":"Profile picture - work in progress","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"Here for testing purposes\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":4,\"WidgetYPosition\":30,\"WidgetRows\":11,\"WidgetColumns\":17,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":true,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"queryempty\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"","DashboardDefinitionId":"37344e92-2ceb-4d5f-abb5-e38f5831ddd6"},{"Id":"871ee631-85f5-48a9-9fb6-dd7506455596","Name":"Achievements","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"Achievements endpoint: http://localhost:30449/api/gamification/users/{UserId}/achievements\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":18,\"WidgetYPosition\":6,\"WidgetRows\":9,\"WidgetColumns\":30,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"queryempty\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\"dataSource\":{\"load\":\"function load(){\\r\\n    var user = SW.getComponent('rank-data');\\r\\n    if (user == null) return;\\r\\n        \\r\\n    return SW.executeAPI('GET', 'gamification/users/' + user.UserId + '/achievements').then(\\r\\n        result => { return Promise.resolve(result) }\\r\\n    );\\r\\n}\"},\"onContentReady\":\"function ready(e) {\\r\\n    SW.saveComponent(e.component, \\\"achievements-component\\\");\\r\\n\\r\\n    var achievement = e.component.getKeyByRowIndex(0);\\r\\n    if (!achievement) return;\\r\\n\\r\\n    e.component.selectRowsByIndexes(0);\\r\\n\\r\\n    SW.saveComponent(achievement, 'achievements-data');\\r\\n\\r\\n    var lc = SW.getComponent(\\\"levels-component\\\");\\r\\n    if (!lc) return;\\r\\n    lc.refresh();\\r\\n}\",\"columns\":[\"Description\",\"Progress\"],\"allowColumnReordering\":false,\"allowColumnResizing\":false,\"columnChooser\":{\"enabled\":false},\"groupPanel\":{\"visible\":false},\"height\":\"90%\",\"selection\":{\"mode\":\"none\"},\"onRowClick\":\"function click(e) {\\r\\n    SW.saveComponent(e.data, 'achievements-data');\\r\\n\\r\\n    var lc = SW.getComponent(\\\"levels-component\\\");\\r\\n    if (!lc) return;\\r\\n    lc.refresh();\\r\\n}\",\"stateStoring\":{\"enabled\":false}}","DashboardDefinitionId":"37344e92-2ceb-4d5f-abb5-e38f5831ddd6"},{"Id":"6cea36c2-78df-44f8-9e7f-e24ed0db86cb","Name":"Example","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":27,\"WidgetYPosition\":30,\"WidgetRows\":11,\"WidgetColumns\":17,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":true,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"queryjson\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"items\": [\r\n        {\r\n            \"template\": \"<img src='https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2Fthumb%2Fa%2Fa9%2FAFS_Interkulturelle_Begegnungen_Logo.svg%2F1200px-AFS_Interkulturelle_Begegnungen_Logo.svg.png&f=1&nofb=1' />\"\r\n        }\r\n    ]\r\n}","DashboardDefinitionId":"37344e92-2ceb-4d5f-abb5-e38f5831ddd6"},{"Id":"d24b44ba-83bd-42ce-9c50-fb1c823f1bdf","Name":"Profile","Active":true,"UseQuery":false,"Query":"","Size":12,"Order":0,"Parameters":"[{\"WidgetSubTitle\":\"Gamification stats of the user (WIP) endpoint: http://localhost:30449/api/gamification/users/{UserId}/points-information\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":24,\"WidgetYPosition\":0,\"WidgetRows\":6,\"WidgetColumns\":24,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"queryempty\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]","DashboardComponentType":{"Id":"3c1da83b-efe9-4b70-87d0-c3813a512774","Name":"Generic Dashboard","ComponentTypeNumber":42},"AnalyticsApiUrl":"","Configuration":"{\r\n    \"colCount\": \"2\",\r\n    \"items\": [\r\n        {\r\n            \"dataField\": \"Name\",\r\n            \"editorType\": \"dxTextBox\",\r\n            \"editorOptions\": {\r\n                \"readOnly\": true\r\n            }\r\n        },\r\n        {\r\n            \"dataField\": \"UserName\",\r\n            \"editorType\": \"dxTextBox\",\r\n            \"editorOptions\": {\r\n                \"readOnly\": true\r\n            }\r\n        },\r\n        {\r\n            \"dataField\": \"Company\",\r\n            \"editorType\": \"dxTextBox\",\r\n            \"editorOptions\": {\r\n                \"readOnly\": true\r\n            }\r\n        },\r\n        {\r\n            \"dataField\": \"Department\",\r\n            \"editorType\": \"dxTextBox\",\r\n            \"editorOptions\": {\r\n                \"readOnly\": true\r\n            }\r\n        },\r\n        {\r\n            \"dataField\": \"TotalPoints\",\r\n            \"editorType\": \"dxNumberBox\",\r\n            \"editorOptions\": {\r\n                \"readOnly\": true\r\n            }\r\n        },\r\n        {\r\n            \"dataField\": \"Rank\",\r\n            \"editorType\": \"dxNumberBox\",\r\n            \"editorOptions\": {\r\n                \"readOnly\": true\r\n            }\r\n        },\r\n        {\r\n            \"dataField\": \"Level\",\r\n            \"editorType\": \"dxNumberBox\",\r\n            \"editorOptions\": {\r\n                \"readOnly\": true\r\n            }\r\n        },\r\n        {\r\n            \"dataField\": \"Progress\",\r\n            \"editorType\": \"dxProgressBar\",\r\n            \"editorOptions\": {\r\n                \"statusFormat\": \"function(e) { var pd = SW.getComponent('profile-data'); return pd.PointsLeft + (pd.PointsLeft == 1 ? ' exp point' : ' exp points') + ' left to reach level ' + (pd.Level + 1); }\",\r\n                \"statusPosition\": \"bottom right\",\r\n                \"onContentReady\": \"function(e) { }\",\r\n                \"onValueChanged\": \"function(e) { }\",\r\n                \"onOptionChanged\": \"function(e) { var pd = SW.getComponent('profile-data'); if (!pd) return; e.component._options.max = pd.PointsInterval; }\"\r\n            }\r\n        }\r\n    ],\r\n    \"onContentReady\": \"function(e){ SW.saveComponent(e.component, 'profile-component');}\"\r\n}","DashboardDefinitionId":"37344e92-2ceb-4d5f-abb5-e38f5831ddd6"}],"QueryText":"return SW.executeAPI('GET', 'gamification/users').then(\r\n    result => { return Promise.resolve(result)}\r\n)","UseStore":false,"StoreEntity":"usergamification","Version":0,"Default":false}