{
    "DashboardDefinitionRoles":[],
    "Id":"eff11926-0668-4ccf-9151-22e7dc228dae",
    "Name":"Client Requests",
    "Active":true,
    "Location":0,
    "DocumentId":"00000000-0000-0000-0000-000000000000",
    "DocumentName":"",
    "DocumentTypeName":"Operations",
    "DocumentsConfiguration":"{}",
    "Templates":[],
    "DashboardDefinitionComponents":[
       {
          "Id":"f285d513-83c8-4a87-b203-2237046113b7",
          "Name":"Tickets per Client",
          "Active":true,
          "UseQuery":false,
          "Query":"",
          "Size":12,
          "Order":0,
          "Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"chart\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#f7f7f7\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":29,\"WidgetYPosition\":4,\"WidgetRows\":11,\"WidgetColumns\":19,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select  top 15\\n        j.Client as Client, \\n        count(1) as JobCount,\\n        sum(iif(j.[State] = 'Move to Production', 1, 0)) as MovetoProduction,\\n        sum(iif(j.[State] = 'Under Approval', 1, 0)) as UnderApproval,\\n        sum(iif(j.[State] = 'Request more Information', 1, 0)) as RequestMoreInformation,\\n        sum(iif(j.[State] = 'Open', 1, 0)) as [Open],\\n        sum(iif(j.[State] = 'Request Aproval', 1, 0)) as RequestAproval,\\n        sum(iif(j.[State] = 'On Hold', 1, 0)) as OnHold,\\n        sum(iif(j.[State] = 'To Do', 1, 0)) as toDo,\\n        sum(iif(j.[State] = 'Under Analysis', 1, 0)) as UnderAnalysis,\\n        sum(iif(j.[State] = 'Request UAT', 1, 0))  as RequestUAT,\\n        sum(iif(j.[State] = 'Waiting', 1, 0)) as Waiting,\\n        sum(iif(j.[State] = 'Work in Progress', 1, 0)) as WorkInProgress\\nfrom    Analytics.DatamartJob j\\nwhere   j.Department in ('Client Service', 'Support') and\\n        j.[State] in ('To Do', 'Open', 'Under Analysis', 'Move To Production', 'Waiting', 'On Hold', 'Request More Information', 'Request UAT', 'Request Approval', 'Work in Progress', 'Under Approval') and\\n        j.[Date] >= @FromDate and j.[Date] < @ToDate \\ngroup by j.Client\\norder by JobCount desc\\n\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"startDate\",\"endDate\"]}}]",
          "DashboardComponentType":{
             "Id":"84ee5399-f21a-42eb-9c52-810ca7ac1e22",
             "Name":"Generic Dashboard",
             "ComponentTypeNumber":42
          },
          "AnalyticsApiUrl":"",
          "Configuration":"{\n    \"onPointClick\": \"function (e) {            e.event.cancel = true;           var dataGrid = SW.getComponent('dataGrid');           dataGrid.clearFilter();              dataGrid.searchByText(e.target.data.Client);}\",\n    \"valueAxis\": {\n        \"grid\": {\n            \"visible\": false\n        }\n    },\n    \"size\": {\n        \"height\": \"200\"\n    },\n    \"palette\": \"Material\",\n    \"rotated\": false,\n    \"commonSeriesSettings\": {\n        \"argumentField\": \"Client\",\n        \"valueField\": \"\",\n        \"type\": \"stackedbar\",\n        \"ignoreEmptyPoints\": \"true\",\n        \"label\": {\n            \"showForZeroValues\": false,\n            \"visible\": \"true\",\n            \"font\": {\n                \"size\": 10,\n                \"family\": \"Varela Round\"\n            },\n            \"backgroundColor\": \"#00000000\"\n        }\n    },\n    \"argumentAxis\": {\n        \"label\": {\n            \"overlappingBehavior\": \"stagger\",\n            \"wordWrap\": \"none\",\n            \"textOverflow\": \"ellipsis\",\n            \"font\": {\n                \"size\": \"8\",\n                \"family\": \"Varela Round\"\n            }\n        }\n    },\n    \"series\": [\n        {\n            \"valueField\": \"UnderAnalysis\",\n            \"name\": \"Under Analysis\",\n            \"caption\": \"Under Analysis\",\n            \"stack\": \"Efforts\",\n            \"color\": \"#B5E8B0\"\n        },\n        {\n            \"valueField\": \"ToDo\",\n            \"name\": \"To do\",\n            \"caption\": \"To Do\",\n            \"stack\": \"Efforts\",\n            \"color\": \"#FFCC00\"\n        },\n        {\n            \"valueField\": \"MoveToProduction\",\n            \"name\": \"Move to Production\",\n            \"caption\": \"Move to Production\",\n            \"stack\": \"Efforts\",\n            \"color\": \"#A63CB7\"\n        },\n        {\n            \"valueField\": \"UnderApproval\",\n            \"name\": \"Under Approval\",\n            \"caption\": \"Under Approval\",\n            \"stack\": \"Efforts\",\n            \"color\": \"#446FD2\"\n        },\n        {\n            \"valueField\": \"Open\",\n            \"name\": \"Open\",\n            \"caption\": \"Open\",\n            \"stack\": \"Efforts\",\n            \"color\": \"#A63CB7\"\n        },\n        {\n            \"valueField\": \"RequestApproval\",\n            \"name\": \"Request Approval\",\n            \"caption\": \"Request Approval\",\n            \"stack\": \"Efforts\",\n            \"color\": \"#446FD2\"\n        },\n        {\n            \"valueField\": \"RequestUAT\",\n            \"name\": \"Request UAT\",\n            \"caption\": \"Request UAT\",\n            \"stack\": \"Efforts\",\n            \"color\": \"#D1726C\"\n        },\n        {\n            \"valueField\": \"RequestMoreInformation\",\n            \"name\": \"Request More Information\",\n            \"caption\": \"Request More Information\",\n            \"stack\": \"Efforts\",\n            \"color\": \"#89BEF3\"\n        },\n        {\n            \"valueField\": \"OnHold\",\n            \"name\": \"On Hold\",\n            \"caption\": \"On Hold\",\n            \"stack\": \"Efforts\",\n            \"color\": \"#B4A0E8\"\n        },\n        {\n            \"valueField\": \"Waiting\",\n            \"name\": \"Waiting\",\n            \"caption\": \"Waiting\",\n            \"stack\": \"Efforts\",\n            \"color\": \"#94DF89\"\n        },\n        {\n            \"valueField\": \"WorkInProgress\",\n            \"name\": \"Work in Progress\",\n            \"caption\": \"Work in Progress\",\n            \"stack\": \"Efforts\",\n            \"color\": \"#89BEF3\"\n        }\n    ]\n}",
          "DashboardDefinitionId":"eff11926-0668-4ccf-9151-22e7dc228dae"
       },
       {
          "Id":"a0a47d66-4959-4921-95d2-4ad27ce24188",
          "Name":"Month",
          "Active":true,
          "UseQuery":false,
          "Query":"",
          "Size":12,
          "Order":0,
          "Parameters":"[{\"WidgetSubTitle\":\"Closed and In Progress Tickets\",\"WidgetType\":\"rangeselector\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#e3e3e3\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":0,\"WidgetRows\":4,\"WidgetColumns\":48,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"startDate\":\"2020/01/01\",\"endDate\":\"2020/12/30\",\"type\":\"year\",\"visible\":false},\"showSubTitle\":false,\"showTitle\":false},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select  datepart(year, j.[Date]) as Year,\\n        datepart(week, j.[Date]) as [Week],\\n        min(j.[Date]) as WeekStart,\\n        sum(iif(j.[State] in ('Done', 'Closed (unrelated)', 'Closed'), 1, 0)) as Done,\\n        sum(iif(j.[State] not in ('Canceled', 'Done', 'Closed', 'Closed (unrelated)', 'Draft', 'Development Under Approval', 'In QA Tests', 'Move to Production','PM Tests', 'To Install', 'Under Development', 'Scheduled for Development'), 1, 0)) as [Open]\\nfrom    Analytics.DatamartJob j \\nwhere   j.Department in ('Support', 'Client Service') and\\n        year(j.Date) in (year(getdate()) - 1, year(getdate()))\\ngroup by datepart(year, j.[Date]),\\n         datepart(week, j.[Date])\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":null}]",
          "DashboardComponentType":{
             "Id":"84ee5399-f21a-42eb-9c52-810ca7ac1e22",
             "Name":"Generic Dashboard",
             "ComponentTypeNumber":42
          },
          "AnalyticsApiUrl":"",
          "Configuration":"{\n    \"onDrawn\": \"function(s) {          var curr = new Date;        var monday = new Date(curr.setDate(curr.getDate() - curr.getDay()+1));        var sunday = new Date(curr.setDate(curr.getDate() - curr.getDay()+7));            monday.setHours(0, 0, 0, 0);        sunday.setHours(23, 59, 59, 0);           s.component.option('value', [monday, sunday]);    }\",\n    \"size\": {\n        \"height\": \"120\"\n    },\n    \"containerBackgroundColor\": \"#e0e0e0\",\n    \"selectedRangeColor\": \"#f5564a\",\n    \"chart\": {\n        \"commonSeriesSettings\": {\n            \"type\": \"steparea\",\n            \"argumentField\": \"WeekStart\"\n        },\n        \"series\": [\n            {\n                \"valueField\": \"Done\"\n            },\n            {\n                \"valueField\": \"Open\"\n            }\n        ]\n    },\n    \"scale\": {\n        \"minorTickInterval\": \"week\",\n        \"tickInterval\": \"week\",\n        \"valueType\": \"datetime\"\n    },\n    \"sliderMarker\": {\n        \"format\": \"monthAndDay\",\n        \"color\": \"#da5859\"\n    },\n    \"value\": {\n        \"length\": {\n            \"weeks\": 1\n        }\n    }\n}",
          "DashboardDefinitionId":"eff11926-0668-4ccf-9151-22e7dc228dae"
       },
       {
          "Id":"dfc4df52-51ca-49e0-94f6-aa986b62794f",
          "Name":"Unassigned",
          "Active":true,
          "UseQuery":false,
          "Query":"",
          "Size":12,
          "Order":0,
          "Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"chart\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#f7f7f7\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":4,\"WidgetRows\":11,\"WidgetColumns\":5,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select  'Unassigned' as Executor,\\n        count(*) as Count\\nfrom    Analytics.DatamartJob j\\nwhere   j.Department in ('Support', 'Client Service') and\\n        j.Date between @FromDate and @ToDate and\\n        j.[State] in ('To Do', 'Open', 'Under Analysis', 'Move To Production', 'Waiting', 'On Hold', 'Request More Information', 'Request UAT', 'Request Approval', 'Work in Progress', 'Under Approval') and\\n        not exists\\n        (\\n            select  1\\n            from    Assignment ass, AssignmentType ast, Department dep, [User] u \\n            where   ass.DocumentOid = j.Oid and \\n                    ast.Name = 'Executor' and \\n                    ass.AssignmentType = ast.Oid and \\n                    ass.[User] = u.Oid and\\n                    dep.Oid = u.Department and\\n                    dep.Name in ('Client Service', 'Support')\\n        )\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[\"startDate\",\"endDate\"]}}]",
          "DashboardComponentType":{
             "Id":"84ee5399-f21a-42eb-9c52-810ca7ac1e22",
             "Name":"Generic Dashboard",
             "ComponentTypeNumber":42
          },
          "AnalyticsApiUrl":"",
          "Configuration":"{\n    \"onPointClick\": \"function onPointClick(e) {            \\n    e.event.cancel = true;\\n    var dataGrid = SW.getComponent('dataGrid');\\n    dataGrid.columnOption('ExecutorName', 'filterValue', null);\\n}\",\n    \"size\": {\n        \"height\": \"200\"\n    },\n    \"valueAxis\": {\n        \"grid\": {\n            \"visible\": false\n        },\n        \"label\": {\n            \"font\": {\n                \"size\": 12,\n                \"family\": \"Varela Round\"\n            }\n        }\n    },\n    \"commonSeriesSettings\": {\n        \"type\": \"bar\",\n        \"cornerRadius\": \"2px\",\n        \"label\": {\n            \"showForZeroValues\": false,\n            \"visible\": \"true\",\n            \"font\": {\n                \"size\": 10,\n                \"family\": \"Varela Round\"\n            }\n        },\n        \"argumentField\": \"Executor\"\n    },\n    \"argumentAxis\": {\n        \"label\": {\n            \"overlappingBehavior\": \"stagger\",\n            \"font\": {\n                \"family\": \"Varela Round\"\n            }\n        }\n    },\n    \"series\": [\n        {\n            \"valueField\": \"Count\",\n            \"name\": \"Unassigned\",\n            \"label\": {\n                \"position\": \"outside\",\n                \"verticalOffset\": 10\n            }\n        }\n    ]\n}",
          "DashboardDefinitionId":"eff11926-0668-4ccf-9151-22e7dc228dae"
       },
       {
          "Id":"7b2ab4df-971b-42b2-8eaa-b81c5568e8f8",
          "Name":"Tickets for iteration",
          "Active":true,
          "UseQuery":false,
          "Query":null,
          "Size":12,
          "Order":5,
          "Parameters":"[{\"WidgetSubTitle\":\"Tickets requested to be developed\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":15,\"WidgetRows\":22,\"WidgetColumns\":48,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[{\"visible\":true,\"metricName\":\"# Delayed Under Development\",\"metricFieldValue\":\"DelayedUnderDevelopmentJobsGrandTotal\"}]},\"showSubTitle\":false,\"showTitle\":false},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with posts as ( \\n    select  max(CreatedOnUtc) as CreatedOnUtc, DocumentOid\\n    from    Post\\n    group by DocumentOid\\n)\\nselect  j.Oid,\\n        j.[State] as Stage,\\n        j.NameAndExternalId as Job,\\n        j.[EndDate],\\n        jc.[Name] as Classification,\\n        j.[date] as SupportDate,\\n        j.StateColor as Color,\\n        datediff(day, getdate(), j.[Date]) as Days,\\n        isnull(ws.Color, wst.Color) as Color,\\n        (select STRING_AGG(convert(nvarchar(50), ass.[User]), ',') from Assignment ass, AssignmentType ast, [User] u, SecuritySystemUser ssu where \\n            ass.DocumentOid = j.Oid and ast.Name = 'Executor' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid and\\n            u.Oid = ssu.Oid) as ExecutorId,\\n        (select STRING_AGG(convert(nvarchar(50), u.[Name]), ',') from Assignment ass, AssignmentType ast, [User] u, SecuritySystemUser ssu where \\n            ass.DocumentOid = j.Oid and ast.Name = 'Executor' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid and\\n            u.Oid = ssu.Oid) as ExecutorName,\\n        (select STRING_AGG(convert(nvarchar(50), u.[HasImage]), ',') from Assignment ass, AssignmentType ast, [User] u, SecuritySystemUser ssu where \\n            ass.DocumentOid = j.Oid and ast.Name = 'Executor' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid and\\n            u.Oid = ssu.Oid) as ExecutorHasImage,\\n        (select STRING_AGG(convert(nvarchar(50), ass.[User]), ',') from Assignment ass, AssignmentType ast, [User] u, SecuritySystemUser ssu where \\n            ass.DocumentOid = j.Oid and ast.Name = 'Requester' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid and\\n            u.Oid = ssu.Oid and\\n            u.Department = '95E7DA36-DA7E-44A1-A56D-D6BADC276ABB') as RequesterId,\\n        (select STRING_AGG(convert(nvarchar(50), u.[Name]), ',') from Assignment ass, AssignmentType ast, [User] u, SecuritySystemUser ssu where \\n            ass.DocumentOid = j.Oid and ast.Name = 'Requester' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid and\\n            u.Oid = ssu.Oid and\\n            u.Department = '95E7DA36-DA7E-44A1-A56D-D6BADC276ABB') as RequesterName,\\n        (select STRING_AGG(convert(nvarchar(50), u.[HasImage]), ',') from Assignment ass, AssignmentType ast, [User] u, SecuritySystemUser ssu where \\n            ass.DocumentOid = j.Oid and ast.Name = 'Requester' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid and\\n            u.Oid = ssu.Oid and\\n            u.Department = '95E7DA36-DA7E-44A1-A56D-D6BADC276ABB') as RequesterHasImage,\\n        (select STRING_AGG(convert(nvarchar(50), ass.[User]), ',') from Assignment ass, AssignmentType ast, [User] u, SecuritySystemUser ssu where \\n            ass.DocumentOid = j.Oid and ast.Name = 'Responsible' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid and\\n            u.Oid = ssu.Oid and\\n            u.Department in ('7240158b-ddea-49ea-a6e5-1b1d55ee0708','95e7da36-da7e-44a1-a56d-d6badc276abb')) as ResponsibleId,\\n        (select STRING_AGG(convert(nvarchar(50), u.[Name]), ',') from Assignment ass, AssignmentType ast, [User] u, SecuritySystemUser ssu where \\n            ass.DocumentOid = j.Oid and ast.Name = 'Responsible' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid and\\n            u.Oid = ssu.Oid and\\n            u.Department in ('7240158b-ddea-49ea-a6e5-1b1d55ee0708', '95e7da36-da7e-44a1-a56d-d6badc276abb' )) as ResponsibleName,\\n        (select STRING_AGG(convert(nvarchar(50), u.[HasImage]), ',') from Assignment ass, AssignmentType ast, [User] u, SecuritySystemUser ssu where \\n            ass.DocumentOid = j.Oid and ast.Name = 'Responsible' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid and\\n            u.Oid = ssu.Oid and\\n            u.Department in ('7240158b-ddea-49ea-a6e5-1b1d55ee0708','95e7da36-da7e-44a1-a56d-d6badc276abb')) as ResponsibleHasImage,\\n        j.Client as ClientName,\\n        j.ClientId,\\n        cc.HasImage as ClientHasImage,\\n        p.CreatedOnUtc as LastCommentDate\\nfrom    Analytics.DatamartJob j left join posts p on (p.documentOid = j.Oid), \\n        JobClassification jc, Deliverable d, CommercialClient cc, WorkflowState ws, WorkflowStateType wst \\nwhere   cc.Oid = j.ClientId and\\n        j.Department in ('Support', 'Client Service') and\\n        jc.Oid = d.Classification and\\n        d.Oid = j.Oid and \\n        ws.Oid = d.WorkflowState and\\n        wst.Oid = ws.WorkflowStateType and\\n        j.[State] in ('To Do', 'Open', 'Under Analysis', 'Move To Production', 'Waiting', 'On Hold', 'Request More Information', 'Request UAT', 'Request Approval', 'Work in Progress', 'Under Approval', 'Canceled', 'Done', 'Closed', 'Closed (unrelated)') and\\n        j.[Date] between @FromDate and @ToDate\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[\"startDate\",\"endDate\"]}}]",
          "DashboardComponentType":{
             "Id":"84ee5399-f21a-42eb-9c52-810ca7ac1e22",
             "Name":"Generic Dashboard",
             "ComponentTypeNumber":42
          },
          "AnalyticsApiUrl":"globalQuery/Development - Current development/execute",
          "Configuration":"{\"stateStoring\":{\"enabled\":\"true\"},\"headerFilter\":{\"visible\":false},\"editing\":{\"mode\":\"cell\",\"allowUpdating\":\"true\"},\"height\":\"100%\",\"keyExpr\":\"Oid\",\"onRowUpdating\":\"function(e) {\\n    if (e.newData.Effort) {\\n        var body = '{ \\\"Effort\\\": { \\\"Value\\\":' + e.newData.Effort + '} }';\\n        SW.executeAPI('PATCH', 'jobs/' + e.key, null, body);\\n        var urlEffortUpdate = 'https://dev.azure.com/nextway/Skill/_apis/wit/workitems/' + e.oldData.WorkItem + '?api-version=5.0';\\n        var updateEffortBody = '[{\\\"op\\\":\\\"add\\\",\\\"path\\\":\\\"/fields/Microsoft.VSTS.Scheduling.Effort\\\",\\\"from\\\":null,\\\"value\\\":\\\"' + e.newData.Effort + '\\\"}]';\\n        fetch(urlEffortUpdate, {\\n            method: \\\"PATCH\\\",\\n            headers: {\\n                \\\"Authorization\\\": \\\"Basic Om1zeGJrczdpaGtzNnlkeGplcW9vYWtvdW5ob21pNHlwbW16NWpscWplcDNxNnVkM3BmZHE=\\\",\\n                \\\"Content-Type\\\": \\\"application/json-patch+json\\\"\\n            },\\n            body: updateEffortBody\\n        });\\n    }\\n    if (e.newData.IterationDate) {\\n        var e = e;\\n        \\n        SW.executeAPI('PUT', 'v3/documentUserFieldValues', null, {\\n            'DocumentTypeName': 'Deliverable',\\n            'DocumentId': e.key,\\n            'DocumentUserFieldValues': Object.entries(e.newData).map(([k, v]) => ({\\n                'ColumnName': 'Iteration Date',\\n                'ColumnDataTypeId': 1,\\n                'Value': v\\n            }))\\n        });\\n        async function updateIteration(e) {\\n            var url = 'https://dev.azure.com/nextway/Skill/Skill Team/_apis/work/teamsettings/iterations';\\n            var test = await fetch(url, {\\n                method: \\\"GET\\\",\\n                headers: {\\n                    \\\"Authorization\\\": \\\"Basic Om1zeGJrczdpaGtzNnlkeGplcW9vYWtvdW5ob21pNHlwbW16NWpscWplcDNxNnVkM3BmZHE=\\\"\\n                }\\n            });\\n            var iterations = await test.json();\\n            var iteration = iterations.value.find(i => (e.newData.IterationDate.split('T')[0] >= i.attributes.startDate.split('T')[0]) && (e.newData.IterationDate.split('T')[0] <= i.attributes.finishDate.split('T')[0]));\\n            var urlUpdate = 'https://dev.azure.com/nextway/Skill/_apis/wit/workitems/' + e.oldData.WorkItem + '?api-version=5.0';\\n            var iterationToUpdate = 'Skill\\\\\\\\\\\\\\\\' + iteration.name;\\n            var updateBody = '[            {\\\"op\\\":\\\"add\\\",\\\"path\\\":\\\"/fields/System.IterationPath\\\",\\\"from\\\":null,\\\"value\\\":\\\"' + iterationToUpdate + '\\\"}]';\\n            fetch(urlUpdate, {\\n                method: \\\"PATCH\\\",\\n                headers: {\\n                    \\\"Authorization\\\": \\\"Basic Om1zeGJrczdpaGtzNnlkeGplcW9vYWtvdW5ob21pNHlwbW16NWpscWplcDNxNnVkM3BmZHE=\\\",\\n                    \\\"Content-Type\\\": \\\"application/json-patch+json\\\"\\n                },\\n                body: updateBody\\n            });\\n            updateIteration;\\n        }\\n        updateIteration(e)\\n    }\\n}\",\"onRowClick\":\"function(e) {\\n    if (e.rowType == 'data')\\n        SkillsWorkflow.preview(e.key, 'job');\\n}\",\"selection\":{\"mode\":\"none\"},\"allowFiltering\":false,\"searchPanel\":{\"visible\":true},\"scrolling\":{\"mode\":\"virtual\"},\"columnMinWidth\":\"50\",\"grouping\":{\"autoExpandAll\":true},\"buttons\":[{\"icon\":\"plus\",\"onClick\":\"function(e){ SW.saveComponent(e.component, 'dataGrid')}\"}],\"columns\":[{\"dataField\":\"Stage\",\"caption\":\"Stage\",\"name\":\"Name\",\"alignment\":\"left\",\"entity\":\"stage\",\"width\":80,\"allowEditing\":false,\"groupIndex\":0},{\"caption\":\"Client\",\"alignment\":\"center\",\"width\":50,\"entity\":\"client\",\"format\":{\"type\":\"image\"},\"allowEditing\":false},{\"dataField\":\"ClientName\",\"visible\":false,\"showInColumnChooser\":false},{\"dataField\":\"Job\",\"name\":\"Jobs\",\"caption\":\"Jobs\",\"allowEditing\":false},{\"dataField\":\"Days\",\"caption\":\"Days\",\"visible\":true,\"alignment\":\"center\",\"format\":\"#,##0\",\"width\":50,\"allowEditing\":false,\"cellTemplate\":\"function(e, i) { SkillsWorkflow.setRAG(e, i.value, i.value < 15, (i.value <= 21 && i.value >= 15), i.value > 21); }\"},{\"dataField\":\"EndDate\",\"caption\":\"End Date\",\"alignment\":\"center\",\"dataType\":\"date\",\"format\":\"d MMM\",\"visible\":true,\"width\":100,\"allowEditing\":false},{\"dataField\":\"ResponsibleName\",\"caption\":\"Responsible\",\"alignment\":\"center\",\"allowEditing\":false,\"width\":120,\"cellTemplate\":\"function(e, i) {            if(i.text == '')              return;            var userId = i.row.data.ResponsibleId.split(',');            var userName = i.text.split(',');            var userImage = i.row.data.ResponsibleHasImage.split(',');            function myFunction(item, index) {                if (userImage[index] === '1') {                    var hasImage = true;} else {                    var hasImage = false;}                SK.showImage(e, 'user', 'small', hasImage, item, userId[index]);}            userId.forEach( (item, index) => myFunction(item, index));}\"},{\"dataField\":\"RequesterName\",\"caption\":\"Requester\",\"alignment\":\"center\",\"allowEditing\":false,\"width\":120,\"cellTemplate\":\"function(e, i) {            if(i.text == '')              return;            var userId = i.row.data.RequesterId.split(',');            var userName = i.text.split(',');            var userImage = i.row.data.RequesterHasImage.split(',');            function myFunction(item, index) {                if (userImage[index] === '1') {                    var hasImage = true;} else {                    var hasImage = false;}                SK.showImage(e, 'user', 'small', hasImage, item, userId[index]);}            userId.forEach( (item, index) => myFunction(item, index));}\"},{\"dataField\":\"ExecutorName\",\"caption\":\"Executor\",\"alignment\":\"center\",\"allowEditing\":false,\"width\":120,\"cellTemplate\":\"function(e, i) {            if(i.text == '')              return;            var userId = i.row.data.ExecutorId.split(',');            var userName = i.text.split(',');            var userImage = i.row.data.ExecutorHasImage.split(',');            function myFunction(item, index) {                if (userImage[index] === '1') {                    var hasImage = true;} else {                    var hasImage = false;}                SK.showImage(e, 'user', 'small', hasImage, item, userId[index]);}            userId.forEach( (item, index) => myFunction(item, index));}\"},{\"dataField\":\"Classification\",\"caption\":\"Classification\",\"alignment\":\"center\",\"width\":120},{\"dataField\":\"LastCommentDate\",\"caption\":\"Last Comment Date\",\"dataType\":\"date\",\"format\":\"d MMM\",\"alignment\":\"center\",\"width\":120}],\"sortByGroupSummaryInfo\":[{\"summaryItem\":\"count\"}],\"summary\":{\"groupItems\":[{\"column\":\"Jobs\",\"summaryType\":\"count\",\"valueFormat\":\"#,##0\",\"displayFormat\":\"{0}\",\"alignment\":\"left\"},{\"column\":\"Effort\",\"summaryType\":\"sum\",\"displayFormat\":\"{0}\",\"showInGroupFooter\":false,\"alignByColumn\":true}],\"totalItems\":[{\"column\":\"Jobs\",\"summaryType\":\"count\",\"valueFormat\":\"#,##0\",\"displayFormat\":\"Total: {0}\",\"alignment\":\"left\"},{\"column\":\"Effort\",\"summaryType\":\"sum\",\"valueFormat\":\"#,##0\",\"displayFormat\":\"{0}\",\"alignment\":\"center\",\"cellTemplate\":\"function(e, i) {var h=e.append('<div>'+i.text+'</div>');if(i.value<0) {h.css('background-color','#f5564a').css('color','#ffffff')}}\"}]},\"onInitialized\":\"function initialized(e) {\\n    SW.saveComponent(e.component, 'dataGrid')\\n}\",\"onToolbarPreparing\":\"function toolbar(e){\\n    SW.saveComponent(e.component, 'dataGrid');\\n    var dataGrid = e.component;\\n    e.toolbarOptions.items.unshift({\\n        widget: 'dxButtonGroup',\\n        location: 'after',\\n        options: {\\n            selectionMode: 'single',\\n            selectedItemKeys: ['Open'],\\n            stylingMode: 'contained',\\n            keyExpr: 'filter',\\n            height: 26,\\n            items: [{ text: 'All', filter: 'All' }, { text: 'Open', filter: 'Open' }, { text: 'Closed', filter: 'Closed' }],\\n            onInitialized: function (e) {\\n                dataGrid.columnOption('Stage', 'filterValues', ['Request more Information', 'Request Approval', 'To Do', 'Under Approval', 'Waiting', 'On Hold', 'Under Analysis', 'Request UAT']);\\n            },\\n            onSelectionChanged: function (e) {\\n                var selected = e.component.option(\\\"selectedItemKeys\\\");\\n                debugger;\\n                if (selected[0] == 'All')\\n                    dataGrid.columnOption('Stage', 'filterValues', null);\\n                else if (selected[0] == 'Open')\\n                    dataGrid.columnOption('Stage', 'filterValues', ['Request more Information', 'Request Approval', 'To Do', 'Under Approval', 'Waiting', 'On Hold', 'Under Analysis', 'Request UAT']);\\n                else if (selected[0] == 'Closed')\\n                    dataGrid.columnOption('Stage', 'filterValues', ['Closed', 'Canceled', 'Closed (unrelated)', 'Done']);\\n            }\\n        }\\n    });\\n}\"}",
          "DashboardDefinitionId":"eff11926-0668-4ccf-9151-22e7dc228dae"
       },
       {
          "Id":"1c7e55b2-7326-42d6-933e-cde3c40beef1",
          "Name":"Tickets per Executor and per Stage",
          "Active":true,
          "UseQuery":false,
          "Query":"",
          "Size":7,
          "Order":2,
          "Parameters":"[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"chart\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#f7f7f7\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":5,\"WidgetYPosition\":4,\"WidgetRows\":11,\"WidgetColumns\":24,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[{\"visible\":true,\"metricName\":\"? Forecast\",\"metricFieldValue\":\"TimeGrandTotal\"},{\"visible\":true,\"metricName\":\"? Actual\",\"metricFieldValue\":\"UtilizationPercentGrandTotal\"}]},\"showSubTitle\":false,\"showTitle\":true},\"WidgetDataSources\":{\"boards\":{\"type\":\"querytext\",\"value\":\"select distinct w.[Name], \\n\\t\\tw.Oid, \\n\\t\\tISNULL(w.Color, wst.Color) as color\\n\\tfrom WorkflowState w inner join [Document] d on w.[Document] = D.Oid\\n\\t\\tinner join WorkflowStateType wst on w.WorkflowStateType = wst.Oid\\n\\twhere w.GCRecord is null and d.GCRecord is null\\n\\t\\t\\tand d.Name = 'Deliverable'\\n\\t\\t\\tand ('00000000-0000-0000-0000-000000000000' in @workflowStateIds or w.Oid in @workflowStateIds)\\n\\t\\t\\tand w.Oid in ('700451ed-e58f-4cdb-abaa-4d0707fe4b16','5682701a-e88d-4bf4-bcba-5114c425aa9c','da28d50d-f2fa-4a93-9774-54520a131521','17a1c7f2-5a34-4ba9-a912-689f7db28e8d')\\n\",\"mapping\":{\"id\":\"Oid\",\"title\":\"Name\",\"date\":\"endDate\"}},\"items\":{\"type\":\"querytext\",\"value\":\"with briefs as (\\r\\nselect  dB.DocumentOid, dB.ActionsJson, ISJSON(dB.ActionsJson) as ValidJson, db.[Text], db.PlainText\\r\\n\\t\\tfrom DocumentBrief dB \\r\\n\\t\\twhere dB.DocumentTypeName = 'deliverable'\\r\\n)\\r\\nselect D.Oid\\r\\n       ,D.[Number] as JobNumber\\r\\n\\t ,D.[NameAndExternalId] as JobName\\r\\n\\t, CONVERT(VARCHAR(6), D.AgreedDate, 6) as EndDate\\r\\n\\t  ,U.Name as UserName\\r\\n\\t  ,U.Oid as UserId\\r\\n\\t  ,At.Name as AssignmentTypeName\\r\\n        ,A.[Workload] as Workload\\r\\n\\t,D.[WorkflowState] as WorkflowStateId\\r\\n\\t,wst.Name as WorkflowStateName\\r\\n\\t,isnull(w.Color, WST.Color) as WorkflowStateColor,\\r\\n\\tSUBSTRING(B.PlainText, 1, 100) as Brief,\\r\\n\\t(SELECT FORMATMESSAGE('http://localhost:30449/api/commercialclients/%s/imageStream', CONVERT(nvarchar(50), D.Client)) ) as ImageSrc\\r\\n\\r\\n  from Deliverable D\\r\\n\\tinner join Assignment A ON D.Oid = A.DocumentOid\\r\\n\\tinner join WorkflowState W ON D.WorkflowState = W.Oid\\r\\n\\tinner join  WorkflowStateType WST ON W.WorkflowStateType = WST.Oid\\r\\n\\tinner join  AssignmentType AT ON A.AssignmentType = AT.Oid\\r\\n\\tinner join [User] U on A.[User] = U.Oid\\r\\n\\tleft join briefs B on D.Oid = B.DocumentOid\\r\\n\\tWHERE\\tAT.Name = 'Executor'\\r\\n\\t\\t\\tand A.DocumentTypeName = 'Skill.Module.BusinessObjects.Deliverable'\\r\\n\\t\\t\\tand A.[User] = @userId\\r\\n\\t\\t\\tand ('00000000-0000-0000-0000-000000000000' in @workflowStateIds or D.WorkflowState in @workflowStateIds)\\r\\n\\t\\t--\\tand (d.EntryDateUtc between @startDate and @endDate or d.AgreedDateUtc between @startDate and @endDate or @startDate between d.EntryDateUtc and d.AgreedDateUtc)\\r\\n\\r\\n\",\"mapping\":{\"id\":\"Oid\",\"title\":\"JobName\",\"boardId\":\"WorkflowStateId\",\"boardName\":\"WorkflowStateName\",\"boardColor\":\"WorkflowStateColor\",\"imageSrc\":\"ImageSrc\",\"date\":\"EndDate\",\"effort\":\"Workload\",\"description\":\"Brief\"}},\"main\":{\"type\":\"querytext\",\"value\":\"select  ssu.UserName as Executor,\\n        count(*) as Count,\\n        sum(iif(j.[State] = 'Move to Production', 1, 0)) as MovetoProduction,\\n        sum(iif(j.[State] = 'Under Approval', 1, 0)) as UnderApproval,\\n        sum(iif(j.[State] = 'Request more Information', 1, 0)) as RequestMoreInformation,\\n        sum(iif(j.[State] = 'Open', 1, 0)) as [Open],\\n        sum(iif(j.[State] = 'Request Aproval', 1, 0)) as RequestAproval,\\n        sum(iif(j.[State] = 'On Hold', 1, 0)) as OnHold,\\n        sum(iif(j.[State] = 'To Do', 1, 0)) as toDo,\\n        sum(iif(j.[State] = 'Under Analysis', 1, 0)) as UnderAnalysis,\\n        sum(iif(j.[State] = 'Request UAT', 1, 0))  as RequestUAT,\\n        sum(iif(j.[State] = 'Waiting', 1, 0)) as Waiting,\\n        sum(iif(j.[State] = 'Work in Progress', 1, 0)) as WorkInProgress\\nfrom    Analytics.DatamartJob j, Assignment ass, AssignmentType ast, [User] u, SecuritySystemUser ssu, Department dep \\nwhere   j.Department in ('Support', 'Client Service') and\\n        ass.DocumentOid = j.Oid and\\n        ass.AssignmentType = ast.Oid and \\n        ast.[Name] = 'Executor' and\\n        u.Oid = ass.[User] and\\n        ssu.Oid = u.Oid and \\n        dep.Oid = u.Department and \\n        dep.Name in ('Support', 'Client Service') and\\n        j.[State] in ('To Do', 'Open', 'Under Analysis', 'Move To Production', 'Waiting', 'On Hold', 'Request More Information', 'Request UAT', 'Request Approval', 'Work in Progress', 'Under Approval') and\\n        j.[Date] between @FromDate and @ToDate\\ngroup by ssu.UserName\\norder by Executor\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[\"startDate\",\"endDate\"]}}]",
          "DashboardComponentType":{
             "Id":"84ee5399-f21a-42eb-9c52-810ca7ac1e22",
             "Name":"Generic Dashboard",
             "ComponentTypeNumber":42
          },
          "AnalyticsApiUrl":"",
          "Configuration":"{\"size\":{\"height\":\"200\"},\"valueAxis\":{\"label\":{\"font\":{\"size\":12,\"family\":\"Varela Round\"}},\"grid\":{\"visible\":false},\"constantLineStyle\":{\"label\":{\"text\":\"\",\"font\":{\"family\":\"Varela Round\",\"size\":\"8\"}},\"width\":1,\"dashStyle\":\"dash\"}},\"commonSeriesSettings\":{\"type\":\"stackedbar\",\"cornerRadius\":\"2px\",\"label\":{\"showForZeroValues\":false,\"visible\":\"true\",\"font\":{\"size\":10,\"family\":\"Varela Round\"},\"backgroundColor\":\"#00000000\"},\"argumentField\":\"Executor\"},\"argumentAxis\":{\"label\":{\"overlappingBehavior\":\"stagger\",\"wordWrap\":\"none\",\"textOverflow\":\"ellipsis\",\"font\":{\"size\":\"8\",\"family\":\"Varela Round\"}}},\"series\":[{\"valueField\":\"UnderAnalysis\",\"name\":\"Under Analysis\",\"caption\":\"Under Analysis\",\"stack\":\"Efforts\",\"color\":\"#B5E8B0\"},{\"valueField\":\"ToDo\",\"name\":\"To do\",\"caption\":\"To Do\",\"stack\":\"Efforts\",\"color\":\"#FFCC00\"},{\"valueField\":\"MoveToProduction\",\"name\":\"Move to Production\",\"caption\":\"Move to Production\",\"stack\":\"Efforts\",\"color\":\"#A63CB7\"},{\"valueField\":\"UnderApproval\",\"name\":\"Under Approval\",\"caption\":\"Under Approval\",\"stack\":\"Efforts\",\"color\":\"#446FD2\"},{\"valueField\":\"Open\",\"name\":\"Open\",\"caption\":\"Open\",\"stack\":\"Efforts\",\"color\":\"#A63CB7\"},{\"valueField\":\"RequestApproval\",\"name\":\"Request Approval\",\"caption\":\"Request Approval\",\"stack\":\"Efforts\",\"color\":\"#446FD2\"},{\"valueField\":\"RequestUAT\",\"name\":\"Request UAT\",\"caption\":\"Request UAT\",\"stack\":\"Efforts\",\"color\":\"#D1726C\"},{\"valueField\":\"RequestMoreInformation\",\"name\":\"Request More Information\",\"caption\":\"Request More Information\",\"stack\":\"Efforts\",\"color\":\"#89BEF3\"},{\"valueField\":\"OnHold\",\"name\":\"On Hold\",\"caption\":\"On Hold\",\"stack\":\"Efforts\",\"color\":\"#B4A0E8\"},{\"valueField\":\"Waiting\",\"name\":\"Waiting\",\"caption\":\"Waiting\",\"stack\":\"Efforts\",\"color\":\"#94DF89\"},{\"valueField\":\"WorkInProgress\",\"name\":\"Work in Progress\",\"caption\":\"Work in Progress\",\"stack\":\"Efforts\",\"color\":\"#89BEF3\"}],\"buttons\":[{\"icon\":\"plus\",\"onClick\":\"function(e){ e.event.cancel = true;           var dataGrid = SW.getComponent('dataGrid');           dataGrid.clearFilter();              dataGrid.searchByText(e.target.data.Executor);}\"}],\"onPointClick\":\"function click(e) {\\n    e.event.cancel = true;\\n    var dataGrid = SW.getComponent('dataGrid');\\n    dataGrid.columnOption('ExecutorName', 'filterValue', e.target.data.Executor);\\n}\"}",
          "DashboardDefinitionId":"eff11926-0668-4ccf-9151-22e7dc228dae"
       }
    ],
    "DataSourceConfiguration":null,
    "Version":1,
    "Default":false,
    "QueryText": null,
    "UseStore": false,
    "StoreEntity": null
 }
