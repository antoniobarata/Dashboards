{
  "DashboardDefinitionRoles": [
    {
      "AccessRoleId": "5c9a3a57-9201-4721-9034-2ff6df5145a6",
      "DashboardDefinitionId": "51910479-d81f-4119-a160-9cb6ba7c20de",
      "AccessRoleName": "Dashbboard to investigate - AC"
    },
    {
      "AccessRoleId": "bffd1bcb-a5f3-4ed2-b8cd-087dade5e987",
      "DashboardDefinitionId": "51910479-d81f-4119-a160-9cb6ba7c20de",
      "AccessRoleName": "Equipa Opera??es"
    },
    {
      "AccessRoleId": "e596ee6c-23ac-4714-9cf7-e886fedfd711",
      "DashboardDefinitionId": "51910479-d81f-4119-a160-9cb6ba7c20de",
      "AccessRoleName": "Equipa Support"
    }
  ],
  "Id": "51910479-d81f-4119-a160-9cb6ba7c20de",
  "Name": "Support Dashboard",
  "Active": true,
  "Location": 0,
  "DocumentId": "00000000-0000-0000-0000-000000000000",
  "DocumentName": "",
  "DocumentTypeName": "workspace",
  "DocumentsConfiguration": "[{\"entity\":\"\",\"operations\":{\"read\":{\"endpoint\":\"\"},\"update\":{\"endpoint\":\"\",\"model\":{}},\"create\":{\"endpoint\":\"\",\"model\":{}},\"patch\":{\"endpoint\":\"\",\"model\":[{\"field\":\"\",\"caption\":\"\",\"type\":\"\"}]},\"remove\":{\"endpoint\":\"\"},\"lookup\":{\"endpoint\":\"\"},\"lookupById\":{\"endpoint\":\"\"}},\"layout\":{\"create\":{},\"read\":{},\"patch\":{}},\"customDocument\":{\"useCustomStyle\":false,\"mainColor\":\"\",\"secondaryColor\":\"\",\"imageClass\":\"\",\"namePlural\":\"\",\"name\":\"\",\"systemName\":\"\"},\"availableOptions\":{\"feed\":false,\"info\":true,\"files\":false,\"userfields\":false,\"dashboard\":false},\"fields\":[]}]",
  "Templates": [],
  "DashboardDefinitionComponents": [
    {
      "Id": "161d59f7-a488-4be5-9465-15b8a9ede244",
      "Name": "Tickets per client",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 8,
      "Order": 1,
      "Parameters": "[{\"WidgetSubTitle\":\"Under Analysis tickets without activity for > 5 days & Request more information, Request Approval tickets awaiting our reply\",\"WidgetType\":\"chart\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#f0f0f0\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":0,\"WidgetRows\":9,\"WidgetColumns\":32,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[{\"visible\":false,\"metricName\":\"# Tickets\",\"metricFieldValue\":\"NoActivityTicketsGrandTotal\"}]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"boards\":{\"type\":\"querytext\",\"value\":\"select distinct w.[Name], \\n\\t\\tw.Oid, \\n\\t\\tISNULL(w.Color, wst.Color) as color\\n\\tfrom WorkflowState w inner join [Document] d on w.[Document] = D.Oid\\n\\t\\tinner join WorkflowStateType wst on w.WorkflowStateType = wst.Oid\\n\\twhere w.GCRecord is null and d.GCRecord is null\\n\\t\\t\\tand d.Name = 'Deliverable'\\n\\t\\t\\tand ('00000000-0000-0000-0000-000000000000' in @workflowStateIds or w.Oid in @workflowStateIds)\\n\\t\\t\\tand w.Name in ('Under Analysis', 'Request more information')\",\"mapping\":{\"id\":\"Oid\",\"title\":\"Name\",\"date\":\"endDate\"}},\"items\":{\"type\":\"querytext\",\"value\":\"with briefs as (\\r\\nselect  dB.DocumentOid, dB.ActionsJson, ISJSON(dB.ActionsJson) as ValidJson, db.[Text], db.PlainText\\r\\n\\t\\tfrom DocumentBrief dB \\r\\n\\t\\twhere dB.DocumentTypeName = 'deliverable'\\r\\n)\\r\\nselect D.Oid\\r\\n       ,D.[Number] as JobNumber\\r\\n\\t ,D.[NameAndExternalId] as JobName\\r\\n\\t, CONVERT(VARCHAR(6), D.AgreedDate, 6) as EndDate\\r\\n\\t  ,U.Name as UserName\\r\\n\\t  ,U.Oid as UserId\\r\\n\\t  ,At.Name as AssignmentTypeName\\r\\n        ,A.[Workload] as Workload\\r\\n\\t,D.[WorkflowState] as WorkflowStateId\\r\\n\\t,wst.Name as WorkflowStateName\\r\\n\\t,isnull(w.Color, WST.Color) as WorkflowStateColor,\\r\\n\\tSUBSTRING(B.PlainText, 1, 100) as Brief,\\r\\n\\t(SELECT FORMATMESSAGE('http://localhost:30449/api/commercialclients/%s/imageStream', CONVERT(nvarchar(50), D.Client)) ) as ImageSrc\\r\\n\\r\\n  from Deliverable D\\r\\n\\tinner join Assignment A ON D.Oid = A.DocumentOid\\r\\n\\tinner join WorkflowState W ON D.WorkflowState = W.Oid\\r\\n\\tinner join  WorkflowStateType WST ON W.WorkflowStateType = WST.Oid\\r\\n\\tinner join  AssignmentType AT ON A.AssignmentType = AT.Oid\\r\\n\\tinner join [User] U on A.[User] = U.Oid\\r\\n\\tleft join briefs B on D.Oid = B.DocumentOid\\r\\n\\tWHERE\\tAT.Name = 'Executor'\\r\\n\\t\\t\\tand A.DocumentTypeName = 'Skill.Module.BusinessObjects.Deliverable'\\r\\n\\t\\t\\tand A.[User] = @userId\\r\\n\\t\\t\\tand ('00000000-0000-0000-0000-000000000000' in @workflowStateIds or D.WorkflowState in @workflowStateIds)\\r\\n\\t\\t--\\tand (d.EntryDateUtc between @startDate and @endDate or d.AgreedDateUtc between @startDate and @endDate or @startDate between d.EntryDateUtc and d.AgreedDateUtc)\\r\\n\\r\\n\",\"mapping\":{\"id\":\"Oid\",\"title\":\"JobName\",\"boardId\":\"WorkflowStateId\",\"boardName\":\"WorkflowStateName\",\"boardColor\":\"WorkflowStateColor\",\"imageSrc\":\"ImageSrc\",\"date\":\"EndDate\",\"effort\":\"Workload\",\"description\":\"Brief\"}},\"main\":{\"type\":\"querytext\",\"value\":\" select \\n        j.Client as ClientName,\\n        j.ClientId as ClientId,\\n        sum(case when j.[State] = 'Under Analysis' then 1 else 0 end) as TotalUnderAnalysis,\\n        sum(case when j.[State] = 'Request more Information' then 1 else 0 end) as TotalRequestMoreInformation,\\n        sum(case when j.[State] = 'Request Approval' then 1 else 0 end) as TotalRequestApproval\\n\\nfrom    Analytics.DatamartJob j,\\n        Deliverable d, \\n        (\\n            select \\n                  DISTINCT jp.JobOid,\\n                  dep1.Name as PostUserDepartment\\n            from [User] us, Department dep1, (\\n                                    SELECT DISTINCT\\n                                                p.Oid as PostOid,\\n                                                p.DocumentOid as JobOid,\\n                                                p.CreatedBy as PostCreatedBy\\n\\n                                    FROM        Post p\\n                                        INNER JOIN\\n                                        (\\n                                            SELECT \\n                                                    DocumentOid, \\n                                                    MAX(CreatedOnUtc) AS LatestPostDate\\n                                            FROM Post\\n                                            GROUP BY DocumentOid\\n                                        \\n                                        ) LastActivityTable \\n                                    ON p.DocumentOid = LastActivityTable.DocumentOid \\n                                    AND p.CreatedOnUtc = LastActivityTable.LatestPostDate\\n                                    AND DocumentTypeName = 'deliverable'\\n                                    ) jp\\n            where jp.PostCreatedBy = us.Oid AND\\n            us.Department = dep1.Oid\\n        ) jp2\\nwhere   j.Oid = d.Oid AND\\n    jp2.JobOid = j.Oid AND\\n    j.Department in ('Support', 'Client Service') AND\\n    ((j.[State] in ('Under Analysis') AND DATEDIFF(day,j.ModifiedOn,getdate()) > 5 )\\n    or (j.[State] in ('Request more information','Request Approval') AND jp2.PostUserDepartment = 'Client')) \\n\\n    group by j.Client, j.ClientId\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[]}}]",
      "DashboardComponentType": {
        "Id": "84ee5399-f21a-42eb-9c52-810ca7ac1e22",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\n    \"size\": {\n        \"height\": 200\n    },\n    \"valueAxis\": {\n       \"allowDecimals\":false,\n        \"label\": {\n            \"font\": {\n                \"size\": 12,\n                \"family\": \"Varela Round\"\n            }\n        },\n        \"visualRange\": {\n            \"startValue\": 0,\n            \"endValue\": 10\n        },\n        \"grid\": {\n            \"visible\": false\n        },\n        \"constantLineStyle\": {\n            \"label\": {\n                \"text\": \"\",\n                \"font\": {\n                    \"family\": \"Varela Round\",\n                    \"size\": \"8\"\n                }\n            },\n            \"width\": 1,\n            \"dashStyle\": \"dash\"\n        },\n        \"strips\": [\n            {\n                \"startValue\": 5,\n                \"endValue\": 10,\n                \"color\": \"#f7412e0a\",\n                \"label\": {\n                    \"text\": \"Exceeded +5\",\n                    \"font\": {\n                        \"color\": \"#f7412e\"\n                    }\n                }\n            },\n            {\n                \"startValue\": 2,\n                \"endValue\": 5,\n                \"color\": \"#ffc7200a\",\n                \"label\": {\n                    \"text\": \"Exceeded +2\",\n                    \"font\": {\n                        \"color\": \"#ffc720\"\n                    }\n                }\n            }\n        ],\n        \"constantLines\": [\n            {\n                \"value\": 5,\n                \"color\": \"#f7412e\"\n            },\n            {\n                \"value\": 2,\n                \"color\": \"#ffc720\"\n            }\n        ]\n    },\n    \"commonSeriesSettings\": {\n        \"barWidth\": 25,\n        \"type\": \"stackedBar\",\n        \"cornerRadius\": \"2px\",\n        \"label\": {\n            \"showForZeroValues\": false,\n            \"visible\": true,\n            \"font\": {\n                \"size\": 10,\n                \"family\": \"Varela Round\"\n            },\n            \"backgroundColor\": \"#00000000\"\n        },\n        \"argumentField\": \"ClientName\"\n    },\n    \"argumentAxis\": {\n        \"label\": {\n            \"overlappingBehavior\": \"stagger\",\n            \"font\": {\n                \"size\": 10,\n                \"family\": \"Varela Round\"\n            }\n        }\n    },\n    \"series\": [\n        {\n            \"valueField\": \"TotalUnderAnalysis\",\n            \"name\": \"Under Analysis\",\n            \"color\": \"#94df89\"\n        },\n        {\n            \"valueField\": \"TotalRequestMoreInformation\",\n            \"name\": \"Request more Information\",\n            \"color\": \"#89bff4\"\n        },\n        {\n            \"valueField\": \"TotalRequestApproval\",\n            \"name\": \"Request Approval\",\n            \"color\": \"#446fd2\"\n        }\n    ]\n}",
      "DashboardDefinitionId": "51910479-d81f-4119-a160-9cb6ba7c20de"
    },
    {
      "Id": "ba71fc1b-26c8-474f-b98a-4856281d82b1",
      "Name": "",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 4,
      "Order": 1,
      "Parameters": "[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#f0f0f0\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":32,\"WidgetYPosition\":0,\"WidgetRows\":9,\"WidgetColumns\":16,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":true,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\" select  \\n        sum(case when j.[State] in ('Under Analysis','Request more Information','Request Approval' ) then 1 else 0 end) as TotalTickets,\\n        sum(case when j.[State] = 'Under Analysis' then 1 else 0 end) as TotalUnderAnalysis,\\n        sum(case when j.[State] = 'Request more Information' then 1 else 0 end) as TotalRequestMoreInformation,\\n        sum(case when j.[State] = 'Request Approval' then 1 else 0 end) as TotalRequestApproval,\\n        sum(case when j.[State] = 'Open' then 1 else 0 end) as TotalOpen\\n\\n\\nfrom    Analytics.DatamartJob j,\\n        Deliverable d, \\n        (\\n            select \\n                  DISTINCT jp.JobOid,\\n                  dep1.Name as PostUserDepartment\\n            from [User] us, Department dep1, (\\n                                    SELECT DISTINCT\\n                                                p.Oid as PostOid,\\n                                                p.DocumentOid as JobOid,\\n                                                p.CreatedBy as PostCreatedBy\\n\\n                                    FROM        Post p\\n                                        INNER JOIN\\n                                        (\\n                                            SELECT \\n                                                    DocumentOid, \\n                                                    MAX(CreatedOnUtc) AS LatestPostDate\\n                                            FROM Post\\n                                            GROUP BY DocumentOid\\n                                        \\n                                        ) LastActivityTable \\n                                    ON p.DocumentOid = LastActivityTable.DocumentOid \\n                                    AND p.CreatedOnUtc = LastActivityTable.LatestPostDate\\n                                    AND DocumentTypeName = 'deliverable'\\n                                    ) jp\\n            where jp.PostCreatedBy = us.Oid AND\\n            us.Department = dep1.Oid\\n        ) jp2\\nwhere   j.Oid = d.Oid AND\\n    jp2.JobOid = j.Oid AND\\n    j.Department in ('Support', 'Client Service') AND\\n    ((j.[State] in ('Under Analysis') AND DATEDIFF(day,j.ModifiedOn,getdate()) > 5 ) or (j.[State] in ('Open'))\\n    or (j.[State] in ('Request more information', 'Request Approval') AND jp2.PostUserDepartment = 'Client')) \\n\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]",
      "DashboardComponentType": {
        "Id": "84ee5399-f21a-42eb-9c52-810ca7ac1e22",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\n    \"size\": \"900px\",\n    \"items\": [\n        {\n            \"datafield\": \"TotalTickets\",\n            \"template\": \"function (data, itemElement) {\nvar a = document.createElement('div');\nitemElement.appendChild(a);\nSW.setAttribute(a,\n            null,'style', 'display: flex;justify-content: space-around',false);\n\nvar b = document.createElement('div');\na.appendChild(b);\nSW.setAttribute(b,\n            null,'style', 'display: flex;flex-direction: column;',false);\n\nvar d = document.createElement('div');\nb.appendChild(d);\nSW.setAttribute(d,\n            null,'style', 'display: flex; align-items: center;',false);\n\nvar e = document.createElement('div');\nd.appendChild(e);\nSW.setAttribute(e,\n            null,'style', 'font-size: 50px',false);\ne.textContent = data.component.option('formData').TotalTickets;\n\nvar f = document.createElement('div');\nd.appendChild(f);\nSW.setAttribute(f,\n            null,'style', 'margin-left: 15px;display: flex;flex-direction: column',false);\n\nvar g = document.createElement('div');\nf.appendChild(g);\nSW.setAttribute(g,\n            null,'style', '    font-size: 15px;   ',false);\ng.textContent = 'Total';\n\nvar h = document.createElement('div');\nf.appendChild(h);\nSW.setAttribute(h,\n            null,'style', 'font-size: 20px;',false);\nh.textContent = 'Tickets';\n\nvar d1 = document.createElement('div');\nb.appendChild(d1);\nSW.setAttribute(d1,\n            null,'style', 'display: flex; align-items: center;margin-top: 20px',false);\n\nvar e1 = document.createElement('div');\nd1.appendChild(e1);\nSW.setAttribute(e1,\n            null,'style', 'font-size: 50px;color: #94df89 ',false);\ne1.textContent = data.component.option('formData').TotalUnderAnalysis;\n\nvar f1 = document.createElement('div');\nd1.appendChild(f1);\nSW.setAttribute(f1,\n            null,'style', 'margin-left: 15px;display: flex;flex-direction: column',false);\n\nvar g1 = document.createElement('div');\nf1.appendChild(g1);\nSW.setAttribute(g1,\n            null,'style', 'font-size: 15px;    color: #94df89;    opacity: 0.7;',false);\ng1.textContent = 'Under';\n\nvar h1 = document.createElement('div');\nf1.appendChild(h1);\nSW.setAttribute(h1,\n            null,'style', 'font-size: 20px;    color: #94df89;',false);\nh1.textContent = 'Analysis';\n\n\nvar b1 = document.createElement('div');\na.appendChild(b1);\nSW.setAttribute(b1,\n            null,'style', 'display: flex;flex-direction: column;',false);\n\nvar d2 = document.createElement('div');\nb1.appendChild(d2);\nSW.setAttribute(d2,\n            null,'style', 'display: flex; align-items: center;',false);\n\nvar e2 = document.createElement('div');\nd2.appendChild(e2);\nSW.setAttribute(e2,\n            null,'style', 'font-size: 50px;color: #89c0f5 ',false);\ne2.textContent = data.component.option('formData').TotalRequestMoreInformation;\n\nvar f2 = document.createElement('div');\nd2.appendChild(f2);\nSW.setAttribute(f2,\n            null,'style', 'margin-left: 15px;display: flex;flex-direction: column',false);\n\nvar g2 = document.createElement('div');\nf2.appendChild(g2);\nSW.setAttribute(g2,\n            null,'style', 'font-size: 15px;    color: #89c0f5;    opacity: 0.7;',false);\ng2.textContent = 'Request More';\n\nvar h2 = document.createElement('div');\nf2.appendChild(h2);\nSW.setAttribute(h2,\n            null,'style', 'font-size: 20px;    color: #89c0f5; ',false);\nh2.textContent = 'Information';\n\nvar d3 = document.createElement('div');\nb1.appendChild(d3);\nSW.setAttribute(d3,\n            null,'style', 'display: flex; align-items: center;margin-top: 20px',false);\n\nvar e3 = document.createElement('div');\nd3.appendChild(e3);\nSW.setAttribute(e3,\n            null,'style', 'font-size: 50px;color: #456ed3;',false);\ne3.textContent = data.component.option('formData').TotalRequestApproval;\n\nvar f3 = document.createElement('div');\nd3.appendChild(f3);\nSW.setAttribute(f3,\n            null,'style', 'margin-left: 15px;display: flex;flex-direction: column',false);\n\nvar g3 = document.createElement('div');\nf3.appendChild(g3);\nSW.setAttribute(g3,\n            null,'style', 'font-size: 15px;    color: #456ed3;    opacity: 0.7',false);\ng3.textContent = 'Request';\n\nvar h3 = document.createElement('div');\nf3.appendChild(h3);\nSW.setAttribute(h3,\n            null,'style', 'font-size: 20px;    color: #456ed3;',false);\nh3.textContent = 'Approval';\n        }\"\n    }\n]\n}",
      "DashboardDefinitionId": "51910479-d81f-4119-a160-9cb6ba7c20de"
    },
    {
      "Id": "cfc53c85-a7d7-4b99-bfba-7971eabb3846",
      "Name": "Region",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 3,
      "Order": 2,
      "Parameters": "[{\"WidgetSubTitle\":\"Select Region to Review\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":21,\"WidgetRows\":8,\"WidgetColumns\":12,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":true,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":null},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select distinct [Name] as Region\\nfrom ProjectClassification\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":null}]",
      "DashboardComponentType": {
        "Id": "84ee5399-f21a-42eb-9c52-810ca7ac1e22",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\n    \"height\": 165,\n    \"colCount\": 1,\n    \"items\": [\n        {\n            \"name\": \"Region\",\n            \"label\": {\n                \"text\": \"Region\"\n            },\n            \"editorType\": \"dxSelectBox\",\n            \"editorOptions\": {\n                \"searchEnabled\": false,\n                \"dataSource\": {\n                    \"load\": \"function(loadOptions){ return SkillsWorkflow.executeAPI('POST', 'analytics/globalQuery/RegionsLookUp/execute', null, {}).then(function(res){ console.log(res.Data); return res.Data; }); }\",\n                    \"byKey\": \"function(key) { }\"\n                },\n                \"value\": \"\",\n                \"onValueChanged\": \"function(e){ if(e.value != null) { SkillsWorkflow.setDashboardFilter('Region', e.value); } }\",\n                \"valueExpr\": \"Region\",\n                \"displayExpr\": \"Region\",\n                \"placeholder\": \"Please select a Region...\",\n                \"width\": 250\n            },\n            \"noDataText\": \"Please wait...\"\n        }\n    ]\n}",
      "DashboardDefinitionId": "51910479-d81f-4119-a160-9cb6ba7c20de"
    },
    {
      "Id": "526932d3-77fd-48b7-a45f-7a98e48ba865",
      "Name": "Jobs activity",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 12,
      "Order": 6,
      "Parameters": "[{\"WidgetSubTitle\":\"Job's Delayed or On Time by status\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":29,\"WidgetRows\":24,\"WidgetColumns\":48,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":true,\"Metrics\":[{\"visible\":true,\"metricName\":\"#Delayed Jobs\",\"metricFieldValue\":\"DelayedJobsGrandTotal\"}]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select  jcl.Name as JobClassification,\\n        j.NameAndExternalId as Job,\\n        ws.Name as Stage,\\n        j.Project,\\n        iif(ws.name in ('Open'), j.EntryDateUtc, j.AgreedDateUtc) as Enddate,\\n        j.Oid,\\n        ISNULL(ws.Color, wst.Color) as Color,\\n        DATEDIFF(day,getdate(),AgreedDateUtc) as Days,\\n        DATEDIFF(day,j.ModifiedOn,getdate()) as LastActivity,\\n        sum(iif((jcl.Name in ('Urgent', 'Necessary', 'Important') and AgreedDateUtc < getdate()), 1 ,0)) over() as DelayedCritical\\nfrom    Deliverable j, \\n        WorkflowState ws, \\n        WorkflowStateType wst, \\n        Department dep,\\n        JobClassification jcl,\\n        ProjectClassification pc, \\n        Project p\\nwhere   ws.Oid = j.WorkflowState and\\n        wst.Oid = ws.WorkflowStateType and\\n        dep.Oid = j.Department and \\n        j.Classification = jcl.Oid and\\n        p.Classification = pc.Oid and\\n        j.Project = p.Oid and\\n        dep.Name in ('Support', 'Client Service')  and\\n        ((ws.name in ('Open', 'In Tests', 'Move to Production', 'Request Uat', 'Requirement Approval', 'Under Analysis', 'To Install', 'Request Approval', 'Request more information','Under Development','Scheduled for Development') and\\n        pc.Name = @Region \\n        /*[DateFilter]*/ and j.AgreedDateUtc >= @FromDate and j.AgreedDateUtc <= @ToDate /*[/DateFilter]*/) or\\n        (ws.name in ('Open')\\n        /*[DateFilter]*/ and j.EntryDateUtc >= @FromDate and j.EntryDateUtc <= @ToDate /*[/DateFilter]*/))\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[\"startDate\",\"endDate\",\"Region\"]}}]",
      "DashboardComponentType": {
        "Id": "84ee5399-f21a-42eb-9c52-810ca7ac1e22",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/Support - Jobs Activity/execute",
      "Configuration": "{\"height\":\"500\",\"onRowClick\":\"function(e){if(e.rowType=='data') SkillsWorkflow.preview(e.key, 'job');}\",\"keyExpr\":\"Oid\",\"selection\":{\"mode\":\"single\"},\"allowFiltering\":true,\"searchPanel\":{\"visible\":true},\"scrolling\":{\"mode\":\"virtual\"},\"columnMinWidth\":\"50\",\"grouping\":{\"autoExpandAll\":false},\"columns\":[{\"dataField\":\"Job\",\"name\":\"Jobs\",\"caption\":\"Jobs\",\"width\":500},{\"dataField\":\"LastActivity\",\"caption\":\"Last Activity\",\"alignment\":\"center\",\"format\":\"#,##0\",\"width\":100,\"cellTemplate\":\"function(e, i) {                    var h = document.createElement('DIV');                     e.appendChild(h);                    h.innerHTML = i.text;                     h.style['border-radius'      ] = '2px';                     h.style['min-width'      ] = '30px';                     h.style['padding'      ] = '3px 7px';                     h.style['font-weight'      ] = '700';                    h.style['white-space'      ] = 'nowrap';                    h.style['text-align'      ] = 'center';                     h.style['display'      ] = 'inline-block';                    h.style['color'      ] = '#ffffff';                     if(i.value>15)                         {                            h.style['background-color'        ] = '#7ec880';      };                    if(i.value>=5 && i.value<15)                        {                            h.style['background-color'        ] = '#ffc720';      };                    if(i.value<5)                        {                            h.style['background-color'        ] = '#7ec880';      };    }\"},{\"dataField\":\"Days\",\"caption\":\"Days\",\"alignment\":\"center\",\"format\":\"#,##0\",\"width\":70,\"cellTemplate\":\"function(e, i) {            var h = document.createElement('DIV');             e.appendChild(h);            h.innerHTML = i.text;             h.style['color'    ] = '#ffffff';             h.style['min-width'    ] = '30px';            h.style['border-radius'    ] = '2px';             h.style['padding'    ] = '3px 7px';             h.style['font-weight'    ] = '700';            h.style['white-space'    ] = 'nowrap';            h.style['text-align'    ] = 'center';             h.style['display'    ] = 'inline-block';            if(i.value<0)             {                h.style['background-color'      ] = '#f5564a';    };            if(i.value>=2)             {                h.style['background-color'      ] = '#7ec880';    };            if(i.value==0 || i.value==1)            {                h.style['background-color'      ] = '#ffc720';    };  }\"},{\"dataField\":\"Stage\",\"caption\":\"Stage\",\"name\":\"Name\",\"alignment\":\"left\",\"format\":\"#,##0\",\"width\":80,\"groupCellTemplate\":\"function(e, i) {        var color=i.component.option().dataSource.find(row=>row.Stage==i.text).Color;        var h=document.createElement('span');        h.style.backgroundColor = color;         h.classList.add('documentStageColor');        e.append(h);        h=document.createElement('span');        var ht=' ' + i.text + ' ('+i.summaryItems[    0  ].value+')';         h.innerHTML = ht;        e.append(h);}\",\"groupIndex\":0},{\"dataField\":\"Enddate\",\"caption\":\"End date\",\"alignment\":\"right\",\"dataType\":\"date\",\"format\":\"d MMM\",\"width\":100},{\"dataField\":\"JobClassification\",\"caption\":\"Classification\",\"alignment\":\"left\",\"format\":\"#,##0\"}],\"sortByGroupSummaryInfo\":[{\"summaryItem\":\"count\"}],\"summary\":{\"groupItems\":[{\"column\":\"Jobs\",\"summaryType\":\"count\",\"valueFormat\":\"#,##0\",\"displayFormat\":\"{0}\",\"alignment\":\"left\"}],\"totalItems\":[{\"column\":\"Effort\",\"summaryType\":\"sum\",\"valueFormat\":\"#,##0\",\"displayFormat\":\"{0}\",\"alignment\":\"right\",\"cellTemplate\":\"function(e, i) {          var h = document.createElement('DIV');           e.appendChild(h);          h.innerHTML = i.text;           h.style['color'  ] = '#ffffff';           if(i.value<0) {              h.style['background-color'    ] = '#f5564a';  }}\"}]}}",
      "DashboardDefinitionId": "51910479-d81f-4119-a160-9cb6ba7c20de"
    },
    {
      "Id": "45138aa2-174e-4700-af53-af7abd164cdf",
      "Name": "Timeline",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 9,
      "Order": 3,
      "Parameters": "[{\"WidgetSubTitle\":\"Closed and In Progress tickets by region\",\"WidgetType\":\"rangeselector\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":12,\"WidgetYPosition\":21,\"WidgetRows\":8,\"WidgetColumns\":36,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"startDate\":\"2019/06/1\",\"endDate\":\"2020/06/31\",\"type\":\"year\",\"visible\":false},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select  max(week) as week,\\n    [Day],\\n        iif(sum([Open]) = 0, null, max(sum(InProgress)) over() + sum([Open])) as [Open],\\n        sum(InProgress) as InProgress,\\n        iif(sum(Critical) = 0, null, max(sum(Closed)) over() + sum(Critical)) as Critical,\\n        sum(Closed) as Closed\\nfrom    (\\n                select  max(datepart(ww, j.EntryDateUtc)) as week,\\n                        min(cast(j.EntryDateUtc as date)) as [Day],\\n                        sum(iif(ws.name = 'Open', 1, 0)) as [Open], \\n                        0 as InProgress,\\n                        0 as Critical,\\n                        0 as Closed\\n                from    Deliverable j, \\n                        WorkflowState ws, \\n                        WorkflowStateType wst, \\n                        Department dep,\\n                        JobClassification jcl,\\n                        ProjectClassification pc, \\n                        Project p\\n                 where  ws.Oid = j.WorkflowState and\\n                        wst.Oid = ws.WorkflowStateType and\\n                        dep.Oid = j.Department and \\n                        j.Classification = jcl.Oid and\\n                        p.Classification = pc.Oid and\\n                        j.Project = p.Oid and\\n                        dep.Name in ('Support', 'Client Service')  and\\n                        ws.name in ('Canceled', 'Closed(Unrelated)', 'Closed', 'Open', 'in Tests', 'Move to Production', 'on Hold', 'Request Uat', 'Requirement Approval', 'Under Analysis', 'To Install', 'Request Approval', 'Request more information') and\\n                        pc.Name = @Region and \\n                        cast(j.EntryDateUtc as date) >= @FromDate and cast(j.EntryDateUtc as date) <= @ToDate\\n                group by datepart(yyyy, j.EntryDateUtc), datepart(ww, j.EntryDateUtc)\\n                union all\\n                select  max(datepart(ww, j.AgreedDateUtc)) as week,\\n                        min(cast(j.AgreedDateUtc as date)) as [Day],\\n                        0 as [Open], \\n                        sum(iif(ws.name in ('in Tests','Move to Production','on Hold', 'Request Uat', 'Requirement Approval', 'Under Analysis', 'To Install', 'Request Approval', 'Request more information'), 1, 0)) as InProgress,\\n                        sum(iif(jcl.Name in ('Urgent', 'Necessary', 'Important') and ws.name not in ('Closed', 'Canceled', 'Closed(Unrelated'), 1, 0)) as Critical,\\n                        sum(iif(ws.name in ('Canceled', 'Closed(Unrelated)', 'Closed'), 1, 0)) as Closed\\n                from    Deliverable j, \\n                        WorkflowState ws, \\n                        WorkflowStateType wst, \\n                        Department dep,\\n                        JobClassification jcl,\\n                        ProjectClassification pc, \\n                        Project p\\n                 where  ws.Oid = j.WorkflowState and\\n                        wst.Oid = ws.WorkflowStateType and\\n                        dep.Oid = j.Department and \\n                        j.Classification = jcl.Oid and\\n                        p.Classification = pc.Oid and\\n                        j.Project = p.Oid and\\n                        dep.Name in ('Support', 'Client Service')  and\\n                        ws.name in ('Canceled', 'Closed(Unrelated)', 'Closed', 'Open', 'in Tests', 'Move to Production', 'on Hold', 'Request Uat', 'Requirement Approval', 'Under Analysis', 'To Install', 'Request Approval', 'Request more information') and\\n                        pc.Name = @Region and \\n                        cast(j.AgreedDateUtc as date) >= @FromDate and cast(j.AgreedDateUtc as date) <= @ToDate\\n                group by datepart(yyyy, j.AgreedDateUtc), datepart(ww, j.AgreedDateUtc)\\n        ) t\\ngroup by [Day]\\norder by [Day]\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[\"Region\"]}}]",
      "DashboardComponentType": {
        "Id": "84ee5399-f21a-42eb-9c52-810ca7ac1e22",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/Sales - Timeline/execute",
      "Configuration": "{\"size\":{\"height\":150},\"containerBackgroundColor\":\"#e0e0e0\",\"selectedRangeColor\":\"#f5564a\",\"chart\":{\"commonSeriesSettings\":{\"type\":\"steparea\",\"argumentField\":\"Day\"},\"series\":[{\"valueField\":\"Closed\",\"color\":\"#b5a0e8\"},{\"valueField\":\"InProgress\"},{\"valueField\":\"Critical\",\"type\":\"scatter\",\"color\":\"#da5859\"},{\"valueField\":\"Open\",\"type\":\"scatter\",\"color\":\"#94df89\",\"point\":{\"symbol\":\"triangleDown\"}}]},\"scale\":{\"minorTickInterval\":\"day\",\"tickInterval\":\"week\",\"valueType\":\"datetime\"},\"sliderMarker\":{\"format\":\"monthAndDay\",\"color\":\"#da5859\"},\"value\":[\"2020/01/01\",\"2020/01/31\"]}",
      "DashboardDefinitionId": "51910479-d81f-4119-a160-9cb6ba7c20de"
    },
    {
      "Id": "4042759b-5f33-441a-97e8-d82acdb5e644",
      "Name": "Tickets activity",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 12,
      "Order": 1,
      "Parameters": "[{\"WidgetSubTitle\":\"Tickets's with more than 5 days without activity\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":9,\"WidgetRows\":12,\"WidgetColumns\":48,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[{\"visible\":true,\"metricName\":\"# Tickets\",\"metricFieldValue\":\"NoActivityTicketsGrandTotal\"}]},\"showSubTitle\":false,\"showTitle\":false},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\" select  \\n        jcl.Name as JobClassification,\\n        j.JobType as JobType,\\n        j.NameAndExternalId as Job,\\n        j.Client as Client,\\n        j.ClientId as ClientId,\\n        cc.HasImage as ClientHasImage,\\n        j.[State] as Stage,\\n        j.Project,\\n        iif(j.[State] in ('Open'), j.StartDate, j.EndDate) as Enddate,\\n        j.Oid,\\n        ISNULL(j.StateTypeColor,j.StateColor) as Color,\\n        DATEDIFF(day,getdate(),j.EndDate) as Days,\\n        (select STRING_AGG(convert(nvarchar(50), ass.[User]), ',') from Assignment ass, AssignmentType ast where ass.DocumentOid = j.Oid and ast.Name = 'Executor' and ass.AssignmentType = ast.Oid) as Executor,\\n        DATEDIFF(day,j.ModifiedOn,getdate()) as LastActivity,\\n        sum(iif((jcl.Name in ('Urgent', 'Necessary', 'Important') and AgreedDateUtc < getdate()), 1 ,0)) over() as DelayedCritical,\\n        count(*) over() as NoActivityTicketsGrandTotal\\n\\nfrom    Analytics.DatamartJob j,\\n        Deliverable d,\\n        CommercialClient cc,\\n        JobClassification jcl,\\n        (\\n            select \\n                  DISTINCT jp.JobOid,\\n                  dep1.Name as PostUserDepartment\\n            from [User] us, Department dep1, (\\n                                    SELECT DISTINCT\\n                                                p.Oid as PostOid,\\n                                                p.DocumentOid as JobOid,\\n                                                p.CreatedBy as PostCreatedBy\\n\\n                                    FROM        Post p\\n                                        INNER JOIN\\n                                        (\\n                                            SELECT \\n                                                    DocumentOid, \\n                                                    MAX(CreatedOnUtc) AS LatestPostDate\\n                                            FROM Post\\n                                            GROUP BY DocumentOid\\n                                        \\n                                        ) LastActivityTable \\n                                    ON p.DocumentOid = LastActivityTable.DocumentOid \\n                                    AND p.CreatedOnUtc = LastActivityTable.LatestPostDate\\n                                    AND DocumentTypeName = 'deliverable'\\n                                    ) jp\\n            where jp.PostCreatedBy = us.Oid AND\\n            us.Department = dep1.Oid\\n        ) jp2\\nwhere   j.Oid = d.Oid AND\\n    j.ClientId = cc.Oid AND\\n    jp2.JobOid = j.Oid AND\\n    d.Classification = jcl.Oid AND\\n    j.Department in ('Support', 'Client Service') AND\\n    ((j.[State] in ('Under Analysis') and \\n    DATEDIFF(day,j.ModifiedOn,getdate()) > 5 )\\n    or (j.[State] in ('Request more information', 'Request Approval') AND jp2.PostUserDepartment = 'Client')) \",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[]}}]",
      "DashboardComponentType": {
        "Id": "84ee5399-f21a-42eb-9c52-810ca7ac1e22",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/Support - Jobs Activity/execute",
      "Configuration": "{\n    \"height\": \"400\",\n    \"onRowClick\": \"function(e){if(e.rowType=='data') SkillsWorkflow.preview(e.key, 'job');}\",\n    \"keyExpr\": \"Oid\",\n    \"selection\": {\n        \"mode\": \"single\"\n    },\n    \"allowFiltering\": true,\n    \"searchPanel\": {\n        \"visible\": true\n    },\n    \"scrolling\": {\n        \"mode\": \"virtual\"\n    },\n    \"columnMinWidth\": \"50\",\n    \"grouping\": {\n        \"autoExpandAll\": true\n    },\n    \"columns\": [\n        {\n            \"dataField\": \"Job\",\n            \"name\": \"Jobs\",\n            \"caption\": \"Jobs\",\n            \"width\": 500\n        },\n        {\n            \"dataField\": \"JobType\",\n            \"name\": \"Job Type\",\n            \"caption\": \"Job Type\"\n        },\n        {\n            \"dataField\": \"Client\",\n            \"name\": \"Client\",\n            \"caption\": \"Client\",\n            \"width\": 100,\n            \"groupIndex\": 1,\n            \"groupCellTemplate\": \"function groupCell(e, i) { var h1=document.createElement('span');                  var h=document.createElement('span');                    e.append(h1);                       var data='';                    if(i.data.items != null){ data = i.data.items[0]}                     else { data= i.data.collapsedItems[0]            }                                        SW.showImage(h1, 'client', 'small', data.ClientHasImage, data.Client, data.ClientId);                      e.append(h);                                              var ht= ' ' + i.text + ' ('+i.summaryItems[0].value+')';                                          h.innerHTML = ht;        }\",\n            \"cellTemplate\": \"function cellTemplate(e, i) { var h1=document.createElement('span');                  var h=document.createElement('span');                    e.append(h1);                               SW.showImage(h1, 'client', 'small', i.data.ClientHasImage, i.data.ClientName, i.data.ClientId);                      e.append(h);                                              var ht= ' ' + i.text + ' ';                                          h.innerHTML = ht;    }\"\n        },\n        {\n            \"dataField\": \"LastActivity\",\n            \"caption\": \"Last Activity\",\n            \"alignment\": \"center\",\n            \"format\": \"#,##0\",\n            \"width\": 100,\n            \"cellTemplate\": \"function(e, i) {SK.setRAG(e, i.value, i.value>=15, i.value>=5 && i.value<15, i.value<5);}\"\n        },\n        {\n            \"dataField\": \"Days\",\n            \"caption\": \"Days\",\n            \"alignment\": \"center\",\n            \"format\": \"#,##0\",\n            \"width\": 70,\n            \"cellTemplate\": \"function(e, i) {            var h = document.createElement('DIV');             e.appendChild(h);            h.innerHTML = i.text;             h.style['color'    ] = '#ffffff';             h.style['min-width'    ] = '30px';            h.style['border-radius'    ] = '2px';             h.style['padding'    ] = '3px 7px';             h.style['font-weight'    ] = '700';            h.style['white-space'    ] = 'nowrap';            h.style['text-align'    ] = 'center';             h.style['display'    ] = 'inline-block';            if(i.value<0)             {                h.style['background-color'      ] = '#f5564a';    };            if(i.value>=2)             {                h.style['background-color'      ] = '#7ec880';    };            if(i.value==0 || i.value==1)            {                h.style['background-color'      ] = '#ffc720';    };  }\"\n        },\n        {\n            \"dataField\": \"Stage\",\n            \"caption\": \"Stage\",\n            \"name\": \"Name\",\n            \"alignment\": \"left\",\n            \"format\": \"#,##0\",\n            \"width\": 80,\n            \"groupCellTemplate\": \"function(e, i) {    var color=i.component.option().dataSource.find(row=>row.Stage==i.text).Color;        var h=document.createElement('span');        h.style.backgroundColor = color;         h.classList.add('documentStageColor');        e.append(h);        h=document.createElement('span');        var ht=' ' + i.text + ' ('+i.summaryItems[    0  ].value+')';         h.innerHTML = ht;        e.append(h);}\",\n            \"groupIndex\": 0\n        },\n        {\n            \"dataField\": \"Enddate\",\n            \"caption\": \"End date\",\n            \"alignment\": \"right\",\n            \"dataType\": \"date\",\n            \"format\": \"d MMM\",\n            \"width\": 100\n        },\n        {\n            \"dataField\": \"JobClassification\",\n            \"caption\": \"Classification\",\n            \"alignment\": \"left\",\n            \"format\": \"#,##0\"\n        },\n        {\n            \"dataField\": \"Executor\",\n            \"caption\": \"Executor\",\n            \"alignment\": \"right\",\n            \"format\": \"#,##0\",\n            \"width\": 100,\n            \"cellTemplate\": \"function(e, i) {          if(i.text == '') return;                     var executors = i.text.split(',');     function myFunction(item, index) {  SW.showImage(e, 'user','small', true, null, item);                   }          executors.forEach( (item, index) => myFunction(item, index));}\"\n        }\n    ],\n    \"sortByGroupSummaryInfo\": [\n        {\n            \"summaryItem\": \"count\"\n        }\n    ],\n    \"summary\": {\n        \"groupItems\": [\n            {\n                \"column\": \"Jobs\",\n                \"summaryType\": \"count\",\n                \"valueFormat\": \"#,##0\",\n                \"displayFormat\": \"{0}\",\n                \"alignment\": \"left\"\n            }\n        ],\n        \"totalItems\": [\n            {\n                \"column\": \"Effort\",\n                \"summaryType\": \"sum\",\n                \"valueFormat\": \"#,##0\",\n                \"displayFormat\": \"{0}\",\n                \"alignment\": \"right\",\n                \"cellTemplate\": \"function(e, i) {          var h = document.createElement('DIV');           e.appendChild(h);          h.innerHTML = i.text;           h.style['color'  ] = '#ffffff';           if(i.value<0) {              h.style['background-color'    ] = '#f5564a';  }}\"\n            }\n        ]\n    }\n}",
      "DashboardDefinitionId": "51910479-d81f-4119-a160-9cb6ba7c20de"
    }
  ],
  "QueryText": null,
  "UseStore": false,
  "StoreEntity": null
}
