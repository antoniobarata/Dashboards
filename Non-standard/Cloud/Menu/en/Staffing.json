{
  "DashboardDefinitionRoles": [],
  "Id": "edf7b287-c0c7-4e65-90f4-8ab92e85b57d",
  "Name": "Staffing",
  "Active": true,
  "Location": 0,
  "DocumentId": "00000000-0000-0000-0000-000000000000",
  "DocumentName": "",
  "DocumentTypeName": null,
  "DocumentsConfiguration": "{}",
  "Templates": [],
  "DashboardDefinitionComponents": [
    {
      "Id": "fe8812b6-5caa-41fd-853f-7588c47835c9",
      "Name": "Company and Client Group",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 4,
      "Order": 0,
      "Parameters": "[{\"WidgetSubTitle\":\"Choose a Company or Client Group\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":0,\"WidgetRows\":8,\"WidgetColumns\":14,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"showSubTitle\":false,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"queryempty\",\"value\":\"SELECT 1;\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[]}}]",
      "DashboardComponentType": {
        "Id": "c666ba5e-8578-4132-86a5-0f96c665000d",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/Analytics_Utilization_Per_Company_Department_User/execute",
      "Configuration": "{\n    \"colCount\": 1,\n    \"items\": [\n        {\n            \"name\": \"Year\",\n            \"dataField\": \"Year\",\n            \"editorType\": \"dxNumberBox\",\n            \"editorOptions\": {\n                \"showSpinButtons\": true,\n                \"value\": 2020,\n                \"width\": 65,\n                \"placeholder\": \"year\",\n                \"onValueChanged\": \"function(e){ if(e.value != null) { SkillsWorkflow.setDashboardFilter(\u0027year\u0027, e.value); }  } \"\n            },\n            \"noDataText\": \"Please wait...\"\n        },\n        {\n            \"dataField\": \"CompanyId\",\n            \"label\": {\n                \"text\": \"Company\"\n            },\n            \"validationRules\": [\n                {\n                    \"type\": \"required\"\n                }\n            ],\n            \"editorType\": \"dxSelectBox\",\n            \"editorOptions\": {\n                \"width\": 250,\n                \"searchEnabled\": true,\n                \"dataSource\": {\n                    \"load\": \"function(loadOptions){ \n                            var searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : \u0027\u0027); \n                            var searchTake = (loadOptions.searchValue != null \u0026\u0026 loadOptions.searchValue != \u0027\u0027 ? 10 : 100); \n                            return SkillsWorkflow.executeAPI(\u0027GET\u0027, \u0027companies/lookup\u0027,null,{})\n                    }\",\n                    \"byKey\": \"function(key) { return SW.executeAPI(\u0027GET\u0027,\u0027companies/\u0027+key+\u0027/lookup\u0027,null,{}).then( result =\u003e  { return Promise.resolve(result);}) }\"\n                },\n                \"displayExpr\": \"Name\",\n                \"valueExpr\": \"Id\",\n                \"onValueChanged\": \"function(e){ \n                    if( e.value != null \u0026\u0026 e.value != \u0027\u0027) {\n                        SkillsWorkflow.setDashboardFilter(\u0027CompanyOid\u0027, e.value);\n                    } else {\n                            SkillsWorkflow.setDashboardFilter(\u0027CompanyOid\u0027, \u002700000000-0000-0000-0000-000000000000\u0027);\n                    }\n                }\"\n            }\n        },\n        {\n            \"name\": \"Client Group\",\n            \"label\": {\n                \"text\": \"Client Group\"\n            },\n            \"editorType\": \"dxSelectBox\",\n            \"editorOptions\": {\n                \"width\": 250,\n                \"searchEnabled\": true,\n                \"minSearchLength\": 0,\n                \"dataSource\": {\n                    \"load\": \"function(loadOptions){ \n                                    var searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : \u0027\u0027); \n                                    var searchTake = (loadOptions.searchValue != null \u0026\u0026 loadOptions.searchValue != \u0027\u0027 ? 10 : 100); \n                                    return SkillsWorkflow.executeAPI(\u0027GET\u0027, \u0027clientgroups/lookup\u0027,null,{})\n                    }\",\n                    \"byKey\": \"function(key) { return SW.executeAPI(\u0027GET\u0027,\u0027clientgroups/\u0027+key+\u0027/lookup\u0027,null,{}).then( result =\u003e  { return Promise.resolve(result);}) }\"\n                },\n                \"onInitialized\": \"function(e) { SkillsWorkflow.setDashboardFilter(\u0027ClientGroupOid\u0027, \u002700000000-0000-0000-0000-000000000000\u0027); }\",\n                \"value\": \"\",\n                \"onValueChanged\": \"function(e){ if(e.value != null) { SW.setDashboardFilter(\u0027ClientGroupOid\u0027, e.value); } }\",\n                \"valueExpr\": \"Id\",\n                \"displayExpr\": \"Name\"\n            },\n            \"noDataText\": \"Please wait...\"\n        }\n    ],\n    \"height\": 72\n}",
      "DashboardDefinitionId": "edf7b287-c0c7-4e65-90f4-8ab92e85b57d"
    },
    {
      "Id": "b965474e-ce1e-434f-abdb-e708372a24c4",
      "Name": "Deliverables Staffing",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 12,
      "Order": 4,
      "Parameters": "[{\"WidgetSubTitle\":\"Hours and Fee per Typology Group\",\"WidgetType\":\"pivotgrid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":8,\"WidgetRows\":26,\"WidgetColumns\":48,\"WidgetHeader\":{\"showContextInfo\":false,\"WidgetPeriodChooser\":{\"type\":\"year\",\"visible\":false},\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select \\n    v.Deliverable,\\n    v.[Service],\\n    v.TypologyGroup,\\n    v.[User],\\n    v.Division,\\n    v.Department,\\n    v.ContractedTime,\\n    v.ClientGroup,\\n    v.ClientName,\\n    v.FeeProposal,\\n    v.EstimateName,\\n    IIF(n.RoleId is not null, v.Rate, null) as Rate,\\n    IIF(n.RoleId is not null, v.TableRate, null) as TableRate,\\n    v.TotalDeliverable,\\n    IIF(n.RoleId is not null, v.Total, null) as Total,\\n    v.StartDate,\\n    v.EndDate,\\n    v.[Order]\\nFROM\\n(\\n    select  IIF(eit.[Order] \u003c 10, concat(\u00270\u0027, eit.[Order], \u0027. \u0027, eit.[Description]), concat(eit.[Order], \u0027. \u0027, eit.[Description])) as Deliverable,\\n            art.[Name] as [Service],\\n            utg.[Name] as TypologyGroup,\\n            usr.[Name] as [User],\\n            div.[Name] as Division,\\n            dep.[Name] as Department,\\n            edt.[Hours] as ContractedTime,\\n            cg.[Name] as ClientGroup,\\n            cc.[Name] as ClientName,\\n            c.[Name] as FeeProposal,\\n            est.[Name] as EstimateName,\\n            edt.UnitPriceCost as Rate,\\n            edt.[Rate] as TableRate,\\n            edt.ValueWithoutVatIncome as TotalDeliverable,\\n            edt.UnitPriceCost * edt.[Hours] as Total,\\n            cast(est.[Date] as Date) as StartDate,\\n            cast(est.[Expiration] as Date) as EndDate,\\n            eit.[Order]\\n    from    Estimate est\\n                left outer join CommercialClient cc on cc.Oid = est.Client\\n                left outer join [Contract] c on c.Oid = est.[Contract]\\n                left outer join ClientGroup cg on cg.Oid = cc.ClientGroup,\\n            EstimateItem eit, \\n            Article art,\\n            EstimateItemDetail edt\\t\\n                left outer join Department dep on dep.Oid = edt.Department\\n                left outer join Division div on div.Oid = dep.Division\\n                left outer join [User] usr on usr.Oid = edt.[User]\\n                left outer join UserTypologyGroup utg on utg.Oid = edt.UserTypologyGroup\\n    where   eit.Estimate = est.Oid and\\n            edt.EstimateItem = eit.Oid and\\n            edt.[Type] = 2 and\\n            art.Oid = eit.Article and \\n            est.[Date] between @FromDate and @ToDate and\\n            (cg.Oid = @ClientGroupOid or @ClientGroupOid = \u002700000000-0000-0000-0000-000000000000\u0027) and\\n            (utg.Company = @CompanyOid or @CompanyOid = \u002700000000-0000-0000-0000-000000000000\u0027)\\n) v\\n    left outer join Analytics.[Authorization](@CurrentUserId) n ON (n.RoleName = \u0027RateCardRead\u0027)\\norder by v.[Order]\\n\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"RequiredFilters\":[\"CompanyOid\",\"ClientGroupOid\",\"startDate\",\"endDate\"]}}]",
      "DashboardComponentType": {
        "Id": "c666ba5e-8578-4132-86a5-0f96c665000d",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/Resources - Staffing/execute",
      "Configuration": "{\n    \"allowSortingBySummary\": true,\n    \"allowSorting\": true,\n    \"allowFiltering\": true,\n    \"allowExpandAll\": true,\n    \"headerFilter\": {\n        \"allowSearch\": true,\n        \"showRelevantValues\": true\n    },\n    \"height\": \"500\",\n    \"showBorders\": true,\n    \"export\": {\n        \"enabled\": true,\n        \"fileName\": \"Deliverables Staffing\"\n    },\n    \"showRowGrandTotals\": true,\n    \"fieldPanel\": {\n        \"showColumnFields\": true,\n        \"showDataFields\": true,\n        \"showFilterFields\": true,\n        \"showRowFields\": true,\n        \"allowFieldDragging\": true,\n        \"visible\": true\n    },\n    \"wordWrapEnabled\": false,\n    \"dataSource\": {\n        \"fields\": [\n            {\n                \"caption\": \"Division\",\n                \"dataField\": \"Division\",\n                \"area\": \"row\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Department\",\n                \"dataField\": \"Department\",\n                \"area\": \"row\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Typology Group\",\n                \"width\": 120,\n                \"dataField\": \"TypologyGroup\",\n                \"area\": \"row\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Name\",\n                \"dataField\": \"User\",\n                \"dataType\": \"string\",\n                \"area\": \"row\",\n                \"expanded\": true\n            },\n            {\n                \"dataField\": \"Deliverable\",\n                \"dataType\": \"string\",\n                \"area\": \"column\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Hours\",\n                \"dataField\": \"ContractedTime\",\n                \"dataType\": \"number\",\n                \"summaryType\": \"sum\",\n                \"area\": \"data\",\n                \"format\": \"###,###,###\"\n            },\n            {\n                \"caption\": \"Rate\",\n                \"dataField\": \"Rate\",\n                \"dataType\": \"number\",\n                \"summaryType\": \"sum\",\n                \"area\": \"data\",\n                \"format\": \"###,###,###\"\n            },\n            {\n                \"caption\": \"TableRate\",\n                \"dataField\": \"TableRate\",\n                \"dataType\": \"number\",\n                \"summaryType\": \"sum\",\n                \"area\": \"data\",\n                \"format\": \"###,###,###\"\n            },\n            {\n                \"caption\": \"Total\",\n                \"dataField\": \"Total\",\n                \"dataType\": \"number\",\n                \"summaryType\": \"sum\",\n                \"area\": \"data\",\n                \"format\": \"###,###,###\"\n            },\n            {\n                \"dataField\": \"Service\",\n                \"dataType\": \"string\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Division\",\n                \"dataField\": \"Division\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Department\",\n                \"dataField\": \"Department\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Client Group\",\n                \"dataField\": \"ClientGroup\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Client\",\n                \"dataField\": \"ClientName\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Fee\",\n                \"dataField\": \"FeeProposal\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Estimate\",\n                \"dataField\": \"EstimateName\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"Start Date\",\n                \"dataField\": \"StartDate\",\n                \"dataType\": \"date\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            },\n            {\n                \"caption\": \"End Date\",\n                \"dataField\": \"EndDate\",\n                \"dataType\": \"date\",\n                \"area\": \"filter\",\n                \"expanded\": true\n            }\n        ],\n        \"store\": null\n    },\n    \"onCellPrepared\": \"function(e) {\n      if (e.area == \u0027column\u0027 \u0026\u0026 e.rowIndex == 0 \u0026\u0026 e.cell.type == \u0027D\u0027 \u0026\u0026 e.columnIndex % 2 == 0) \n        e.cellElement.setAttribute(\u0027background-color\u0027, \u0027#e4e4e4\u0027);\n}\"\n}",
      "DashboardDefinitionId": "edf7b287-c0c7-4e65-90f4-8ab92e85b57d"
    },
    {
      "Id": "2d25472b-518e-46db-8767-ec098750bd98",
      "Name": "Period Selector",
      "Active": true,
      "UseQuery": false,
      "Query": null,
      "Size": 8,
      "Order": 2,
      "Parameters": "[{\"WidgetSubTitle\":\"Choose a date range based on your Estimate Start Date. The data will include the totals for the Staff Plan Estimates.\",\"WidgetType\":\"rangeselector\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#efefef\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":14,\"WidgetYPosition\":0,\"WidgetRows\":8,\"WidgetColumns\":34,\"WidgetHeader\":{\"WidgetPeriodChooser\":{\"startDate\":\"2019-01-01\",\"endDate\":\"2019-12-31\",\"type\":\"year\",\"visible\":false},\"showSubTitle\":true,\"showTitle\":true},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"With Dates as\\r\\n(\\r\\n\\tSELECT \\r\\n\\t\\tcast(concat(@Year, \u0027-1\u0027, \u0027-1\u0027) as date) as [StartDate],\\r\\n\\t\\tcast(concat(@Year, \u0027-12\u0027, \u0027-31\u0027) as date) as [EndDate]\\r\\n),\\r\\nAllDays as \\r\\n( \\r\\n\\tselect   \\r\\n\\t\\td.StartDate as [Date], \\r\\n\\t\\t1 as [level]\\r\\n\\tfrom Dates d\\r\\n    union all\\r\\n\\tselect   \\r\\n\\t\\tDATEADD(DAY, 1, [Date]), [level] + 1\\r\\n\\tfrom     \\r\\n\\t\\tAllDays, Dates d\\r\\n\\twhere    \\r\\n\\t\\t[Date] \u003c d.EndDate \\r\\n),\\r\\nGetData as (\\r\\n\\tSELECT\\tSUM(v.[Hours]) as [Hours],\\r\\n\\t\\t\\tv.[Date]\\r\\n\\tFROM\\t(\\r\\n\\t\\t\\tSELECT \\tSUM(v.ActualTime) as [Hours],\\r\\n\\t\\t\\t\\t\\tcast(v.[Date] as date) as [Date]\\r\\n\\t\\t\\tFROM\\tAnalytics.Timesheet(@CurrentUserId) v\\r\\n\\t\\t\\tWHERE\\tYear(v.[Date]) = @Year and\\r\\n\\t\\t\\t\\t\\tv.CompanyId = @CompanyOid and\\r\\n\\t\\t\\t\\t\\t(@ClientGroupOid = \u002700000000-0000-0000-0000-000000000000\u0027 or v.ClientGroupId = @ClientGroupOid)\\r\\n\\t\\t\\tGROUP BY cast(v.[Date] as date)\\r\\n\\t\\t\\tUNION ALL\\r\\n\\t\\t\\tSELECT \\tSUM(v.[Hours]) as [Hours],\\r\\n\\t\\t\\t\\t\\tcast(v.[Date] as date) as [Date]\\r\\n\\t\\t\\tFROM\\tAnalytics.Leave(@CurrentUserId) v\\r\\n\\t\\t\\tWHERE\\tYear(v.[Date]) = @Year and\\r\\n\\t\\t\\t\\t\\tv.CompanyId = @CompanyOid\\r\\n\\t\\t\\tGROUP BY cast(v.[Date] as date)\\r\\n\\t\\t\\tUNION ALL\\r\\n\\t\\t\\tSELECT \\tSUM(v.[Hours]) as [Hours],\\r\\n\\t\\t\\t\\t\\tcast(v.[Date] as date) as [Date]\\r\\n\\t\\t\\tFROM\\tAnalytics.Holiday(@CurrentUserId) v\\r\\n\\t\\t\\tWHERE\\tYear(v.[Date]) = @Year and\\r\\n\\t\\t\\t\\t\\tv.CompanyId = @CompanyOid\\r\\n\\t\\t\\tGROUP BY cast(v.[Date] as date)\\r\\n\\t) v\\r\\n\\tGROUP BY v.[Date]\\r\\n)\\r\\nselect \\r\\n\\tad.[Date],\\r\\n\\tsum(IsNull(gd.[Hours], 0)) as [Hours]\\r\\nfrom \\r\\n\\tAllDays ad\\r\\n\\t\\tleft outer join GetData gd on cast(gd.[Date] as date) = cast(ad.[Date] as date)\\r\\ngroup by \\r\\n\\tad.[Date]\\r\\noption \\r\\n\\t(MAXRECURSION 0)\",\"mapping\":\"\"}},\"Filters\":{\"startDate\":\"startDate\",\"endDate\":\"endDate\"},\"QueryConfiguration\":{\"RequiredFilters\":[\"CompanyOid\",\"year\"]}}]",
      "DashboardComponentType": {
        "Id": "c666ba5e-8578-4132-86a5-0f96c665000d",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "globalQuery/Analytics_Utilization_Range_Selector/execute",
      "Configuration": "{\r\n    \"size\": {\r\n        \"height\": 150\r\n    },\r\n    \"containerBackgroundColor\": \"#e0e0e0\",\r\n    \"selectedRangeColor\": \"#f5564a\",\r\n    \"chart\": {\r\n        \"commonSeriesSettings\": {\r\n            \"type\": \"steparea\",\r\n            \"argumentField\": \"Date\"\r\n        },\r\n        \"series\": [\r\n            {\r\n                \"valueField\": \"Hours\"\r\n            }\r\n        ]\r\n    },\r\n    \"scale\": {\r\n        \"minorTickInterval\": \"day\",\r\n        \"tickInterval\": \"month\",\r\n        \"valueType\": \"datetime\"\r\n    },\r\n    \"sliderMarker\": {\r\n        \"format\": \"monthAndDay\",\r\n        \"color\": \"#da5859\"\r\n    },\r\n    \"value\": {\r\n        \"length\": {\r\n            \"years\": 1\r\n        }\r\n    }\r\n}",
      "DashboardDefinitionId": "edf7b287-c0c7-4e65-90f4-8ab92e85b57d"
    }
  ],
  "QueryText": null,
  "UseStore": false,
  "StoreEntity": null,
  "Version": 17,
  "Default": false
}
