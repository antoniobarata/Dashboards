{
  "DashboardDefinitionRoles": [],
  "Id": "7b427ef4-54fa-44b6-9e83-b450374c55b0",
  "Name": "Home",
  "Active": true,
  "Location": 3,
  "DocumentId": "00000000-0000-0000-0000-000000000000",
  "DocumentName": "",
  "DocumentTypeName": null,
  "DocumentsConfiguration": "{}",
  "Templates": [],
  "DashboardDefinitionComponents": [
    {
      "Id": "3b28c2de-97ff-4a2a-888d-5b3693e6bb20",
      "Name": "Notifications",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 12,
      "Order": 0,
      "Parameters": "[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":28,\"WidgetYPosition\":0,\"WidgetRows\":24,\"WidgetColumns\":20,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select\\tn.CreatedBy as CreatedById,\\r\\n\\t\\tu.[Name] as CreatedByName,\\r\\n\\t\\tu.[HasImage] as CreatedByHasImage,\\r\\n\\t\\tformat(max(n.CreatedAt), 'dd MMMM, hh:mm tt') as CreatedAt,\\r\\n\\t\\tn.ObjectName,\\r\\n\\t\\tn.ObjectID,\\r\\n        n.ObjectType,\\r\\n        (select top 1 nd.[Description] from [Notification] nd where nd.ObjectID = n.ObjectID and nd.[Description] like '%@%' order by nd.CreatedAt desc) as [Description],\\r\\n\\t\\tsum(n.NotificationCounter) as NotificationCounter\\r\\nfrom\\t[NotificationUser] nu, \\r\\n\\t\\t[Notification] n,\\r\\n\\t\\t[User] u\\r\\nwhere\\tn.Oid = nu.[Notification] and\\r\\n\\t\\tu.Oid = n.CreatedBy and\\r\\n\\t\\tnu.[User] = @CurrentUserId and\\r\\n\\t\\t(select top 1 nd.[Description] from [Notification] nd where nd.ObjectID = n.ObjectID and nd.[Description] like '%@%' order by nd.CreatedAt desc) is not null\\r\\ngroup by n.CreatedBy, u.[Name], u.[HasImage], n.ObjectName, n.ObjectType, n.ObjectID\\r\\norder by format(max(n.CreatedAt), 'dd MMMM, hh:mm tt') desc\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]",
      "DashboardComponentType": {
        "Id": "c666ba5e-8578-4132-86a5-0f96c665000d",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\r\n    \"selection\": {\r\n        \"mode\": \"none\"\r\n    },\r\n    \"export\": {\r\n        \"enabled\": false\r\n    },\r\n    \"searchPanel\": {\r\n        \"visible\": false\r\n    },\r\n    \"groupPanel\": {\r\n        \"visible\": false\r\n    },\r\n    \"columnChooser\": {\r\n        \"enabled\": false\r\n    },\r\n    \"headerFilter\": {\r\n        \"visible\": false\r\n    },\r\n    \"height\": \"600\",\r\n    \"keyExpr\": \"ObjectID\",\r\n    \"onRowClick\": \"function popupType(e) {\\n    if (e.rowType == 'data') {\\n        debugger;\\n        if (e.data.ObjectType === 'Deliverable.Object') {\\n            SkillsWorkflow.preview(e.key, 'job');\\n        } else if (e.data.ObjectType === 'Estimate.Object') {\\n            SkillsWorkflow.preview(e.key, 'estimate');\\n        } else if (e.data.ObjectType === 'Project.Object') {\\n            SkillsWorkflow.preview(e.key, 'project');\\n        }\\n    }\\n}\",\r\n    \"columns\": [\r\n        {\r\n            \"caption\": \"\",\r\n            \"cellTemplate\": \"function(e,i) {\r\n                var img = document.createElement('DIV');\r\n                img.setAttribute('class', 'ellipsis');\r\n                SW.showImage(img, 'user', 'medium', i.data.CreatedByHasImage, i.data.CreatedByName, i.data.CreatedById);img.setAttribute('style', 'float: left');\r\n                e.append(img);\r\n                \r\n                var info = document.createElement('DIV');\r\n                info.classList.add('info');\r\n                info.setAttribute('class', 'ellipsis');\r\n\r\n                var title = document.createElement('DIV');\r\n                title.classList.add('title');\r\n                title.setAttribute('class', 'ellipsis');\r\n                \r\n                var createdBy = document.createElement('SPAN');\r\n                createdBy.classList.add('CreatedBy');\r\n                createdBy.title = i.data.CreatedByName;\r\n                createdBy.innerText = i.data.CreatedByName;\r\n                createdBy.setAttribute('style', 'font-weight: 700; font-size: 13px; color: #4d81d0; float: left; width: 125px; margin-left: 5px;');\r\n                \r\n                var createdAt = document.createElement('SPAN');\r\n                createdAt.classList.add('CreatedAt');\r\n                createdAt.innerText = i.data.CreatedAt;\r\n                createdAt.setAttribute('style', 'color: #858586; font-size: 12px; float: right; font-weight: 400;');\r\n                \r\n                var object = document.createElement('DIV');\r\n                object.classList.add('object');object.setAttribute('class', 'ellipsis');\r\n                object.title = i.data.ObjectName;\r\n                object.innerText = i.data.ObjectName;\r\n                object.setAttribute('style', 'color: #666; font-size: 12px; float: left; font-weight: 600; margin-top: 4px; margin-left: 5px; width: 100%;');\r\n                \r\n                var description = document.createElement('DIV');\r\n                description.classList.add('description');\r\n                description.setAttribute('class', 'ellipsis');\r\n                description.innerHTML = i.data.Description;\r\n                debugger;\r\n                description.setAttribute('style', 'color: #666; font-size: 12px; float: left; margin-bottom: 7px; font-weight: 600; margin-top: 4px; margin-left: 5px; width: 100%;');\r\n                \r\n                var counter = document.createElement('DIV');\r\n                counter.classList.add('counter');counter.setAttribute('class', 'ellipsis');\r\n                counter.innerText = i.data.NotificationCounter + ' recent activities';\r\n                counter.setAttribute('style', 'font-size: 10px; color: #666666; float: right; margin-top: 10px;');\r\n                \r\n                title.append(createdBy);\r\n                title.append(createdAt);\r\n\r\n                info.append(title);\r\n                info.append(object);\r\n                info.append(description);\r\n                info.append(counter);\r\n                \r\n                e.append(info);\r\n        }\"\r\n    }\r\n],\r\n\"summary\": {\r\n    \"totalItems\": [\r\n        {\r\n            \"column\": \"\",\r\n            \"summaryType\": \"count\",\r\n            \"valueFormat\": \"#,##0\",\r\n            \"displayFormat\": \"Total: {0}\",\r\n            \"alignment\": \"left\"\r\n        }\r\n    ]\r\n},\r\n\"onToolbarPreparing\": \"null\"\r\n}",
      "DashboardDefinitionId": "7b427ef4-54fa-44b6-9e83-b450374c55b0"
    },
    {
      "Id": "b4c0f9bb-286c-496b-8e7e-bea2422d51cb",
      "Name": "Jobs In Progress",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 12,
      "Order": 0,
      "Parameters": "[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":0,\"WidgetRows\":24,\"WidgetColumns\":28,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select \\r\\n    j.Oid,\\r\\n\\tj.[NameAndExternalId] as JobName,\\r\\n\\tp.Number as ProjectNumber,\\r\\n\\tj.[State] as Stage,\\r\\n    j.StateType as StageType,\\r\\n    j.StateTypeCode,\\r\\n\\tj.JobType as JobType,\\r\\n\\td.[Priority],\\r\\n    j.ModifiedOn,\\r\\n\\tisnull(ws.Color, wst.Color) as Color,\\r\\n    datediff(day, getdate(), j.[Date]) as [Days],\\r\\n\\t(select STRING_AGG(convert(nvarchar(50), ass.[User]), ',') from Assignment ass, AssignmentType ast, [User] u where \\r\\n\\t\\tass.DocumentOid = j.Oid and ast.Name = 'Executor' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid) as ExecutorId,\\r\\n    (select STRING_AGG(convert(nvarchar(50), u.[Name]), ',') from Assignment ass, AssignmentType ast, [User] u where \\r\\n        ass.DocumentOid = j.Oid and ast.Name = 'Executor' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid) as ExecutorName,\\r\\n    (select STRING_AGG(convert(nvarchar(50), u.[HasImage]), ',') from Assignment ass, AssignmentType ast, [User] u where \\r\\n        ass.DocumentOid = j.Oid and ast.Name = 'Executor' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid) as ExecutorHasImage,\\r\\n\\tj.Client as ClientName,\\r\\n    j.ClientId,\\r\\n    cc.HasImage as ClientHasImage\\r\\nfrom \\r\\n\\tAnalytics.Job(@CurrentUserId) j,\\r\\n\\tDeliverable d,\\r\\n\\tProject p,\\r\\n\\tWorkflowState ws, \\r\\n    WorkflowStateType wst, \\r\\n\\tCommercialClient cc\\r\\nwhere\\r\\n\\td.Oid = j.Oid and\\r\\n\\tp.Oid = j.ProjectId and \\r\\n\\tcc.Oid = j.ClientId and\\r\\n\\tws.Oid = d.WorkflowState and\\r\\n    wst.Oid = ws.WorkflowStateType and\\r\\n\\t@CurrentUserId in (\\r\\n\\t\\tselect ass.[User] from Assignment ass, AssignmentType ast, [User] u where \\r\\n\\t\\tass.DocumentOid = j.Oid and ast.Name = 'Executor' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid\\r\\n\\t) and j.StateTypeCode in (4)\\r\\norder by j.ModifiedOn desc\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]",
      "DashboardComponentType": {
        "Id": "c666ba5e-8578-4132-86a5-0f96c665000d",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\r\n    \"stateStoring\": {\r\n        \"enabled\": false\r\n    },\r\n    \"height\": \"600\",\r\n    \"keyExpr\": \"Oid\",\r\n    \"onRowClick\": \"function(e) {\\n    if (e.rowType == 'data')\\n        SkillsWorkflow.preview(e.key, 'job');\\n}\",\r\n    \"selection\": {\r\n        \"mode\": \"single\"\r\n    },\r\n    \"allowFiltering\": false,\r\n    \"searchPanel\": {\r\n        \"visible\": true\r\n    },\r\n    \"scrolling\": {\r\n        \"mode\": \"virtual\"\r\n    },\r\n    \"columnMinWidth\": \"\",\r\n    \"grouping\": {\r\n        \"autoExpandAll\": true\r\n    },\r\n    \"columns\": [\r\n        {\r\n            \"caption\": \"Client\",\r\n            \"alignment\": \"center\",\r\n            \"width\": 50,\r\n            \"format\": {\r\n                \"image\": {\r\n                    \"mapping\": {\r\n                        \"id\": \"ClientId\",\r\n                        \"name\": \"ClientName\",\r\n                        \"hasImage\": \"ClientHasImage\"\r\n                    },\r\n                    \"size\": \"medium\"\r\n                }\r\n            },\r\n            \"entity\": \"client\",\r\n            \"allowEditing\": false,\r\n            \"visibleIndex\": 1\r\n        },\r\n        {\r\n            \"dataField\": \"JobName\",\r\n            \"caption\": \"Name\",\r\n            \"allowEditing\": false,\r\n            \"width\": 250,\r\n            \"visibleIndex\": 3\r\n        },\r\n        {\r\n            \"dataField\": \"JobType\",\r\n            \"name\": \"Type\",\r\n            \"caption\": \"Type\",\r\n            \"allowEditing\": false,\r\n            \"width\": 170,\r\n            \"visibleIndex\": 5\r\n        },\r\n        {\r\n            \"dataField\": \"Priority\",\r\n            \"caption\": \"Priority\",\r\n            \"alignment\": \"center\",\r\n            \"width\": 60,\r\n            \"cellTemplate\": \"function(e, i) { SW.showPriority(e, i.value); }\",\r\n            \"visibleIndex\": 6\r\n        },\r\n        {\r\n            \"dataField\": \"Stage\",\r\n            \"caption\": \"Stage\",\r\n            \"name\": \"Name\",\r\n            \"alignment\": \"left\",\r\n            \"format\": \"#,##0\",\r\n            \"width\": 200,\r\n            \"allowEditing\": false,\r\n            \"cellTemplate\": \"function(e, i) {         var h=document.createElement('span');        h.style.backgroundColor = i.data.Color;         h.classList.add('documentStageColor');        e.append(h);        h=document.createElement('span');        h.innerHTML = ' ' + i.text;        e.append(h);}\",\r\n            \"groupCellTemplate\": \"function(e, i) {        var color=i.component.option().dataSource.find(row=>row.Stage==i.text).Color;        var h=document.createElement('span');        h.style.backgroundColor = color;         h.classList.add('documentStageColor');        e.append(h);        h=document.createElement('span');        var ht=' ' + i.text + ' ('+i.summaryItems[0].value+')';         h.innerHTML = ht;        e.append(h);}\",\r\n            \"visibleIndex\": 4\r\n        }\r\n    ],\r\n    \"sortByGroupSummaryInfo\": [\r\n        {\r\n            \"summaryItem\": \"count\"\r\n        }\r\n    ],\r\n    \"summary\": {\r\n        \"totalItems\": [\r\n            {\r\n                \"column\": \"Jobs\",\r\n                \"summaryType\": \"count\",\r\n                \"valueFormat\": \"#,##0\",\r\n                \"displayFormat\": \"Total: {0}\",\r\n                \"alignment\": \"left\"\r\n            }\r\n        ]\r\n    }\r\n}",
      "DashboardDefinitionId": "7b427ef4-54fa-44b6-9e83-b450374c55b0"
    }
  ],
  "QueryText": null,
  "UseStore": false,
  "StoreEntity": null,
  "Version": 2,
  "Default": false
}
