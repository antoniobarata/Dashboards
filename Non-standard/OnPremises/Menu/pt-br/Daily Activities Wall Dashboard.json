{
  "DashboardDefinitionRoles": [],
  "Id": "c80a80de-700f-4f0a-8507-802faf6b04a4",
  "Name": "Wall Dashboard",
  "Active": true,
  "Location": 0,
  "DocumentId": "00000000-0000-0000-0000-000000000000",
  "DocumentName": "",
  "DocumentTypeName": null,
  "DocumentsConfiguration": "{}",
  "Templates": [

  ],
  "DashboardDefinitionComponents": [
    {
      "Id": "1c658221-8c5b-4416-a40f-0801aef3114e",
      "Name": "",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 1,
      "Order": 4,
      "Parameters": "[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":33,\"WidgetYPosition\":22,\"WidgetRows\":3,\"WidgetColumns\":5,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with CurrentUserPermissions as (\\r\\n    select  ucdd.Company as Company,\\r\\n            ucdd.Division as Division,\\r\\n            ucdd.Department as Department\\r\\n    from    SkillUsersCompaniesDivisionsDepartments ucdd\\r\\n    where   ucdd.[User] = @CurrentUserId\\r\\n) \\r\\nselect  count(*) as Total\\r\\nfrom    Deliverable d,\\r\\n        [WorkflowState] ws,\\r\\n        [WorkflowStateType] wst \\r\\nwhere   cast(d.AgreedDate as date) = dateadd(day, 2, cast(GetDate() as date)) and\\r\\n        ws.[Oid] = d.[WorkflowState] and\\r\\n        wst.[Oid] = ws.[WorkflowStateType] and\\r\\n        wst.[Status] = 4 and\\r\\n        exists (\\r\\n            select  1\\r\\n            from    CurrentUserPermissions cup\\r\\n            where   d.Company = cup.Company and\\r\\n                    d.Division = cup.Division and\\r\\n                    d.Department = cup.Department \\r\\n        ) and\\r\\n        (d.[Company]  = @Company or @Company = '00000000-0000-0000-0000-000000000000') and\\r\\n        (d.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000') and\\r\\n        (d.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n        and ('00000000-0000-0000-0000-000000000000' in (@ClientOid) or d.Client in (@ClientOid))\\r\\n        and ('00000000-0000-0000-0000-000000000000' in (@ProjectOid) or d.Project in (@ProjectOid))\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"Company\",\"Division\",\"Department\",\"ClientOid\",\"ProjectOid\",\"UserOid\"]}}]",
      "DashboardComponentType": {
        "Id": "3c1da83b-efe9-4b70-87d0-c3813a512774",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\n    \"stateStoring\": {\n        \"enabled\": false\n    },\n    \"searchPanel\": {\n        \"visible\": false\n    },\n    \"width\": \"110\",\n    \"height\": \"83\",\n    \"columnChooser\": {\n        \"enabled\": false\n    },\n    \"export\": {\n        \"enabled\": false\n    },\n    \"groupPanel\": {\n        \"visible\": false\n    },\n    \"grouping\": {\n        \"autoExpandAll\": false\n    },\n    \"selection\": {\n        \"mode\": \"none\"\n    },\n    \"sorting\": {\n        \"mode\": \"none\"\n    },\n    \"allowColumnReordering\": false,\n    \"rowAlternationEnabled\": \"true\",\n    \"showBorders\": false,\n    \"columns\": [\n        {\n            \"caption\": \"Amanhã\",\n            \"headerCellTemplate\": \"function (element, info) {                var today = new Date();                today.setDate(today.getDate()+2);                var date = today.toLocaleDateString(undefined, {day:'2-digit'}) + ' ' + today.toLocaleDateString(undefined, {month:'short'});                SW.setAttribute(element, date, 'style', 'background-color:#0072C6; color:white; border-radius: 4px; line-height: 25px; width: 100px; font-weight: 700; font-size: 15px');            }\",\n            \"alignment\": \"center\",\n            \"dataField\": \"Total\",\n            \"format\": \"#,000\",\n            \"cellTemplate\": \"function(e, i) { SW.setAttribute(e, i.data.Total + ' ', 'style', 'font-size: 18px; font-weight: 700'); }\"\n        }\n    ],\n    \"onToolbarPreparing\": \"null\"\n}",
      "DashboardDefinitionId": "c80a80de-700f-4f0a-8507-802faf6b04a4"
    },
    {
      "Id": "5dce9ff0-0f3e-489d-89a1-17163fb4b9cf",
      "Name": "",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 2,
      "Order": 11,
      "Parameters": "[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":42,\"WidgetYPosition\":22,\"WidgetRows\":3,\"WidgetColumns\":6,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"select top 1 \\r\\n    CURRENT_TIMESTAMP as [Date]\\r\\nfrom CommercialClient\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]",
      "DashboardComponentType": {
        "Id": "3c1da83b-efe9-4b70-87d0-c3813a512774",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\"stateStoring\":{\"enabled\":false},\"width\":\"100%\",\"height\":\"83\",\"searchPanel\":{\"visible\":false},\"onContentReady\":\"function (e) {         \\n    if(window.refreshTimeout) \\n        clearTimeout(window.refreshTimeout);        \\n    window.refreshTimeout = setTimeout( \\n        function() { \\n            SW.RefreshDashboard();    \\n        },    \\n        500000)\\n}\",\"columnChooser\":{\"enabled\":false},\"export\":{\"enabled\":false},\"groupPanel\":{\"visible\":false},\"grouping\":{\"autoExpandAll\":false},\"selection\":{\"mode\":\"none\"},\"sorting\":{\"mode\":\"none\"},\"allowColumnReordering\":\"true\",\"rowAlternationEnabled\":\"true\",\"showBorders\":false,\"columns\":[{\"dataField1\":\"Date\",\"caption\":\"Última Atualização\",\"dataType\":\"date\",\"format\":\"d MMM H:mm\",\"calculateCellValue\":\"function (r) { var refreshDate = new Date(); return refreshDate; }\",\"headerCellTemplate\":\"function (e, i) {            var final = SW.setAttribute(e, i.column.caption, 'style', 'font-size: 15px; font-weight: 700');            e.append(final);    }\",\"cellTemplate\":\"function(e, i) {             SW.setAttribute(e, i.text, 'style', 'font-size: 18px; font-weight: 700');}\",\"alignment\":\"center\"}],\"onToolbarPreparing\":\"null\"}",
      "DashboardDefinitionId": "c80a80de-700f-4f0a-8507-802faf6b04a4"
    },
    {
      "Id": "7fb67b98-95ff-41cf-94f1-2cbb4c7af7cf",
      "Name": "Filtros por Companhia, Divisão e Departamento",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 12,
      "Order": 0,
      "Parameters": "[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"form\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#e0e0e0\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":0,\"WidgetRows\":2,\"WidgetColumns\":28,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"queryempty\",\"value\":\"\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[]}}]",
      "DashboardComponentType": {
        "Id": "3c1da83b-efe9-4b70-87d0-c3813a512774",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\"colCount\":\"3\",\"onContentReady\":\"function setFilters(e) {\\r\\n    SkillsWorkflow.setDashboardFilter('Company', '10000000-0000-0000-0000-000000000000');\\r\\n    SkillsWorkflow.setDashboardFilter('Division', '10000000-0000-0000-0000-000000000000');\\r\\n    SkillsWorkflow.setDashboardFilter('Department', '10000000-0000-0000-0000-000000000000');\\r\\n    setTimeout(function () {\\r\\n       console.log('onContentReady'); \\r\\n       var component = SW.getComponent('CompanyId'); \\r\\n        if (component && component.option('value')) \\r\\n        {\\r\\n            console.log(component.option('value'));\\r\\n            SW.setDashboardFilter('Company', component.option('value')); \\r\\n        }\\r\\n        else \\r\\n            SW.setDashboardFilter('Company', '00000000-0000-0000-0000-000000000000');\\r\\n        component = SW.getComponent('DivisionId'); \\r\\n        if (component && component.option('value')) \\r\\n        {\\r\\n            console.log(component.option('value'));\\r\\n            SW.setDashboardFilter('Division', component.option('value')); \\r\\n        }\\r\\n        else \\r\\n            SW.setDashboardFilter('Division', '00000000-0000-0000-0000-000000000000');\\r\\n        component = SW.getComponent('DepartmentId'); \\r\\n        if (component && component.option('value')) \\r\\n        {   \\r\\n            console.log(component.option('value'));\\r\\n            SW.setDashboardFilter('Department', component.option('value')); \\r\\n        }\\r\\n        else \\r\\n            SW.setDashboardFilter('Department', '00000000-0000-0000-0000-000000000000');\\r\\n    }, 1000)\\r\\n}\",\"items\":[{\"dataField\":\"CompanyId\",\"label\":{\"text\":\"Empresa\"},\"editorType\":\"dxSelectBox\",\"editorOptions\":{\"width\":200,\"searchEnabled\":true,\"dataSource\":{\"load\":\"function(loadOptions){                             var searchValue = (                            loadOptions.searchValue != null ? loadOptions.searchValue : '');                             var searchTake = (loadOptions.searchValue != null && loadOptions.searchValue != '' ? 10 : 100);                             return SkillsWorkflow.getMyCompanies('',                            0,                            0).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'Todas as empresas'                                });return res;                            });                }\",\"byKey\":\"function(key) { if (key != '00000000-0000-0000-0000-000000000000') return SW.executeAPI('GET','companies/'+key+'/lookup',null,{}).then( result =>  { return Promise.resolve(result);}); else return {Id: '00000000-0000-0000-0000-000000000000', Name: 'Todas as empresas'}; }\"},\"placeholder\":\"Todas as empresas\",\"displayExpr\":\"Name\",\"valueExpr\":\"Id\",\"onValueChanged\":\"function(e){                 console.log('onValueChanged'); if( e.value != null && e.value != '') {                    SkillsWorkflow.setDashboardFilter('Company', e.value);            } else {                    SkillsWorkflow.setDashboardFilter('Company', '00000000-0000-0000-0000-000000000000');            }                SW.setComponentByValue(e.previousValue, e.value, 'DivisionId');        }\",\"onInitialized\":\"function(e){ console.log('onInitialized'); var component = SW.getComponent('CompanyId'); if (component) { e.component.option('value', component.option('value') ? component.option('value') : '00000000-0000-0000-0000-000000000000'); e.component.option('disabled', false); } SW.saveComponent(e.component, 'CompanyId'); }\"}},{\"dataField\":\"DivisionId\",\"label\":{\"text\":\"Divisão\"},\"editorType\":\"dxSelectBox\",\"editorOptions\":{\"width\":200,\"searchEnabled\":true,\"dataSource\":{\"load\":\"function(loadOptions){                             let searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : '');                             let skip = loadOptions.skip || 0;                             let take = loadOptions.take || 20;                             var param = { name:searchValue, skip: skip, take: take            };                             var companyId = SW.getValueFromComponent('CompanyId');                             if (companyId == '00000000-0000-0000-0000-000000000000') {                                return SkillsWorkflow.executeAPI('GET', 'divisions/lookup',                null,                {}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'Todas as divisões'                   });return res;                })            } else if (companyId != null) {                                 param['companyId'                ] = companyId;                                return SkillsWorkflow.executeAPI('GET', 'divisions/lookup',param,                {}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'Todas as divisões'                    });return res;                })            }        }\",\"byKey\":\"function(key) { return SW.executeAPI('GET','divisions/'+key+'/lookup',null,{}).then( result =>  { return Promise.resolve(result);})}\"},\"placeholder\":\"Todas as divisões\",\"onValueChanged\":\"function(e){                 if (e.value != null && e.value != '') {                    SkillsWorkflow.setDashboardFilter('Division', e.value);    } else {                    SkillsWorkflow.setDashboardFilter('Division', '00000000-0000-0000-0000-000000000000');    }                SW.setComponentByValue(e.previousValue, e.value, 'DepartmentId');}\",\"onInitialized\":\"function(e){ var component = SW.getComponent('DivisionId'); if (component && component.option('value')) { e.component.option('value', component.option('value')); e.component.option('disabled', false); } SW.saveComponent(e.component, 'DivisionId'); }\",\"displayExpr\":\"Name\",\"valueExpr\":\"Id\"}},{\"dataField\":\"DepartmentId\",\"label\":{\"text\":\"Departamento\"},\"editorType\":\"dxSelectBox\",\"editorOptions\":{\"width\":200,\"searchEnabled\":true,\"dataSource\":{\"load\":\"function(loadOptions){                     let searchValue = (loadOptions.searchValue != null ? loadOptions.searchValue : '');                     let skip = loadOptions.skip || 0;                     let take = loadOptions.take || 20;                    var param = { name: searchValue, skip: skip, take: take    };                     var divisionId = SW.getValueFromComponent('DivisionId');                     var companyId = SW.getValueFromComponent('CompanyId');                     if (divisionId != null && divisionId != '00000000-0000-0000-0000-000000000000' && companyId != null && companyId != '00000000-0000-0000-0000-000000000000') {                         param['divisionId'        ] = divisionId;                        param['companyId'        ] = companyId;    } else if (divisionId != null && divisionId != '00000000-0000-0000-0000-000000000000' && (companyId == null || companyId == '00000000-0000-0000-0000-000000000000')) {                        param['divisionId'        ] = divisionId;    }                    return SkillsWorkflow.executeAPI('GET', 'departments',param,    {}).then(function(res){ res.push({Id: '00000000-0000-0000-0000-000000000000', Name:'Todos os departamentos'        });return res;    });}\",\"byKey\":\"function(key) { return SW.executeAPI('GET', 'departments/' + key, null, {}).then( result =>  { return Promise.resolve(result); } ) }\"},\"placeholder\":\"Todos os departamentos\",\"onValueChanged\":\"function(e){         if(e.value != null && e.value != '') {            SkillsWorkflow.setDashboardFilter('Department', e.value);} else {            SkillsWorkflow.setDashboardFilter('Department', '00000000-0000-0000-0000-000000000000');}}\",\"onInitialized\":\"function(e){ var component = SW.getComponent('DepartmentId'); if (component && component.option('value')) { e.component.option('value', component.option('value')); e.component.option('disabled', false); } SW.saveComponent(e.component, 'DepartmentId'); }\",\"displayExpr\":\"Name\",\"valueExpr\":\"Id\"}}]}",
      "DashboardDefinitionId": "c80a80de-700f-4f0a-8507-802faf6b04a4"
    },
    {
      "Id": "b8accd19-1409-4937-bfbb-3a025f3bac76",
      "Name": "Atividades em Tempo Real",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 6,
      "Order": 1,
      "Parameters": "[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":2,\"WidgetRows\":20,\"WidgetColumns\":28,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with CurrentUserPermissions as (\\r\\n    select  ucdd.Company as Company,\\r\\n            ucdd.Division as Division,\\r\\n            ucdd.Department as Department\\r\\n    from    SkillUsersCompaniesDivisionsDepartments ucdd\\r\\n    where   ucdd.[User] = @CurrentUserId\\r\\n) \\r\\nselect \\td.Oid as Id,\\r\\n        d.CreatedBy as UserId, \\r\\n\\t\\t(select STRING_AGG(convert(nvarchar(max), ass.[User]), ',') from Assignment ass, AssignmentType ast, [User] u where \\r\\n            ass.DocumentOid = d.Oid and ast.Name = 'Executor' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid) as ExecutorId,\\r\\n        (select STRING_AGG(convert(nvarchar(max), u.[Name]), ',') from Assignment ass, AssignmentType ast, [User] u where \\r\\n            ass.DocumentOid = d.Oid and ast.Name = 'Executor' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid) as ExecutorName,\\r\\n        (select STRING_AGG(convert(nvarchar(max), u.[HasImage]), ',') from Assignment ass, AssignmentType ast, [User] u where \\r\\n            ass.DocumentOid = d.Oid and ast.Name = 'Executor' and ass.AssignmentType = ast.Oid and ass.[User] = u.Oid) as ExecutorHasImage,    \\r\\n\\t\\td.NameAndExternalId as Name,\\r\\n\\t\\td.AgreedDate as Date,\\r\\n\\t\\tcc.Name as Client,\\r\\n\\t\\tcc.HasImage as ClientHasImage,\\r\\n\\t\\tcc.Oid as ClientId,\\r\\n\\t\\tws.[Name] as [Stage],\\r\\n        isnull(ws.Color, wst.Color) as StageColor\\r\\nfrom    [CommercialClient] cc,  \\r\\n        Deliverable d,\\r\\n        [WorkflowState] ws, \\r\\n        [WorkflowStateType] wst\\r\\nwhere \\tcc.Oid = d.Client and\\r\\n        ws.[Oid] = d.[WorkflowState] and\\r\\n        wst.[Oid] = ws.[WorkflowStateType] and\\r\\n\\t\\twst.[Status] = 4 and\\r\\n        exists (\\r\\n            select  1\\r\\n            from    CurrentUserPermissions cup\\r\\n            where   d.Company = cup.Company and\\r\\n                    d.Division = cup.Division and\\r\\n                    d.Department = cup.Department \\r\\n        ) and \\r\\n\\t\\tcast(d.AgreedDate as date) <= cast(GetDate() as date) and\\r\\n\\t\\t((d.[Company]  = @Company or @Company = '00000000-0000-0000-0000-000000000000')) and\\r\\n\\t\\t((d.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')) and\\r\\n\\t\\t((d.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')) and\\r\\n\\t\\t('00000000-0000-0000-0000-000000000000' in (@ClientOid) or d.Client in (@ClientOid)) and\\r\\n        ('00000000-0000-0000-0000-000000000000' in (@ProjectOid) or d.Project in (@ProjectOid))\\r\\norder by d.AgreedDate desc\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"Company\",\"Division\",\"Department\",\"ClientOid\",\"ProjectOid\",\"UserOid\"]}}]",
      "DashboardComponentType": {
        "Id": "3c1da83b-efe9-4b70-87d0-c3813a512774",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\"stateStoring\":{\"enabled\":false},\"height\":\"615\",\"searchPanel\":{\"visible\":false},\"columnChooser\":{\"enabled\":false},\"onToolbarPreparing\":\"null\",\"export\":{\"enabled\":false},\"groupPanel\":{\"visible\":false},\"paging\":{\"enabled\":false},\"grouping\":{\"autoExpandAll\":false},\"selection\":{\"mode\":\"none\"},\"sorting\":{\"mode\":\"none\"},\"allowColumnReordering\":false,\"rowAlternationEnabled\":false,\"showBorders\":false,\"columns\":[{\"dataField\":\"ClientId\",\"caption\":\"\",\"alignment\":\"left\",\"cellTemplate\":\"function(e, i) { SK.showImage(e, 'client', 'small',i.data['ClientHasImage'], i.data['Client'], i.data['ClientId']) }\",\"width\":40},{\"dataField\":\"Stage\",\"caption\":\"Etapa\",\"alignment\":\"left\",\"width\":150,\"cellTemplate\":\"function(e, i) {         var h=document.createElement('span');        h.style.backgroundColor = i.data.StageColor;         h.classList.add('documentStageColor');        e.append(h);        h=document.createElement('span');        h.innerHTML = ' ' + i.text;        e.append(h);}\"},{\"dataField\":\"ExecutorName\",\"caption\":\"\",\"width\":50,\"cellTemplate\":\"function(e, i) {            if(i.text == '')              return;            var userId = i.row.data.ExecutorId.split(',');            var userName = i.text.split(',');            var userImage = i.row.data.ExecutorHasImage.split(',');            function myFunction(item, index) {                if (userImage[index] === '1') {                    var hasImage = true;} else {                    var hasImage = false;}                SK.showImage(e, 'user', 'small', hasImage, item, userId[index]);}            userId.forEach( (item, index) => myFunction(item, index));}\"},{\"dataField\":\"ExecutorName\",\"caption\":\"Executor\",\"width\":150},{\"dataField\":\"Name\",\"caption\":\"Job\",\"width\":\"100%\"},{\"dataField\":\"Date\",\"caption\":\"Data\",\"dataType\":\"date\",\"format\":\"d MMM HH:mm\",\"cellTemplate\":\"function(e, i) { var today = new Date(new Date().toDateString()); var jobDate = new Date(new Date(i.value).toDateString()); SW.setRAG(e, i.text, +jobDate < +today, +jobDate == +today, +jobDate > +today);}\",\"alignment\":\"center\",\"width\":100}],\"summary\":{\"totalItems\":[{\"column\":\"Stage\",\"summaryType\":\"count\",\"valueFormat\":\"#,##0\",\"displayFormat\":\"Total: {0}\",\"alignment\":\"left\"}]},\"onRowClick\":\"function(e) {\\n    if (e.rowType == 'data')\\n        SW.preview(e.key, 'job');\\n}\"}",
      "DashboardDefinitionId": "c80a80de-700f-4f0a-8507-802faf6b04a4"
    },
    {
      "Id": "c571ed48-218b-456b-805a-50ebd1602673",
      "Name": "",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 1,
      "Order": 4,
      "Parameters": "[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":6,\"WidgetYPosition\":22,\"WidgetRows\":3,\"WidgetColumns\":6,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with CurrentUserPermissions as (\\r\\n    select  ucdd.Company as Company,\\r\\n            ucdd.Division as Division,\\r\\n            ucdd.Department as Department\\r\\n    from    SkillUsersCompaniesDivisionsDepartments ucdd\\r\\n    where   ucdd.[User] = @CurrentUserId\\r\\n) \\r\\nselect  count(*) as Total\\r\\nfrom    Deliverable d,\\r\\n        [WorkflowState] ws,\\r\\n        [WorkflowStateType] wst \\r\\nwhere   cast(d.AgreedDate as date) = cast(GetDate() as date) and\\r\\n        ws.[Oid] = d.[WorkflowState] and\\r\\n        wst.[Oid] = ws.[WorkflowStateType] and\\r\\n        wst.[Status] = 4 and\\r\\n        exists (\\r\\n            select  1\\r\\n            from    CurrentUserPermissions cup\\r\\n            where   d.Company = cup.Company and\\r\\n                    d.Division = cup.Division and\\r\\n                    d.Department = cup.Department \\r\\n        ) and\\r\\n        (d.[Company]  = @Company or @Company = '00000000-0000-0000-0000-000000000000') and\\r\\n        (d.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000') and\\r\\n        (d.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n        and ('00000000-0000-0000-0000-000000000000' in (@ClientOid) or d.Client in (@ClientOid))\\r\\n        and ('00000000-0000-0000-0000-000000000000' in (@ProjectOid) or d.Project in (@ProjectOid))\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"Company\",\"Division\",\"Department\",\"ClientOid\",\"ProjectOid\",\"UserOid\"]}}]",
      "DashboardComponentType": {
        "Id": "3c1da83b-efe9-4b70-87d0-c3813a512774",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\n    \"stateStoring\": {\n        \"enabled\": false\n    },\n    \"searchPanel\": {\n        \"visible\": false\n    },\n    \"width\": \"140\",\n    \"height\": \"83\",\n    \"columnChooser\": {\n        \"enabled\": false\n    },\n    \"export\": {\n        \"enabled\": false\n    },\n    \"groupPanel\": {\n        \"visible\": false\n    },\n    \"grouping\": {\n        \"autoExpandAll\": false\n    },\n    \"selection\": {\n        \"mode\": \"none\"\n    },\n    \"sorting\": {\n        \"mode\": \"none\"\n    },\n    \"allowColumnReordering\": false,\n    \"rowAlternationEnabled\": \"true\",\n    \"showBorders\": false,\n    \"columns\": [\n        {\n            \"caption\": \"Em Progresso\",\n            \"headerCellTemplate\": \"function(e, i) { SW.setAttribute(e, i.column.caption, 'style', 'background-color: rgb(255, 199, 32); color: white; border-radius: 4px; line-height: 25px; font-size: 15px; font-weight: 700; width: 130px;'); }\",\n            \"alignment\": \"center\",\n            \"dataField\": \"Total\",\n            \"format\": \"#,000\",\n            \"cellTemplate\": \"function(e, i) { SW.setAttribute(e, i.data.Total + ' ', 'style', 'font-size: 18px; font-weight: 700'); }\"\n        }\n    ],\n    \"onToolbarPreparing\": \"null\"\n}",
      "DashboardDefinitionId": "c80a80de-700f-4f0a-8507-802faf6b04a4"
    },
    {
      "Id": "e2cfe73d-f3df-447e-8662-71d1adcfebfc",
      "Name": "",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 1,
      "Order": 4,
      "Parameters": "[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":12,\"WidgetYPosition\":22,\"WidgetRows\":3,\"WidgetColumns\":6,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with CurrentUserPermissions as (\\r\\n    select  ucdd.Company as Company,\\r\\n            ucdd.Division as Division,\\r\\n            ucdd.Department as Department\\r\\n    from    SkillUsersCompaniesDivisionsDepartments ucdd\\r\\n    where   ucdd.[User] = @CurrentUserId\\r\\n) \\r\\nselect  count(*) as Total\\r\\nfrom    Deliverable d,\\r\\n        [WorkflowState] ws,\\r\\n        [WorkflowStateType] wst \\r\\nwhere   cast(d.AgreedDate as date) = cast(GetDate() as date) and\\r\\n        ws.[Oid] = d.[WorkflowState] and\\r\\n        wst.[Oid] = ws.[WorkflowStateType] and\\r\\n        wst.[Status] in (5, 6, 10) and\\r\\n        exists (\\r\\n            select  1\\r\\n            from    CurrentUserPermissions cup\\r\\n            where   d.Company = cup.Company and\\r\\n                    d.Division = cup.Division and\\r\\n                    d.Department = cup.Department \\r\\n        ) and\\r\\n        (d.[Company]  = @Company or @Company = '00000000-0000-0000-0000-000000000000') and\\r\\n        (d.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000') and\\r\\n        (d.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n        and ('00000000-0000-0000-0000-000000000000' in (@ClientOid) or d.Client in (@ClientOid))\\r\\n        and ('00000000-0000-0000-0000-000000000000' in (@ProjectOid) or d.Project in (@ProjectOid))\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"Company\",\"Division\",\"Department\",\"ClientOid\",\"ProjectOid\",\"UserOid\"]}}]",
      "DashboardComponentType": {
        "Id": "3c1da83b-efe9-4b70-87d0-c3813a512774",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\n    \"stateStoring\": {\n        \"enabled\": false\n    },\n    \"searchPanel\": {\n        \"visible\": false\n    },\n    \"width\": \"140\",\n    \"height\": \"83\",\n    \"columnChooser\": {\n        \"enabled\": false\n    },\n    \"export\": {\n        \"enabled\": false\n    },\n    \"groupPanel\": {\n        \"visible\": false\n    },\n    \"grouping\": {\n        \"autoExpandAll\": false\n    },\n    \"selection\": {\n        \"mode\": \"none\"\n    },\n    \"sorting\": {\n        \"mode\": \"none\"\n    },\n    \"allowColumnReordering\": false,\n    \"rowAlternationEnabled\": \"true\",\n    \"showBorders\": false,\n    \"columns\": [\n        {\n            \"caption\": \"Entregue\",\n            \"headerCellTemplate\": \"function(e, i) { SW.setAttribute(e, i.column.caption, 'style', 'background-color: rgb(126, 200, 128); color: white; border-radius: 4px; line-height: 25px; font-size: 15px; font-weight: 700; width: 130px;'); }\",\n            \"alignment\": \"center\",\n            \"dataField\": \"Total\",\n            \"format\": \"#,000\",\n            \"cellTemplate\": \"function(e, i) { SW.setAttribute(e, i.data.Total + ' ', 'style', 'font-size: 18px; font-weight: 700'); }\"\n        }\n    ],\n    \"onToolbarPreparing\": \"null\"\n}",
      "DashboardDefinitionId": "c80a80de-700f-4f0a-8507-802faf6b04a4"
    },
    {
      "Id": "c8f5e6ba-fc1c-44da-bc0d-9eee8e8a289a",
      "Name": "",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 1,
      "Order": 4,
      "Parameters": "[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":38,\"WidgetYPosition\":22,\"WidgetRows\":3,\"WidgetColumns\":4,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with CurrentUserPermissions as (\\r\\n    select  ucdd.Company as Company,\\r\\n            ucdd.Division as Division,\\r\\n            ucdd.Department as Department\\r\\n    from    SkillUsersCompaniesDivisionsDepartments ucdd\\r\\n    where   ucdd.[User] = @CurrentUserId\\r\\n) \\r\\nselect  count(*) as Total\\r\\nfrom    Deliverable d,\\r\\n        [WorkflowState] ws,\\r\\n        [WorkflowStateType] wst \\r\\nwhere   cast(d.AgreedDate as date) = dateadd(day, 3, cast(GetDate() as date)) and\\r\\n        ws.[Oid] = d.[WorkflowState] and\\r\\n        wst.[Oid] = ws.[WorkflowStateType] and\\r\\n        wst.[Status] = 4 and\\r\\n        exists (\\r\\n            select  1\\r\\n            from    CurrentUserPermissions cup\\r\\n            where   d.Company = cup.Company and\\r\\n                    d.Division = cup.Division and\\r\\n                    d.Department = cup.Department \\r\\n        ) and\\r\\n        (d.[Company]  = @Company or @Company = '00000000-0000-0000-0000-000000000000') and\\r\\n        (d.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000') and\\r\\n        (d.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n        and ('00000000-0000-0000-0000-000000000000' in (@ClientOid) or d.Client in (@ClientOid))\\r\\n        and ('00000000-0000-0000-0000-000000000000' in (@ProjectOid) or d.Project in (@ProjectOid))\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"Company\",\"Division\",\"Department\",\"ClientOid\",\"ProjectOid\",\"UserOid\"]}}]",
      "DashboardComponentType": {
        "Id": "3c1da83b-efe9-4b70-87d0-c3813a512774",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\n    \"stateStoring\": {\n        \"enabled\": false\n    },\n    \"searchPanel\": {\n        \"visible\": false\n    },\n    \"width\": \"110\",\n    \"height\": \"83\",\n    \"columnChooser\": {\n        \"enabled\": false\n    },\n    \"export\": {\n        \"enabled\": false\n    },\n    \"groupPanel\": {\n        \"visible\": false\n    },\n    \"grouping\": {\n        \"autoExpandAll\": false\n    },\n    \"selection\": {\n        \"mode\": \"none\"\n    },\n    \"sorting\": {\n        \"mode\": \"none\"\n    },\n    \"allowColumnReordering\": false,\n    \"rowAlternationEnabled\": \"true\",\n    \"showBorders\": false,\n    \"columns\": [\n        {\n            \"caption\": \"Amanhã\",\n            \"headerCellTemplate\": \"function (element, info) {                var today = new Date();                today.setDate(today.getDate() + 3);                var date = today.toLocaleDateString(undefined, {day:'2-digit'}) + ' ' + today.toLocaleDateString(undefined, {month:'short'});                SW.setAttribute(element, date, 'style', 'background-color:#0072C6; color:white; border-radius: 4px; line-height: 25px; width: 100px; font-weight: 700; font-size:15px');            }\",\n            \"alignment\": \"center\",\n            \"dataField\": \"Total\",\n            \"format\": \"#,000\",\n            \"cellTemplate\": \"function(e, i) { SW.setAttribute(e, i.data.Total + ' ', 'style', 'font-size: 18px; font-weight: 700'); }\"\n        }\n    ],\n    \"onToolbarPreparing\": \"null\"\n}",
      "DashboardDefinitionId": "c80a80de-700f-4f0a-8507-802faf6b04a4"
    },
    {
      "Id": "b72a0455-bdd8-430f-8d7b-9f118c3afb06",
      "Name": "",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 1,
      "Order": 4,
      "Parameters": "[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":0,\"WidgetYPosition\":22,\"WidgetRows\":3,\"WidgetColumns\":6,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with CurrentUserPermissions as (\\r\\n    select  ucdd.Company as Company,\\r\\n            ucdd.Division as Division,\\r\\n            ucdd.Department as Department\\r\\n    from    SkillUsersCompaniesDivisionsDepartments ucdd\\r\\n    where   ucdd.[User] = @CurrentUserId\\r\\n) \\r\\nselect  count(*) as Total\\r\\nfrom    Deliverable d,\\r\\n        [WorkflowState] ws,\\r\\n        [WorkflowStateType] wst \\r\\nwhere   cast(d.AgreedDate as date) < cast(GetDate() as date) and\\r\\n        ws.[Oid] = d.[WorkflowState] and\\r\\n        wst.[Oid] = ws.[WorkflowStateType] and\\r\\n        wst.[Status] = 4 and\\r\\n        exists (\\r\\n            select  1\\r\\n            from    CurrentUserPermissions cup\\r\\n            where   d.Company = cup.Company and\\r\\n                    d.Division = cup.Division and\\r\\n                    d.Department = cup.Department \\r\\n        ) and\\r\\n        (d.[Company]  = @Company or @Company = '00000000-0000-0000-0000-000000000000') and\\r\\n        (d.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000') and\\r\\n        (d.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n        and ('00000000-0000-0000-0000-000000000000' in (@ClientOid) or d.Client in (@ClientOid))\\r\\n        and ('00000000-0000-0000-0000-000000000000' in (@ProjectOid) or d.Project in (@ProjectOid))\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"Company\",\"Division\",\"Department\",\"ClientOid\",\"ProjectOid\",\"UserOid\"]}}]",
      "DashboardComponentType": {
        "Id": "3c1da83b-efe9-4b70-87d0-c3813a512774",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\n    \"stateStoring\": {\n        \"enabled\": false\n    },\n    \"searchPanel\": {\n        \"visible\": false\n    },\n    \"width\": \"140\",\n    \"height\": \"83\",\n    \"columnChooser\": {\n        \"enabled\": false\n    },\n    \"export\": {\n        \"enabled\": false\n    },\n    \"groupPanel\": {\n        \"visible\": false\n    },\n    \"grouping\": {\n        \"autoExpandAll\": false\n    },\n    \"selection\": {\n        \"mode\": \"none\"\n    },\n    \"sorting\": {\n        \"mode\": \"none\"\n    },\n    \"allowColumnReordering\": false,\n    \"rowAlternationEnabled\": \"true\",\n    \"showBorders\": false,\n    \"columns\": [\n        {\n            \"caption\": \"Atrasado\",\n            \"headerCellTemplate\": \"function(e, i) { SW.setAttribute(e, i.column.caption, 'style', 'background-color: rgb(247, 65, 45); color: white; border-radius: 4px; line-height: 25px; font-size: 15px; font-weight: 700; width: 130px;'); }\",\n            \"alignment\": \"center\",\n            \"dataField\": \"Total\",\n            \"cellTemplate\": \"function(e, i) { SW.setAttribute(e, i.data.Total + ' ', 'style', 'font-size: 18px; font-weight: 700'); }\"\n        }\n    ],\n    \"onToolbarPreparing\": \"null\"\n}",
      "DashboardDefinitionId": "c80a80de-700f-4f0a-8507-802faf6b04a4"
    },
    {
      "Id": "6dda7a12-90cb-4dd2-a3c6-b1644812378d",
      "Name": "Cliente, Projecto e User",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 12,
      "Order": 0,
      "Parameters": "[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"tag\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"#e0e0e0\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":28,\"WidgetYPosition\":0,\"WidgetRows\":2,\"WidgetColumns\":20,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"\\t\\t\\twith t as\\r\\n(\\r\\n    select  d.Client,\\r\\n            d.Project,\\r\\n            d.Oid\\r\\n    from    Deliverable d,\\r\\n            [WorkflowState] ws, \\r\\n            [WorkflowStateType] wst\\r\\n    where \\tws.[Oid] = d.[WorkflowState] and\\r\\n            wst.[Oid] = ws.[WorkflowStateType] and\\r\\n            wst.[Status] = 4 and\\r\\n            cast(d.AgreedDate as date) <= cast(GetDate() as date) and\\r\\n            ((d.[Company]  = @Company or @Company = '00000000-0000-0000-0000-000000000000')) and\\r\\n            ((d.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000')) and\\r\\n            ((d.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000'))\\r\\n)\\r\\nselect  distinct\\r\\n        'Client' as GroupName, \\r\\n        'ClientOid' as GroupId, \\r\\n        c.NameAndExternalId as Name, \\r\\n        c.Oid as Oid\\r\\nfrom    CommercialClient c, t\\r\\nwhere   c.Oid = t.Client\\r\\nunion all\\r\\nselect  distinct \\r\\n        'Project' as GroupName, \\r\\n        'ProjectOid' as GroupId, \\r\\n        p.NameAndExternalId,\\r\\n\\t\\tp.Oid\\r\\nfrom    Project p, t\\r\\nwhere   p.Oid = t.Project\\r\\nunion all\\r\\nselect  distinct \\r\\n        'User' as GroupName, \\r\\n        'UserOid' as GroupId, \\r\\n        u.Name, \\r\\n        u.Oid \\r\\nfrom    [User] u, t, Assignment ass, AssignmentType ast\\r\\nwhere   ass.DocumentOid = t.Oid and \\r\\n        ast.Name = 'Executor' and \\r\\n        ass.AssignmentType = ast.Oid and \\r\\n        ass.[User] = u.Oid\\r\\norder by 1, 3\",\"mapping\":{\"groupExpr\":\"GroupName\",\"groupId\":\"GroupId\",\"displayExpr\":\"Name\",\"valueExpr\":\"Oid\"}}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"Company\",\"Division\",\"Department\"]}}]",
      "DashboardComponentType": {
        "Id": "3c1da83b-efe9-4b70-87d0-c3813a512774",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\n    \"align\": \"right\",\n    \"width\": \"480\"\n}",
      "DashboardDefinitionId": "c80a80de-700f-4f0a-8507-802faf6b04a4"
    },
    {
      "Id": "56c3f429-a721-4cae-9c9b-deb618a3797d",
      "Name": "",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 1,
      "Order": 4,
      "Parameters": "[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":28,\"WidgetYPosition\":22,\"WidgetRows\":3,\"WidgetColumns\":5,\"WidgetHeader\":{\"showTitle\":false,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with CurrentUserPermissions as (\\r\\n    select  ucdd.Company as Company,\\r\\n            ucdd.Division as Division,\\r\\n            ucdd.Department as Department\\r\\n    from    SkillUsersCompaniesDivisionsDepartments ucdd\\r\\n    where   ucdd.[User] = @CurrentUserId\\r\\n) \\r\\nselect  count(*) as Total\\r\\nfrom    Deliverable d,\\r\\n        [WorkflowState] ws,\\r\\n        [WorkflowStateType] wst \\r\\nwhere   cast(d.AgreedDate as date) = dateadd(day, 1, cast(GetDate() as date)) and\\r\\n        ws.[Oid] = d.[WorkflowState] and\\r\\n        wst.[Oid] = ws.[WorkflowStateType] and\\r\\n        wst.[Status] = 4 and\\r\\n        exists (\\r\\n            select  1\\r\\n            from    CurrentUserPermissions cup\\r\\n            where   d.Company = cup.Company and\\r\\n                    d.Division = cup.Division and\\r\\n                    d.Department = cup.Department \\r\\n        ) and\\r\\n        (d.[Company]  = @Company or @Company = '00000000-0000-0000-0000-000000000000') and\\r\\n        (d.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000') and\\r\\n        (d.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000')\\r\\n        and ('00000000-0000-0000-0000-000000000000' in (@ClientOid) or d.Client in (@ClientOid))\\r\\n        and ('00000000-0000-0000-0000-000000000000' in (@ProjectOid) or d.Project in (@ProjectOid))\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"Company\",\"Division\",\"Department\",\"ClientOid\",\"ProjectOid\",\"UserOid\"]}}]",
      "DashboardComponentType": {
        "Id": "3c1da83b-efe9-4b70-87d0-c3813a512774",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\n    \"stateStoring\": {\n        \"enabled\": false\n    },\n    \"searchPanel\": {\n        \"visible\": false\n    },\n    \"width\": \"110\",\n    \"height\": \"83\",\n    \"columnChooser\": {\n        \"enabled\": false\n    },\n    \"export\": {\n        \"enabled\": false\n    },\n    \"groupPanel\": {\n        \"visible\": false\n    },\n    \"grouping\": {\n        \"autoExpandAll\": false\n    },\n    \"selection\": {\n        \"mode\": \"none\"\n    },\n    \"sorting\": {\n        \"mode\": \"none\"\n    },\n    \"allowColumnReordering\": false,\n    \"rowAlternationEnabled\": \"true\",\n    \"showBorders\": false,\n    \"columns\": [\n        {\n            \"caption\": \"Amanhã\",\n            \"headerCellTemplate\": \"function(e, i) { SW.setAttribute(e, i.column.caption, 'style', 'background-color: #0072C6; color: white; border-radius: 4px; line-height: 25px; font-size: 15px; font-weight: 700; width: 100px;'); }\",\n            \"alignment\": \"center\",\n            \"dataField\": \"Total\",\n            \"format\": \"#,000\",\n            \"cellTemplate\": \"function(e, i) { SW.setAttribute(e, i.data.Total + ' ', 'style', 'font-size: 18px; font-weight: 700'); }\"\n        }\n    ],\n    \"onToolbarPreparing\": \"null\"\n}",
      "DashboardDefinitionId": "c80a80de-700f-4f0a-8507-802faf6b04a4"
    },
    {
      "Id": "0746ea64-3ab3-4210-adeb-fde983f058d4",
      "Name": "Status de Atividades por Cliente",
      "Active": true,
      "UseQuery": false,
      "Query": "",
      "Size": 6,
      "Order": 2,
      "Parameters": "[{\"WidgetSubTitle\":\"\",\"WidgetType\":\"grid\",\"WidgetFilterField\":\"\",\"WidgetColor\":\"\",\"WidgetFrameStyle\":{},\"WidgetXPosition\":28,\"WidgetYPosition\":2,\"WidgetRows\":20,\"WidgetColumns\":20,\"WidgetHeader\":{\"showTitle\":true,\"showSubTitle\":false,\"WidgetMetrics\":{\"visible\":false,\"Metrics\":[]},\"WidgetPeriodChooser\":{\"visible\":false,\"type\":\"\",\"startDate\":null,\"endDate\":null}},\"WidgetDataSources\":{\"main\":{\"type\":\"querytext\",\"value\":\"with CurrentUserPermissions as (\\r\\n    select  ucdd.Company as Company,\\r\\n            ucdd.Division as Division,\\r\\n            ucdd.Department as Department\\r\\n    from    SkillUsersCompaniesDivisionsDepartments ucdd\\r\\n    where   ucdd.[User] = @CurrentUserId\\r\\n) \\r\\nselect  cc.Oid as ClientId, \\r\\n        cc.[Name] as ClientName, \\r\\n        cc.[HasImage] as ClientHasImage,\\r\\n        sum(iif(wst.[Status] = 4 and cast(d.AgreedDate as date) < cast(GetDate() as date), 1, 0)) as Delayed,\\r\\n        sum(iif(wst.[Status] = 4 and cast(d.AgreedDate as date) = cast(GetDate() as date), 1, 0)) as InProgress,\\r\\n        sum(iif(wst.[Status] != 4 and cast(d.AgreedDate as date) = cast(GetDate() as date), 1, 0)) as Done\\r\\nfrom    Deliverable d,\\r\\n        [WorkflowState] ws,\\r\\n        [WorkflowStateType] wst,\\r\\n        [CommercialClient] cc\\r\\nwhere   ws.[Oid] = d.[WorkflowState] and\\r\\n        wst.[Oid] = ws.[WorkflowStateType] and\\r\\n        wst.[Status] in (4, 5, 6, 10) and\\r\\n        cast(d.AgreedDate as date) <= cast(GetDate() as date) and\\r\\n        cc.[Oid] = d.[Client] and\\r\\n        exists (\\r\\n            select  1\\r\\n            from    CurrentUserPermissions cup\\r\\n            where   d.Company = cup.Company and\\r\\n                    d.Division = cup.Division and\\r\\n                    d.Department = cup.Department \\r\\n        ) and\\r\\n        (d.[Company]  = @Company or @Company = '00000000-0000-0000-0000-000000000000') and\\r\\n        (d.[Division] = @Division or @Division = '00000000-0000-0000-0000-000000000000') and\\r\\n        (d.[Department] = @Department or @Department = '00000000-0000-0000-0000-000000000000') and\\r\\n        ('00000000-0000-0000-0000-000000000000' in (@ClientOid) or d.Client in (@ClientOid)) and\\r\\n        ('00000000-0000-0000-0000-000000000000' in (@ProjectOid) or d.Project in (@ProjectOid)) \\r\\ngroup by cc.Oid, cc.[Name], cc.[HasImage]\",\"mapping\":\"\"}},\"Filters\":{},\"QueryConfiguration\":{\"PreviousPeriod\":{\"Show\":false,\"KeyFieldName\":\"\",\"Type\":0},\"RequiredFilters\":[\"Company\",\"Division\",\"Department\",\"ProjectOid\",\"ClientOid\",\"UserOid\"]}}]",
      "DashboardComponentType": {
        "Id": "3c1da83b-efe9-4b70-87d0-c3813a512774",
        "Name": "Generic Dashboard",
        "ComponentTypeNumber": 42
      },
      "AnalyticsApiUrl": "",
      "Configuration": "{\n    \"stateStoring\": {\n        \"enabled\": false\n    },\n    \"height\": \"615\",\n    \"searchPanel\": {\n        \"visible\": false\n    },\n    \"columnChooser\": {\n        \"enabled\": false\n    },\n    \"onToolbarPreparing\": \"null\",\n    \"export\": {\n        \"enabled\": false\n    },\n    \"paging\": {\n        \"enabled\": false\n    },\n    \"groupPanel\": {\n        \"visible\": false\n    },\n    \"grouping\": {\n        \"autoExpandAll\": false\n    },\n    \"selection\": {\n        \"mode\": \"none\"\n    },\n    \"sorting\": {\n        \"mode\": \"none\"\n    },\n    \"allowColumnReordering\": false,\n    \"rowAlternationEnabled\": false,\n    \"showBorders\": false,\n    \"columns\": [\n        {\n            \"caption\": \"\",\n            \"format\": \"#,##0\",\n            \"cellTemplate\": \"function(e, i) { SK.showImage(e, 'client', 'small', i.data.ClientHasImage, i.data.ClientName, i.data.ClientId)}\",\n            \"width\": 50\n        },\n        {\n            \"dataField\": \"ClientName\",\n            \"name\": \"Client\",\n            \"caption\": \"Cliente\",\n            \"width\": \"100%\"\n        },\n        {\n            \"dataField\": \"Delayed\",\n            \"caption\": \"Atrasado\",\n            \"alignment\": \"center\",\n            \"headerCellTemplate\": \"function(e, i) { SW.setAttribute(e, i.column.caption, 'style', 'background-color:rgb(247, 65, 45); color:white; border-radius: 4px; line-height: 25px; width: 100%; font-weight: 700'); }\",\n            \"width\": 100\n        },\n        {\n            \"dataField\": \"InProgress\",\n            \"caption\": \"Em Progresso\",\n            \"alignment\": \"center\",\n            \"headerCellTemplate\": \"function(e, i) { SW.setAttribute(e, i.column.caption, 'style', 'background-color:rgb(255, 199, 32); color:white; border-radius: 4px; line-height: 25px; width: 100%; font-weight: 700'); }\",\n            \"width\": 120\n        },\n        {\n            \"dataField\": \"Done\",\n            \"caption\": \"Entregue\",\n            \"alignment\": \"center\",\n            \"headerCellTemplate\": \"function(e, i) { SW.setAttribute(e, i.column.caption, 'style', 'background-color:rgb(126, 200, 128); color:white; border-radius: 4px; line-height: 25px; width: 100%; font-weight: 700'); }\",\n            \"width\": 100\n        }\n    ],\n    \"summary\": {\n        \"totalItems\": [\n            {\n                \"showInColumn\": \"Atrasado\",\n                \"column\": \"Delayed\",\n                \"summaryType\": \"sum\",\n                \"displayFormat\": \"{0}\"\n            },\n            {\n                \"showInColumn\": \"Em Progresso\",\n                \"column\": \"InProgress\",\n                \"summaryType\": \"sum\",\n                \"displayFormat\": \"{0}\"\n            },\n            {\n                \"showInColumn\": \"Entregue\",\n                \"column\": \"Done\",\n                \"summaryType\": \"sum\",\n                \"displayFormat\": \"{0}\"\n            }\n        ]\n    }\n}",
      "DashboardDefinitionId": "c80a80de-700f-4f0a-8507-802faf6b04a4"
    }
  ],
  "QueryText": "",
  "UseStore": false,
  "StoreEntity": null,
  "Version": 4,
  "Default": false
}
